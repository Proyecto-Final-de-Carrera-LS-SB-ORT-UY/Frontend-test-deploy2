import{a as D,b as T,c as L,d as K,e as J,f as le,g as N,h as Z,j as $,p as be,q as ee,r as te,s as S}from"./chunk-YAN3PODB.js";import{A as ie,B as se,C as V,E as Q,F as X,G as we,I as A,K as C,L as Y,l as b,t as O,u as y,w as E,x as F,z as ae}from"./chunk-MAMTLARS.js";import{Aa as p,Eb as R,Lb as d,Wb as o,Xb as r,Yb as x,ac as w,dc as m,fc as _,id as z,kb as l,kc as G,lb as f,lc as q,mc as H,nc as B,oc as s,pc as U,qc as M,rd as _e,tc as P,uc as k,vc as I,xb as v,za as c}from"./chunk-UTT5WITA.js";import"./chunk-X5YLR3NI.js";import{a as xe,b as ve,i as h}from"./chunk-ODN5LVDJ.js";var ge=class a{static \u0275fac=function(i){return new(i||a)};static \u0275cmp=v({type:a,selectors:[["ng-component"]],decls:2,vars:0,template:function(i,e){i&1&&(o(0,"h2"),s(1,"Error 404: Page not found"),r())},encapsulation:2})};var ce=class a{static \u0275fac=function(i){return new(i||a)};static \u0275cmp=v({type:a,selectors:[["ng-component"]],decls:2,vars:0,template:function(i,e){i&1&&(o(0,"h2"),s(1,"Error 500: Internal Server Error"),r())},encapsulation:2})};var pe=class a{constructor(t,i){this.supabaseService=t;this._router=i;this.obtainSession()}Username="";FullName="";Image=null;ImageUrl="";Answer="Carola";answer=!1;token="";tokenIsValid=!1;loguedUser={userid:"some-generic-id",email:"generic@example.com"};Sesion=null;ngOnInit(){}signup(){return h(this,null,function*(){if(this.validate())try{if(this.Image&&this.Sesion){let t=yield this.supabaseService.uploadImage(this.Sesion.user,this.Image);!t.error&&t.data?(this.ImageUrl=t.data.path,yield this.supabaseService.updateUserProfile(this.Username,this.FullName,this.ImageUrl,this.Sesion.user),this.Answer="Successfully registered!"):console.error("Error uploading image: ",t.error?.message)}else console.log(this.Sesion),console.log(this.Image)}catch(t){console.error("Error during signup:",t),this.Answer="An error occurred during registration."}else this.Answer="Please upload an image and complete all fields"})}validate(){return this.Username.length>0&&this.FullName.length>0&&this.Image!=null}navigateToSecond(){this._router.navigateByUrl("/login")}onImageSelected(t){let e=t.target.files;e&&e.length>0&&(this.Image=e[0])}obtainSession(){return h(this,null,function*(){try{this.Sesion=yield this.supabaseService.getSession(),this.Sesion===null?console.error("No session data available"):(this.loguedUser=this.extractUserInfo(this.Sesion.user),console.log(this.Sesion))}catch{console.error("Failed to get session:")}})}extractUserInfo(t){return{userid:t.id,email:t.email}}static \u0275fac=function(i){return new(i||a)(f(S),f(b))};static \u0275cmp=v({type:a,selectors:[["app-signupMagicLink"]],decls:44,vars:7,consts:[["signupForm","ngForm"],[3,"ngSubmit"],[1,"column-layout","columnque-engloba-text-box"],[1,"row-layout","group"],[1,"row-layout","group_1"],[1,"h5"],["type","box",1,"text-box-nombre-de-usuario"],["type","text","igxInput","","name","username",3,"ngModelChange","required","ngModel"],[1,"row-layout","group_2"],["type","text","igxInput","","name","fullname",3,"ngModelChange","required","ngModel"],[1,"custom-file-input"],["for","profileImageInput",1,"custom-file-label"],["type","file","id","profileImageInput","required","","name","image",3,"change"],[1,"row-layout","group_3"],[1,"row-layout","group_4"],["igxButton","raised","igxRipple","",1,"button",3,"disabled"],["type","button","igxButton","raised","igxRipple","",1,"button",3,"click"]],template:function(i,e){if(i&1){let n=w();o(0,"form",1,0),m("ngSubmit",function(){return c(n),p(e.signup())}),o(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),s(6," Username "),r()(),o(7,"igx-input-group",6)(8,"input",7),I("ngModelChange",function(g){return c(n),k(e.Username,g)||(e.Username=g),p(g)}),r()()(),o(9,"div",3)(10,"div",4)(11,"h5",5),s(12," Full Name "),r()(),o(13,"div",8)(14,"igx-input-group",6)(15,"input",9),I("ngModelChange",function(g){return c(n),k(e.FullName,g)||(e.FullName=g),p(g)}),r()()()(),o(16,"div",3)(17,"div",4)(18,"h5",5),s(19," Profil Photo "),r()(),o(20,"div",8)(21,"div",10)(22,"label",11),s(23),r(),x(24,"br"),o(25,"input",12),m("change",function(g){return c(n),p(e.onImageSelected(g))}),r()()()(),o(26,"div",3)(27,"div",4)(28,"h5",5),s(29),r()()(),o(30,"div",13),x(31,"div",14)(32,"div",14),o(33,"div",14)(34,"button",15),s(35," REGISTER "),r()(),x(36,"div",14),r(),o(37,"div",13),x(38,"div",14)(39,"div",14),o(40,"div",14)(41,"button",16),m("click",function(){return c(n),p(e.navigateToSecond())}),s(42," RETURN TO LOGIN "),r()(),x(43,"div",14),r()()()}if(i&2){let n=B(1);l(8),d("required",!0),P("ngModel",e.Username),l(7),d("required",!0),P("ngModel",e.FullName),l(8),U(e.Image?"Image Selected: ":"Choose Image: "),l(6),M(" ",e.Answer," "),l(5),d("disabled",!n.form.valid)}},dependencies:[C,V,O,E,F,we,se,ae,ee,N,T],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch;align-content:flex-start}.column-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column}.columnque-engloba-text-box[_ngcontent-%COMP%]{justify-content:flex-start;align-items:stretch;align-content:flex-start;margin:250px 250px 0;padding:15px;width:1414px;height:580px;min-width:50px;min-height:50px}.row-layout[_ngcontent-%COMP%]{display:flex}.group[_ngcontent-%COMP%]{justify-content:flex-start;align-items:stretch;align-content:flex-start;margin:10px;width:1378px;min-width:50px;min-height:50px}.group_1[_ngcontent-%COMP%]{justify-content:flex-start;align-items:stretch;align-content:flex-start;width:200px;height:50px;min-width:200px;min-height:50px}.group_2[_ngcontent-%COMP%]{justify-content:flex-start;align-items:stretch;align-content:flex-start;width:1186px;height:50px;min-width:450px;min-height:50px}.group_3[_ngcontent-%COMP%]{justify-content:flex-start;align-items:stretch;align-content:flex-start;margin:10px;width:1387px;height:50px;min-width:50px;min-height:50px}.group_4[_ngcontent-%COMP%]{justify-content:flex-start;align-items:stretch;align-content:flex-start;width:280px;min-width:50px;min-height:50px}.view-container[_ngcontent-%COMP%]{z-index:1;left:680px;top:100px;position:fixed;width:1015px;height:800px;min-width:0;min-height:0;flex-shrink:0}.content[_ngcontent-%COMP%]{height:max-content;min-width:min-content}.text-box-nombre-de-usuario[_ngcontent-%COMP%]{width:1000px;height:max-content;min-width:min-content;flex-shrink:0}.button[_ngcontent-%COMP%]{background-color:hsla(var(--igx-primary-500));margin:5px;width:270px;height:max-content;min-width:min-content}.button_1[_ngcontent-%COMP%]{height:max-content;min-width:min-content}"]})};var Me=["alert"],me=class a{constructor(t,i){this.supabaseService=t;this._router=i;this.supabaseService.weatherStationsSupabaseObjectObservable.subscribe(e=>h(this,null,function*(){this.WeatherStations=e,console.log("tengo estas estaciones en el componente",this.WeatherStations)}))}alert;ImeiOwner="999999999999";Exists=!1;WeatherStations=[];userLogued;asociar(){return h(this,null,function*(){this.userLogued=yield this.supabaseService.obtainSession(),console.log("este es el usuario logueado",this.userLogued);let t=Number(this.ImeiOwner);for(let i=0;i<this.WeatherStations.length;i++)if(console.log("comparo este imei",this.WeatherStations[i].imei,"con el siguiente imei",this.ImeiOwner),this.WeatherStations[i].imei.toString()===this.ImeiOwner.toString()){this.Exists=!0;break}if(this.Exists){console.log(`El IMEI ${this.ImeiOwner} existe en las estaciones meteorol\xF3gicas.`);let i={imei:this.ImeiOwner,username_id:this.userLogued.user.id,association_date:new Date().toISOString()};yield this.supabaseService.addOwner(i),this._router.navigateByUrl("/master-view")}else console.log(`El IMEI ${this.ImeiOwner} no existe en las estaciones meteorol\xF3gicas.`),this.alert?.open()})}static \u0275fac=function(i){return new(i||a)(f(S),f(b))};static \u0275cmp=v({type:a,selectors:[["app-codigo-activacion"]],viewQuery:function(i,e){if(i&1&&G(Me,7),i&2){let n;q(n=H())&&(e.alert=n.first)}},decls:20,vars:1,consts:[["alert",""],[1,"column-layout","group"],[1,"row-layout","group"],[1,"row-layout","group_1"],[1,"column-layout","group_2"],[1,"column-layout","group_3"],[1,"text"],["type","border",1,"input"],["type","text","igxInput","",3,"ngModelChange","ngModel"],["igxLabel",""],[1,"column-layout","group_4"],[1,"row-layout","group_3"],["igxButton","raised","igxRipple","",1,"button",3,"click"],["title","Notificacion","message"," El IMEI que introdujo no existe, verifica que lo haya colocado correctamente ! ","leftButtonLabel","OK",3,"leftButtonSelect"]],template:function(i,e){if(i&1){let n=w();x(0,"div",1),o(1,"div",2),x(2,"div",3),o(3,"div",4)(4,"div",5)(5,"p",6),s(6," Ingrese el Codigo de 6 CIFRAS presente en el empaque de su estacion "),r()(),o(7,"div",5)(8,"igx-input-group",7)(9,"input",8),I("ngModelChange",function(g){return c(n),k(e.ImeiOwner,g)||(e.ImeiOwner=g),p(g)}),r(),o(10,"label",9),s(11,"Codigo"),r()()(),o(12,"div",10),x(13,"div",11),o(14,"button",12),m("click",function(){return c(n),p(e.asociar())}),s(15," ASOCIAR "),r()()(),x(16,"div",3),r(),x(17,"div",1),o(18,"igx-dialog",13,0),m("leftButtonSelect",function(){c(n);let g=B(19);return p(g.close())}),r()}i&2&&(l(9),P("ngModel",e.ImeiOwner))},dependencies:[C,O,E,se,ee,N,T,L,$],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch;align-content:flex-start}.column-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column}.group[_ngcontent-%COMP%]{justify-content:flex-start;align-items:stretch;align-content:flex-start;position:relative;padding:16px;min-width:50px;min-height:50px;flex-grow:1;flex-basis:0}.row-layout[_ngcontent-%COMP%]{display:flex}.group_1[_ngcontent-%COMP%]{justify-content:flex-start;align-items:stretch;align-content:flex-start;position:relative;width:800px;min-width:50px;min-height:50px;max-width:800px}.group_2[_ngcontent-%COMP%]{justify-content:flex-start;align-items:stretch;align-content:flex-start;position:relative;width:400px;min-width:50px;min-height:50px;max-width:400px}.group_3[_ngcontent-%COMP%]{justify-content:flex-start;align-items:stretch;align-content:flex-start;position:relative;min-width:50px;min-height:50px}.group_4[_ngcontent-%COMP%]{justify-content:flex-start;align-items:stretch;align-content:flex-start;position:relative;height:156px;min-width:50px;min-height:50px;max-height:156px}.text[_ngcontent-%COMP%], .input[_ngcontent-%COMP%]{height:max-content;min-width:min-content}.button[_ngcontent-%COMP%]{--igx-button-background: hsla(var(--ig-primary-800));height:max-content}"]})};var Pe=["alert"];function ke(a,t){if(a&1&&(o(0,"igx-hint"),s(1),r()),a&2){let i=_();l(),U(i.mensajeError)}}function Ie(a,t){if(a&1){let i=w();o(0,"igx-icon",14),m("click",function(){c(i);let n=_();return p(n.showPassword=!n.showPassword)}),s(1),r()}if(a&2){let i=_();l(),M(" ",i.togglePasswordVisibility," ")}}var ue=class a{constructor(t,i,e){this.supabaseService=i;this._router=e;this.registrationForm=t.group({user:["",{nonNullable:!0,validators:[y.required]}],password:["",{nonNullable:!0,validators:[y.required]}]},{validators:[this.passwordValidator()]}),this.supabaseService.weatherstation_ownersObjectObservable.subscribe(n=>h(this,null,function*(){this.WeatherStatioOwner=n}))}alert;registrationForm;showPassword=!1;tokenIsValid=!1;WeatherStatioOwner=[];invalidUser="";mensajeError="";Answer="Carola";Email="";Password="";userLogued;session;get user(){return this.registrationForm.get("user")}get password(){return this.registrationForm.get("password")}get togglePasswordVisibility(){return this.showPassword?"visibility_off":"visibility"}onSubmit(){this.login()}passwordValidator(){return t=>{let i=t.get("user"),e=t.get("password"),n={};return!i||!e?(n.mismatch=!0,n):(i.value+e.value===this.invalidUser&&this.invalidUser!==""&&(e.setErrors(ve(xe({},e.errors),{mismatch:!0})),n.mismatch=!0),!n.mismatch&&e.errors?.mismatch&&e.setValue(e.value),n)}}login(){return h(this,null,function*(){try{let t=yield this.supabaseService.signInWithPass(this.Email,this.Password);t.error?(console.error("Error during sign-in:",t.error.message),t.error.message=="Email not confirmed"&&this.navigateToCheckYourMail(),this.alert?.open(),this.Answer=t.error.message):(this.userLogued=t.data.user,this.session=t.data.session,(this.session||this.session)&&(console.log("Sign-in successful:",this.userLogued,this.session),this.Answer="Sign-in successful",this.tokenIsValid=this.userLogued!=null&&this.session!=null,yield this.checkIfHaveWeatherStation(),this.WeatherStatioOwner.length>0?(this.navigateToSecond(),this.supabaseService.respuesta=!0):this.navigateToWeatherStationActivationCode()))}catch(t){this.alert?.open(),console.error("Error during sign-in:",t)}})}loginWithMagicLink(){return h(this,null,function*(){try{let t=yield this.supabaseService.signIn(this.Email,te.signInURL);t.error?(console.error("Error during sign-in:",t.error.message),this.Answer="Please enter an authenticated email"):(console.log("Sign-in successful:",t.data),this.Answer="Link sent successfully, please check your email")}catch(t){console.error("Error during sign-in:",t)}this.navigateToSecond()})}navigateToCheckYourMail(){this._router.navigate(["checkyourmail"],{queryParams:{email:this.Email}})}navigateToSecond(){this.tokenIsValid&&this._router.navigateByUrl("master-view")}navigateToRegister(){this._router.navigateByUrl("register")}navigateToForgotPassword(){this._router.navigateByUrl("forgotPassword")}checkIfHaveWeatherStation(){return h(this,null,function*(){this.tokenIsValid&&(yield this.supabaseService.GetOwnerWeathersStations(this.userLogued.id))})}navigateToWeatherStationActivationCode(){this._router.navigateByUrl("/activation-code")}static \u0275fac=function(i){return new(i||a)(f(A),f(S),f(b))};static \u0275cmp=v({type:a,selectors:[["app-login2"]],viewQuery:function(i,e){if(i&1&&G(Pe,7),i&2){let n;q(n=H())&&(e.alert=n.first)}},decls:24,vars:7,consts:[["alert",""],["name","viewport","content","width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0"],[3,"ngSubmit","formGroup"],["igxLabel","","for","user"],["igxInput","","name","user","type","text","formControlName","user",3,"ngModelChange","ngModel"],["igxLabel","","for","password"],["igxInput","","name","password","formControlName","password",3,"ngModelChange","ngModel","type"],[4,"ngIf"],["igxSuffix","",3,"click",4,"ngIf"],["igxButton","contained","igxRipple","","type","submit",1,"button",3,"disabled"],[1,"links"],["igxLabel","",1,"register-link",3,"click"],["igxLabel","",1,"forgot-password-link",3,"click"],["title","Notificacion","message"," Las credenciales que introdujo no son las correctas ! ","leftButtonLabel","OK",3,"leftButtonSelect"],["igxSuffix","",3,"click"]],template:function(i,e){if(i&1){let n=w();o(0,"head"),x(1,"meta",1),r(),o(2,"body")(3,"article")(4,"form",2),m("ngSubmit",function(){return c(n),p(e.onSubmit())}),o(5,"igx-input-group")(6,"label",3),s(7,"Usuario"),r(),o(8,"input",4),I("ngModelChange",function(g){return c(n),k(e.Email,g)||(e.Email=g),p(g)}),r()(),o(9,"igx-input-group")(10,"label",5),s(11,"Contrase\xF1a"),r(),o(12,"input",6),I("ngModelChange",function(g){return c(n),k(e.Password,g)||(e.Password=g),p(g)}),r(),R(13,ke,2,1,"igx-hint",7)(14,Ie,2,1,"igx-icon",8),r(),o(15,"button",9),s(16,"Loguearse"),r(),o(17,"div",10)(18,"label",11),m("click",function(){return c(n),p(e.navigateToRegister())}),s(19,"Registrarme"),r(),o(20,"label",12),m("click",function(){return c(n),p(e.navigateToForgotPassword())}),s(21,"Olvid\xE9 mi contrase\xF1a"),r()()()()(),o(22,"igx-dialog",13,0),m("leftButtonSelect",function(){c(n);let g=B(23);return p(g.close())}),r()}i&2&&(l(4),d("formGroup",e.registrationForm),l(4),P("ngModel",e.Email),l(4),P("ngModel",e.Password),d("type",e.showPassword?"text":"password"),l(),d("ngIf",e.password==null||e.password.errors==null?null:e.password.errors.mismatch),l(),d("ngIf",e.password==null?null:e.password.value),l(),d("disabled",!e.registrationForm.valid))},dependencies:[C,V,O,E,F,Y,Q,X,N,L,T,z,D,le,K,J,Z,$],styles:['@charset "UTF-8";body[_ngcontent-%COMP%]{background-image:url("./media/login_background-XHAT7BE5.png");background-repeat:no-repeat;background-size:1366px 768px}form[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0003,0 1px 1px #00000024,0 2px 1px -1px #0000001f;padding:24px;margin-bottom:48px}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:18px}article[_ngcontent-%COMP%]{width:550px;padding:16px;position:absolute;left:450px;top:150px;background-color:#add8e6}.button[_ngcontent-%COMP%]{background-color:hsla(var(--ig-primary-400))}.links[_ngcontent-%COMP%]{margin-top:20px}.register-link[_ngcontent-%COMP%]{color:hsla(var(--ig-primary-400));cursor:pointer;text-decoration:none;margin-right:20px}.register-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.forgot-password-link[_ngcontent-%COMP%]{color:red;cursor:pointer;text-decoration:none}.forgot-password-link[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 768px){body[_ngcontent-%COMP%]{background-image:url("./media/login_background-XHAT7BE5.png");background-repeat:repeat;background-size:500px 800px}article[_ngcontent-%COMP%]{width:90%;height:40%;padding:8px;position:absolute;left:5%;top:5%;background-color:#add8e6;margin:25vh 0px 0px}form[_ngcontent-%COMP%]{padding:8px;margin-bottom:16px;height:90%}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:8px}.button[_ngcontent-%COMP%]{background-color:hsla(var(--ig-primary-400));position:absolute;top:22vh}.links[_ngcontent-%COMP%]{margin-top:12px;position:absolute;top:30vh}.register-link[_ngcontent-%COMP%]{color:hsla(var(--ig-primary-400));cursor:pointer;text-decoration:none;margin-right:12px}.register-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.forgot-password-link[_ngcontent-%COMP%]{color:red;cursor:pointer;text-decoration:none}.forgot-password-link[_ngcontent-%COMP%]:hover{text-decoration:underline}}@media (min-width: 1700px) and (min-height: 800px){body[_ngcontent-%COMP%]{background-image:url("./media/login_background-XHAT7BE5.png");background-repeat:repeat;background-size:1920px 1080px}article[_ngcontent-%COMP%]{width:550px;padding:16px;position:absolute;left:700px;top:250px;background-color:#add8e6}form[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0003,0 1px 1px #00000024,0 2px 1px -1px #0000001f;padding:24px;margin-bottom:48px}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:32px}.button[_ngcontent-%COMP%]{background-color:hsla(var(--ig-primary-400))}.links[_ngcontent-%COMP%]{margin-top:20px}.register-link[_ngcontent-%COMP%]{color:hsla(var(--ig-primary-400));cursor:pointer;text-decoration:none;margin-right:20px}.register-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.forgot-password-link[_ngcontent-%COMP%]{color:red;cursor:pointer;text-decoration:none}.forgot-password-link[_ngcontent-%COMP%]:hover{text-decoration:underline}}']})};var Oe=["alert"];function Ee(a,t){if(a&1&&(o(0,"igx-hint"),s(1),r()),a&2){let i=_();l(),U(i.mensajeError)}}function Fe(a,t){if(a&1){let i=w();o(0,"igx-icon",11),m("click",function(){c(i);let n=_();return p(n.showPassword=!n.showPassword)}),s(1),r()}if(a&2){let i=_();l(),M(" ",i.togglePasswordVisibility," ")}}var de=class a{constructor(t,i,e){this.supabaseService=i;this._router=e;this.registrationForm=t.group({user:["",{nonNullable:!0,validators:[]}],password:["",{nonNullable:!0,validators:[y.required]}]},{validators:[this.passwordValidator()]}),this.supabaseService.weatherstation_ownersObjectObservable.subscribe(n=>h(this,null,function*(){this.WeatherStatioOwner=n}))}alert;registrationForm;showPassword=!1;tokenIsValid=!1;WeatherStatioOwner=[];invalidUser="";mensajeError="";Answer="Carola";Email="";Password="";userLogued;session;get user(){return this.registrationForm.get("user")}get password(){return this.registrationForm.get("password")}get togglePasswordVisibility(){return this.showPassword?"visibility_off":"visibility"}onSubmit(){this.login()}passwordValidator(){return t=>{let i=t.get("user"),e=t.get("password"),n={};return!n.mismatch&&e?.errors?.mismatch&&e?.setValue(e.value),n}}login(){return h(this,null,function*(){try{let t=yield this.supabaseService.signInWithPass(this.Email,this.Password);t.error?(console.error("Error during sign-in:",t.error.message),t.error.message=="Email not confirmed"&&this.navigateToCheckYourMail(),this.alert?.open(),this.Answer=t.error.message):(this.userLogued=t.data.user,this.session=t.data.session,(this.session||this.session)&&(console.log("Sign-in successful:",this.userLogued,this.session),this.Answer="Sign-in successful",this.tokenIsValid=this.userLogued!=null&&this.session!=null,yield this.checkIfHaveWeatherStation(),this.WeatherStatioOwner.length>0?this.navigateToSecond():this.navigateToWeatherStationActivationCode()))}catch(t){this.alert?.open(),console.error("Error during sign-in:",t)}})}loginWithMagicLink(){return h(this,null,function*(){try{let t=yield this.supabaseService.signIn(this.Email,te.signInURL);t.error?(console.error("Error during sign-in:",t.error.message),this.Answer="Please enter an authenticated email"):(console.log("Sign-in successful:",t.data),this.Answer="Link sent successfully, please check your email")}catch(t){console.error("Error during sign-in:",t)}this.navigateToSecond()})}navigateToCheckYourMail(){this._router.navigate(["checkyourmail"],{queryParams:{email:this.Email}})}navigateToSecond(){this.tokenIsValid&&this._router.navigateByUrl("master-view")}navigateToRegister(){this._router.navigateByUrl("register")}navigateToForgotPassword(){this._router.navigateByUrl("forgotPassword")}checkIfHaveWeatherStation(){return h(this,null,function*(){this.tokenIsValid&&(yield this.supabaseService.GetOwnerWeathersStations(this.userLogued.id))})}navigateToWeatherStationActivationCode(){this._router.navigateByUrl("/activation-code")}navigateToLogin(){this._router.navigateByUrl("login")}static \u0275fac=function(i){return new(i||a)(f(A),f(S),f(b))};static \u0275cmp=v({type:a,selectors:[["app-forgotPassword"]],viewQuery:function(i,e){if(i&1&&G(Oe,7),i&2){let n;q(n=H())&&(e.alert=n.first)}},decls:18,vars:6,consts:[["alert",""],[3,"ngSubmit","formGroup"],["igxLabel","","for","password"],["igxInput","","name","password","formControlName","password",3,"ngModelChange","ngModel","type"],[4,"ngIf"],["igxSuffix","",3,"click",4,"ngIf"],["igxButton","contained","igxRipple","","type","submit",1,"button",3,"disabled"],[1,"links"],["igxLabel","",1,"register-link",3,"click"],["igxLabel","",1,"forgot-password-link",3,"click"],["title","Notificacion","message"," Las credenciales que introdujo no son las correctas ! ","leftButtonLabel","OK",3,"leftButtonSelect"],["igxSuffix","",3,"click"]],template:function(i,e){if(i&1){let n=w();o(0,"body")(1,"article")(2,"form",1),m("ngSubmit",function(){return c(n),p(e.onSubmit())}),o(3,"igx-input-group")(4,"label",2),s(5," Ingrese su Correo Electronico"),r(),o(6,"input",3),I("ngModelChange",function(g){return c(n),k(e.Password,g)||(e.Password=g),p(g)}),r(),R(7,Ee,2,1,"igx-hint",4)(8,Fe,2,1,"igx-icon",5),r(),o(9,"button",6),s(10,"Enviar Correo Recuperacion"),r(),o(11,"div",7)(12,"label",8),m("click",function(){return c(n),p(e.navigateToRegister())}),s(13,"Registrarme"),r(),o(14,"label",9),m("click",function(){return c(n),p(e.navigateToLogin())}),s(15,"Volver al Login"),r()()()()(),o(16,"igx-dialog",10,0),m("leftButtonSelect",function(){c(n);let g=B(17);return p(g.close())}),r()}i&2&&(l(2),d("formGroup",e.registrationForm),l(4),P("ngModel",e.Password),d("type",e.showPassword?"text":"password"),l(),d("ngIf",e.password==null||e.password.errors==null?null:e.password.errors.mismatch),l(),d("ngIf",e.password==null?null:e.password.value),l(),d("disabled",!e.registrationForm.valid))},dependencies:[C,V,O,E,F,_e,z,Y,Q,X,ee,N,T,L,K,D,be,$],styles:['@charset "UTF-8";body[_ngcontent-%COMP%]{background-image:url("./media/login_background-XHAT7BE5.png");background-repeat:repeat;background-size:1366px 768px}form[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0003,0 1px 1px #00000024,0 2px 1px -1px #0000001f;padding:24px;margin-bottom:48px}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:18px}article[_ngcontent-%COMP%]{width:550px;padding:16px;position:absolute;left:450px;top:150px;background-color:#add8e6}.button[_ngcontent-%COMP%]{background-color:hsla(var(--ig-primary-400))}.links[_ngcontent-%COMP%]{margin-top:20px}.register-link[_ngcontent-%COMP%]{color:hsla(var(--ig-primary-400));cursor:pointer;text-decoration:none;margin-right:20px}.register-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.forgot-password-link[_ngcontent-%COMP%]{color:red;cursor:pointer;text-decoration:none}.forgot-password-link[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (min-width: 1700px) and (min-height: 800px){body[_ngcontent-%COMP%]{background-image:url("./media/login_background-XHAT7BE5.png");background-repeat:repeat;background-size:1920px 1080px}article[_ngcontent-%COMP%]{width:550px;padding:16px;position:absolute;left:700px;top:250px;background-color:#add8e6}form[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0003,0 1px 1px #00000024,0 2px 1px -1px #0000001f;padding:24px;margin-bottom:48px}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:32px}.button[_ngcontent-%COMP%]{background-color:hsla(var(--ig-primary-400))}.links[_ngcontent-%COMP%]{margin-top:20px}.register-link[_ngcontent-%COMP%]{color:hsla(var(--ig-primary-400));cursor:pointer;text-decoration:none;margin-right:20px}.register-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.forgot-password-link[_ngcontent-%COMP%]{color:red;cursor:pointer;text-decoration:none}.forgot-password-link[_ngcontent-%COMP%]:hover{text-decoration:underline}}@media (max-width: 768px){body[_ngcontent-%COMP%]{background-image:url("./media/login_background-XHAT7BE5.png");background-repeat:repeat;background-size:500px 800px}article[_ngcontent-%COMP%]{width:90%;height:40%;padding:8px;position:absolute;left:5%;top:5%;background-color:#add8e6;margin:25vh 0px 0px}form[_ngcontent-%COMP%]{padding:8px;margin-bottom:16px;height:90%}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:8px}.button[_ngcontent-%COMP%]{background-color:hsla(var(--ig-primary-400));position:absolute;top:22vh}.links[_ngcontent-%COMP%]{margin-top:12px;position:absolute;top:30vh}.register-link[_ngcontent-%COMP%]{color:hsla(var(--ig-primary-400));cursor:pointer;text-decoration:none;margin-right:12px}.register-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.forgot-password-link[_ngcontent-%COMP%]{color:red;cursor:pointer;text-decoration:none}.forgot-password-link[_ngcontent-%COMP%]:hover{text-decoration:underline}}']})};function Ve(a,t){if(a&1&&(o(0,"igx-hint"),s(1),r()),a&2){let i=_();l(),U(i.mensajeError)}}function Te(a,t){if(a&1){let i=w();o(0,"igx-icon",14),m("click",function(){c(i);let n=_();return p(n.showPassword=!n.showPassword)}),s(1),r()}if(a&2){let i=_();l(),M(" ",i.togglePasswordVisibility," ")}}function Le(a,t){if(a&1&&(o(0,"igx-hint"),s(1),r()),a&2){let i=_();l(),U(i.Answer)}}var he=class a{constructor(t,i,e){this.fb=t;this.supabaseService=i;this._router=e;this.registrationForm=this.fb.group({username:new ie("",{nonNullable:!0,validators:[y.required]}),password:new ie("",{nonNullable:!0,validators:[y.required]}),fullName:new ie("",{nonNullable:!0,validators:[y.required]}),email:new ie("",{nonNullable:!0,validators:[y.required,y.email]})})}registrationForm;showPassword=!1;tokenIsValid=!1;Answer="Carola";mensajeError="";Image=null;ImageUrl="";get username(){return this.registrationForm.get("username")}get password(){return this.registrationForm.get("password")}get fullName(){return this.registrationForm.get("fullName")}get email(){return this.registrationForm.get("email")}get togglePasswordVisibility(){return this.showPassword?"visibility_off":"visibility"}onSubmit(){this.signup()}login(){return h(this,null,function*(){try{let t=this.email?this.email.value:"",i=this.password?this.password.value:"",e=yield this.supabaseService.signInWithPass(t,i);if(e.error)console.error("Error during sign-in:",e.error.message),this.mensajeError=e.error.message;else{let n=e.data.user,u=e.data.session;u&&(console.log("Sign-in successful:",n,u),this.mensajeError="Sign-in successful",this.tokenIsValid=n!=null&&u!=null)}}catch(t){console.error("Error during sign-in:",t)}this.navigateToSecond()})}loginWithMagicLink(){return h(this,null,function*(){try{let t=this.email?this.email.value:"",i=yield this.supabaseService.signIn(t,te.signInURL);i.error?(console.error("Error during sign-in:",i.error.message),this.mensajeError="Please enter an authenticated email"):(console.log("Sign-in successful:",i.data),this.mensajeError="Link sent successfully, please check your email")}catch(t){console.error("Error during sign-in:",t)}this.navigateToSecond()})}navigateToSecond(){this.tokenIsValid&&this._router.navigateByUrl("master-view")}navigateToLogin(){this._router.navigateByUrl("login")}navigateToForgotPassword(){this._router.navigateByUrl("register")}register(){}onImageSelected(t){let e=t.target.files;e&&e.length>0&&(this.Image=e[0])}signup(){return h(this,null,function*(){try{let t=this.registrationForm.value.email?this.registrationForm.value.email:"",i=this.registrationForm.value.password?this.registrationForm.value.password:"",e=yield this.supabaseService.signUp(t,i);if(e.error)this.Answer="Error: "+e.error.message,console.error(this.Answer);else if(e.data.user){let n=e.data.user;console.log("CORRECT SIGNUP THE USER IS : ",n),this.navigateToActivationCode()}}catch(t){console.error("Error during signup:",t),this.Answer="An error occurred during registration."}})}validate(){let t=this.registrationForm.value.username?this.registrationForm.value.username.length:0,i=this.registrationForm.value.password?this.registrationForm.value.password.length:0,e=this.registrationForm.value.fullName?this.registrationForm.value.fullName.length:0,n=this.registrationForm.value.email?this.registrationForm.value.email.length:0,u=t>0,g=i>0,Se=e>0,ye=n>0;return u&&g&&Se&&ye&&this.Image!=null}navigateToActivationCode(){this._router.navigateByUrl("/checkyourmail")}static \u0275fac=function(i){return new(i||a)(f(A),f(S),f(b))};static \u0275cmp=v({type:a,selectors:[["app-signup2"]],decls:27,vars:6,consts:[[3,"ngSubmit","formGroup"],["igxLabel","","for","username"],["igxInput","","name","username","type","text","formControlName","username"],["igxLabel","","for","fullName"],["igxInput","","name","fullName","type","text","formControlName","fullName"],["igxLabel","","for","email"],["igxInput","","name","email","type","email","formControlName","email"],["igxLabel","","for","password"],["igxInput","","name","password","formControlName","password",3,"type"],[4,"ngIf"],["igxSuffix","",3,"click",4,"ngIf"],["igxButton","contained","igxRipple","","type","submit",1,"button",3,"disabled"],[1,"links"],["igxLabel","",1,"register-link",3,"click"],["igxSuffix","",3,"click"]],template:function(i,e){i&1&&(o(0,"body")(1,"article")(2,"form",0),m("ngSubmit",function(){return e.onSubmit()}),o(3,"igx-input-group")(4,"label",1),s(5,"Username"),r(),x(6,"input",2),r(),o(7,"igx-input-group")(8,"label",3),s(9,"Full Name"),r(),x(10,"input",4),r(),o(11,"igx-input-group")(12,"label",5),s(13,"Email"),r(),x(14,"input",6),r(),o(15,"igx-input-group")(16,"label",7),s(17,"Password"),r(),x(18,"input",8),R(19,Ve,2,1,"igx-hint",9)(20,Te,2,1,"igx-icon",10),r(),o(21,"button",11),s(22,"Registrarme"),r(),R(23,Le,2,1,"igx-hint",9),o(24,"div",12)(25,"label",13),m("click",function(){return e.navigateToLogin()}),s(26,"Volver al Login"),r()()()()()),i&2&&(l(2),d("formGroup",e.registrationForm),l(16),d("type",e.showPassword?"text":"password"),l(),d("ngIf",e.password==null||e.password.errors==null?null:e.password.errors.mismatch),l(),d("ngIf",e.password==null?null:e.password.value),l(),d("disabled",!e.registrationForm.valid),l(2),d("ngIf",e.Answer!="Carola"))},dependencies:[C,V,O,E,F,Y,Q,X,N,L,T,z,D,le,K,J,Z],styles:['@charset "UTF-8";body[_ngcontent-%COMP%]{background-image:url("./media/login_background-XHAT7BE5.png");background-repeat:repeat;background-size:1366px 768px}form[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0003,0 1px 1px #00000024,0 2px 1px -1px #0000001f;padding:24px;margin-bottom:8px}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:14px}article[_ngcontent-%COMP%]{width:550px;padding:16px;position:absolute;left:450px;top:10px;background-color:#add8e6}.button[_ngcontent-%COMP%]{background-color:hsla(var(--ig-primary-400))}.links[_ngcontent-%COMP%]{margin-top:20px}.register-link[_ngcontent-%COMP%]{color:hsla(var(--ig-primary-400));cursor:pointer;text-decoration:none;margin-right:20px}.register-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.forgot-password-link[_ngcontent-%COMP%]{color:red;cursor:pointer;text-decoration:none}.forgot-password-link[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 768px){body[_ngcontent-%COMP%]{background-image:url("./media/login_background-XHAT7BE5.png");background-repeat:repeat;background-size:500px 800px}article[_ngcontent-%COMP%]{width:90%;height:60%;padding:8px;position:absolute;left:5%;top:5%;background-color:#add8e6;margin:15vh 0px 0px}form[_ngcontent-%COMP%]{padding:8px;margin-bottom:16px;height:95%}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:8px}.button[_ngcontent-%COMP%]{background-color:hsla(var(--ig-primary-400));position:absolute;top:42vh}.links[_ngcontent-%COMP%]{margin-top:12px;position:absolute;top:50vh}.register-link[_ngcontent-%COMP%]{color:hsla(var(--ig-primary-400));cursor:pointer;text-decoration:none;margin-right:12px}.register-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.forgot-password-link[_ngcontent-%COMP%]{color:red;cursor:pointer;text-decoration:none}.forgot-password-link[_ngcontent-%COMP%]:hover{text-decoration:underline}}@media (min-width: 1700px) and (min-height: 800px){body[_ngcontent-%COMP%]{background-image:url("./media/login_background-XHAT7BE5.png");background-repeat:repeat;background-size:1920px 1080px}article[_ngcontent-%COMP%]{width:550px;padding:16px;position:absolute;left:700px;top:200px;background-color:#add8e6}form[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0003,0 1px 1px #00000024,0 2px 1px -1px #0000001f;padding:24px;margin-bottom:18px}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:18px}.button[_ngcontent-%COMP%]{background-color:hsla(var(--ig-primary-400))}.links[_ngcontent-%COMP%]{margin-top:20px}.register-link[_ngcontent-%COMP%]{color:hsla(var(--ig-primary-400));cursor:pointer;text-decoration:none;margin-right:20px}.register-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.forgot-password-link[_ngcontent-%COMP%]{color:red;cursor:pointer;text-decoration:none}.forgot-password-link[_ngcontent-%COMP%]:hover{text-decoration:underline}}']})};var fe=class a{constructor(t,i,e){this.fb=t;this.supabaseService=i;this._router=e}email="";showPassword=!1;tokenIsValid=!1;Answer="Carola";mensajeError="";Image=null;ImageUrl="";get togglePasswordVisibility(){return this.showPassword?"visibility_off":"visibility"}onSubmit(){this.signup()}signup(){return h(this,null,function*(){try{let t=yield this.supabaseService.signIn(this.email,"/login");if(t.error)console.error("Error during sign-in:",t.error.message),this.mensajeError=t.error.message;else{let i=t.data.user,e=t.data.session;e&&(console.log("Sign-in successful:",i,e),this.mensajeError="Sign-in successful",this.tokenIsValid=i!=null&&e!=null)}}catch(t){console.error("Error during sign-in:",t)}this.navigateToMainView()})}navigateToMainView(){this._router.navigateByUrl("master-view")}navigateToLogin(){this._router.navigateByUrl("login")}navigateToForgotPassword(){this._router.navigateByUrl("register")}register(){}onImageSelected(t){let e=t.target.files;e&&e.length>0&&(this.Image=e[0])}static \u0275fac=function(i){return new(i||a)(f(A),f(S),f(b))};static \u0275cmp=v({type:a,selectors:[["app-checkyourmail"]],inputs:{email:"email"},decls:10,vars:1,consts:[[3,"ngSubmit"],["igxButton","contained","igxRipple","","type","submit",1,"button"],[1,"links"],["igxLabel","",1,"register-link",3,"click"]],template:function(i,e){i&1&&(o(0,"body")(1,"article")(2,"form",0),m("ngSubmit",function(){return e.onSubmit()}),o(3,"igx-hint"),s(4),r(),o(5,"button",1),s(6,"Volver a Enviar Correo de Confirmacion"),r(),o(7,"div",2)(8,"label",3),m("click",function(){return e.navigateToLogin()}),s(9,"Volver al Login"),r()()()()()),i&2&&(l(4),M(" ** Por favor verifica tu casilla de correo ",e.email," y verifica tu usuario , fijate bien ! el correo puede estar en la carpeta correo no deseado. ** "))},dependencies:[C,V,F,ae,D,J,Z,L],styles:['body[_ngcontent-%COMP%]{background-image:url("./media/login_background-XHAT7BE5.png");background-repeat:repeat;background-size:1366px 768px}form[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0003,0 1px 1px #00000024,0 2px 1px -1px #0000001f;padding:24px;margin-bottom:8px}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:14px}article[_ngcontent-%COMP%]{width:550px;padding:16px;position:absolute;left:450px;top:10px;background-color:#add8e6}.button[_ngcontent-%COMP%]{background-color:hsla(var(--ig-primary-400))}.links[_ngcontent-%COMP%]{margin-top:20px}.register-link[_ngcontent-%COMP%]{color:hsla(var(--ig-primary-400));cursor:pointer;text-decoration:none;margin-right:20px}.register-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.forgot-password-link[_ngcontent-%COMP%]{color:red;cursor:pointer;text-decoration:none}.forgot-password-link[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (min-width: 1700px) and (min-height: 800px){body[_ngcontent-%COMP%]{background-image:url("./media/login_background-XHAT7BE5.png");background-repeat:repeat;background-size:1920px 1080px}article[_ngcontent-%COMP%]{width:550px;padding:16px;position:absolute;left:700px;top:300px;background-color:#add8e6}form[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0003,0 1px 1px #00000024,0 2px 1px -1px #0000001f;padding:24px;margin-bottom:18px}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:18px}.button[_ngcontent-%COMP%]{background-color:hsla(var(--ig-primary-400))}.links[_ngcontent-%COMP%]{margin-top:20px}.register-link[_ngcontent-%COMP%]{color:hsla(var(--ig-primary-400));cursor:pointer;text-decoration:none;margin-right:20px}.register-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.forgot-password-link[_ngcontent-%COMP%]{color:red;cursor:pointer;text-decoration:none}.forgot-password-link[_ngcontent-%COMP%]:hover{text-decoration:underline}}']})};var Xt=[{path:"error",component:ce},{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:ue,data:{text:"Login"}},{path:"activation-code",component:me,data:{text:"CodigoActivacion"}},{path:"checkyourmail",component:fe,data:{text:"CheckYourMail"}},{path:"register",redirectTo:"register",pathMatch:"full"},{path:"register",component:he,data:{text:"register"}},{path:"forgotPassword",redirectTo:"forgotPassword",pathMatch:"full"},{path:"forgotPassword",component:de,data:{text:"newPassword"}},{path:"signupMagicLinkComponent",redirectTo:"signupMagicLinkComponent",pathMatch:"full"},{path:"signupMagicLinkComponent",component:pe,data:{text:"signupMagicLinkComponent"}},{path:"master-view",children:[{path:"",loadChildren:()=>import("./chunk-DKATGPWU.js").then(a=>a.routes)}]},{path:"**",component:ge}];export{Xt as V1_ROUTES};
