import{$ as Ro,$a as Fo,A as Eo,Ab as Yo,Bb as ke,Bd as pn,Cb as L,Cd as aa,Da as Me,Dc as ce,Dd as gn,Ea as ko,Eb as Y,Fa as on,G as me,Gb as Qo,Ia as an,Ib as ln,J as ct,Ja as K,Jb as cn,K as De,Ka as le,Kb as Fi,La as Pi,Lb as un,Ma as Po,Mb as dn,N as Oi,Na as Ht,Nb as Yt,O as ut,Oc as hn,P as xo,Pa as jo,Qa as ji,Qb as Li,Ra as No,S as dt,Sa as He,Sc as Qt,T as Oe,U as Ii,Ua as Ni,Uc as Zo,V as To,Vc as Ke,X as Ao,Xa as Uo,Xc as gt,Ya as Wt,Za as ht,Zc as ye,_a as ft,a as _o,aa as J,ab as Lo,ac as Xo,ad as ea,ba as Do,bb as Vo,bd as Ye,c as wo,cb as $o,cd as ta,d as xi,da as B,db as Bo,dd as ra,e as Ti,eb as zo,ed as q,f as Ai,fb as Go,fd as na,g as oe,ga as M,gb as We,gd as Xt,h as ee,ha as ae,hc as Je,hd as ia,ia as E,id as sa,ja as Ie,jb as qo,jd as Zt,ka as Oo,kb as Jt,l as Re,la as O,ma as Mi,mb as x,na as S,nb as Ho,nd as fn,o as $,oa as _,p as w,q as Gt,qa as ki,qb as Wo,r as bo,ra as Io,rb as Kt,s as Co,sa as qt,sb as Jo,u as D,ua as Mo,ub as pt,v as sn,va as qe,w as W,wa as te,x as Ri,y as So,yb as Ko,z as Di,za as ve,zb as Ui,zd as oa}from"./chunk-Q7VRVJCK.js";import{b as la,c as ca,f as tu,g as ua}from"./chunk-X5YLR3NI.js";import{a as m,b as k,e as ge,g as Zc,h as eu,i as h}from"./chunk-ODN5LVDJ.js";var Xs=ge(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});var Ys=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Qs.default=Ys});var eo=ge(Vr=>{"use strict";var ic=Vr&&Vr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Vr,"__esModule",{value:!0});var jf=ic((ua(),eu(tu))),Nf=ic(Xs()),Zs=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=jf.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=Object.assign({},this.headers),this.headers[t]=e,this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(s=>h(this,null,function*(){var o,a,l;let c=null,u=null,d=null,p=s.status,f=s.statusText;if(s.ok){if(this.method!=="HEAD"){let R=yield s.text();R===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=R:u=JSON.parse(R))}let v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),g=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");v&&g&&g.length>1&&(d=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,p=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{let v=yield s.text();try{c=JSON.parse(v),Array.isArray(c)&&s.status===404&&(u=[],c=null,p=200,f="OK")}catch{s.status===404&&v===""?(p=204,f="No Content"):c={message:v}}if(c&&this.isMaybeSingle&&(!((l=c?.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,p=200,f="OK"),c&&this.shouldThrowOnError)throw new Nf.default(c)}return{error:c,data:u,count:d,status:p,statusText:f}}));return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s?.name)!==null&&o!==void 0?o:"FetchError"}: ${s?.message}`,details:`${(a=s?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s?.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}};Vr.default=Zs});var ro=ge($r=>{"use strict";var Uf=$r&&$r.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty($r,"__esModule",{value:!0});var Ff=Uf(eo()),to=class extends Ff.default{select(t){let e=!1,r=(t??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){let o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){let i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:i=r}={}){let s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;let l=[t?"analyze":null,e?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};$r.default=to});var ni=ge(Br=>{"use strict";var Lf=Br&&Br.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Br,"__esModule",{value:!0});var Vf=Lf(ro()),no=class extends Vf.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){let r=Array.from(new Set(e)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");let o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){let i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}};Br.default=no});var so=ge(Gr=>{"use strict";var $f=Gr&&Gr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Gr,"__esModule",{value:!0});var zr=$f(ni()),io=class{constructor(t,{headers:e={},schema:r,fetch:i}){this.url=t,this.headers=e,this.schema=r,this.fetch=i}select(t,{head:e=!1,count:r}={}){let i=e?"HEAD":"GET",s=!1,o=(t??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new zr.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e,defaultToNull:r=!0}={}){let i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),e&&s.push(`count=${e}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){let o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){let a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new zr.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){let o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){let l=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){let c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new zr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){let r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),e&&i.push(`count=${e}`),this.headers.Prefer=i.join(","),new zr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){let e="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new zr.default({method:e,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Gr.default=io});var sc=ge(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.version=void 0;ii.version="0.0.0-automated"});var oc=ge(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});si.DEFAULT_HEADERS=void 0;var Bf=sc();si.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Bf.version}`}});var lc=ge(qr=>{"use strict";var ac=qr&&qr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(qr,"__esModule",{value:!0});var zf=ac(so()),Gf=ac(ni()),qf=oc(),oo=class n{constructor(t,{headers:e={},schema:r,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},qf.DEFAULT_HEADERS),e),this.schemaName=r,this.fetch=i}from(t){let e=new URL(`${this.url}/${t}`);return new zf.default(e,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new n(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:r=!1,get:i=!1,count:s}={}){let o,a=new URL(`${this.url}/rpc/${t}`),l;r||i?(o=r?"HEAD":"GET",Object.entries(e).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",l=e);let c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new Gf.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};qr.default=oo});var gc=ge(z=>{"use strict";var Mt=z&&z.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(z,"__esModule",{value:!0});z.PostgrestError=z.PostgrestBuilder=z.PostgrestTransformBuilder=z.PostgrestFilterBuilder=z.PostgrestQueryBuilder=z.PostgrestClient=void 0;var cc=Mt(lc());z.PostgrestClient=cc.default;var uc=Mt(so());z.PostgrestQueryBuilder=uc.default;var dc=Mt(ni());z.PostgrestFilterBuilder=dc.default;var hc=Mt(ro());z.PostgrestTransformBuilder=hc.default;var fc=Mt(eo());z.PostgrestBuilder=fc.default;var pc=Mt(Xs());z.PostgrestError=pc.default;z.default={PostgrestClient:cc.default,PostgrestQueryBuilder:uc.default,PostgrestFilterBuilder:dc.default,PostgrestTransformBuilder:hc.default,PostgrestBuilder:fc.default,PostgrestError:pc.default}});var tr=class{},vn=class{},_e=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let r=e.indexOf(":");if(r>0){let i=e.slice(0,r),s=e.slice(r+1).trim();this.addHeaderEntry(i,s)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,r)=>{this.addHeaderEntry(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,e);let i=(t.op==="a"?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":let s=t.value;if(!s)this.headers.delete(e),this.normalizedNames.delete(e);else{let o=this.headers.get(e);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}break}}addHeaderEntry(t,e){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(e):this.headers.set(r,[e])}setHeaderEntries(t,e){let r=(Array.isArray(e)?e:[e]).map(s=>s.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var $i=class{encodeKey(t){return da(t)}encodeValue(t){return da(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function iu(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,s)),t.decodeValue(i.slice(s+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}var su=/%(\d[a-f0-9])/gi,ou={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function da(n){return encodeURIComponent(n).replace(su,(t,e)=>ou[e]??t)}function mn(n){return`${n}`}var je=class n{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new $i,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=iu(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let r=t.fromObject[e],i=Array.isArray(r)?r.map(mn):[mn(r)];this.map.set(e,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(s=>{e.push({param:r,value:s,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(mn(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf(mn(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var Bi=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function au(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function ha(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function fa(n){return typeof Blob<"u"&&n instanceof Blob}function pa(n){return typeof FormData<"u"&&n instanceof FormData}function lu(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var er=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(t,e,r,i){this.url=e,this.method=t.toUpperCase();let s;if(au(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new _e,this.context??=new Bi,!this.params)this.params=new je,this.urlWithParams=e;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||ha(this.body)||fa(this.body)||pa(this.body)||lu(this.body)?this.body:this.body instanceof je?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||pa(this.body)?null:fa(this.body)?this.body.type||null:ha(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof je?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,s=t.transferCache??this.transferCache,o=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress,c=t.headers||this.headers,u=t.params||this.params,d=t.context??this.context;return t.setHeaders!==void 0&&(c=Object.keys(t.setHeaders).reduce((p,f)=>p.set(f,t.setHeaders[f]),c)),t.setParams&&(u=Object.keys(t.setParams).reduce((p,f)=>p.set(f,t.setParams[f]),u)),new n(e,r,o,{params:u,headers:c,context:d,reportProgress:l,responseType:i,withCredentials:a,transferCache:s})}},Ne=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Ne||{}),rr=class{headers;status;statusText;url;ok;type;constructor(t,e=200,r="OK"){this.headers=t.headers||new _e,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},yn=class n extends rr{constructor(t={}){super(t)}type=Ne.ResponseHeader;clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},nr=class n extends rr{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Ne.Response;clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Pe=class extends rr{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},ya=200,cu=204;function Vi(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var uu=(()=>{class n{handler;constructor(e){this.handler=e}request(e,r,i={}){let s;if(e instanceof er)s=e;else{let l;i.headers instanceof _e?l=i.headers:l=new _e(i.headers);let c;i.params&&(i.params instanceof je?c=i.params:c=new je({fromObject:i.params})),s=new er(e,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let o=w(s).pipe(De(l=>this.handler.handle(l)));if(e instanceof er||i.observe==="events")return o;let a=o.pipe(me(l=>l instanceof nr));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(D(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(D(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(D(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return a.pipe(D(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:new je().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,Vi(i,r))}post(e,r,i={}){return this.request("POST",e,Vi(i,r))}put(e,r,i={}){return this.request("PUT",e,Vi(i,r))}static \u0275fac=function(r){return new(r||n)(S(tr))};static \u0275prov=E({token:n,factory:n.\u0275fac})}return n})(),du=/^\)\]\}',?\n/,hu="X-Request-URL";function ga(n){if(n.url)return n.url;let t=hu.toLocaleLowerCase();return n.headers.get(t)}var fu=(()=>{class n{fetchImpl=_(zi,{optional:!0})?.fetch??((...e)=>globalThis.fetch(...e));ngZone=_(le);handle(e){return new xi(r=>{let i=new AbortController;return this.doRequest(e,i.signal,r).then(Gi,s=>r.error(new Pe({error:s}))),()=>i.abort()})}doRequest(e,r,i){return h(this,null,function*(){let s=this.createRequestInit(e),o;try{let f=this.ngZone.runOutsideAngular(()=>this.fetchImpl(e.urlWithParams,m({signal:r},s)));pu(f),i.next({type:Ne.Sent}),o=yield f}catch(f){i.error(new Pe({error:f,status:f.status??0,statusText:f.statusText,url:e.urlWithParams,headers:f.headers}));return}let a=new _e(o.headers),l=o.statusText,c=ga(o)??e.urlWithParams,u=o.status,d=null;if(e.reportProgress&&i.next(new yn({headers:a,status:u,statusText:l,url:c})),o.body){let f=o.headers.get("content-length"),y=[],v=o.body.getReader(),g=0,R,j,A=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>h(this,null,function*(){for(;;){let{done:F,value:G}=yield v.read();if(F)break;if(y.push(G),g+=G.length,e.reportProgress){j=e.responseType==="text"?(j??"")+(R??=new TextDecoder).decode(G,{stream:!0}):void 0;let nn=()=>i.next({type:Ne.DownloadProgress,total:f?+f:void 0,loaded:g,partialText:j});A?A.run(nn):nn()}}}));let U=this.concatChunks(y,g);try{let F=o.headers.get("Content-Type")??"";d=this.parseBody(e,U,F)}catch(F){i.error(new Pe({error:F,headers:new _e(o.headers),status:o.status,statusText:o.statusText,url:ga(o)??e.urlWithParams}));return}}u===0&&(u=d?ya:0),u>=200&&u<300?(i.next(new nr({body:d,headers:a,status:u,statusText:l,url:c})),i.complete()):i.error(new Pe({error:d,headers:a,status:u,statusText:l,url:c}))})}parseBody(e,r,i){switch(e.responseType){case"json":let s=new TextDecoder().decode(r).replace(du,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(e){let r={},i=e.withCredentials?"include":void 0;if(e.headers.forEach((s,o)=>r[s]=o.join(",")),e.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!e.headers.has("Content-Type")){let s=e.detectContentTypeHeader();s!==null&&(r["Content-Type"]=s)}return{body:e.serializeBody(),method:e.method,headers:r,credentials:i}}concatChunks(e,r){let i=new Uint8Array(r),s=0;for(let o of e)i.set(o,s),s+=o.length;return i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:n.\u0275fac})}return n})(),zi=class{};function Gi(){}function pu(n){n.then(Gi,Gi)}function gu(n,t){return t(n)}function mu(n,t,e){return(r,i)=>te(e,()=>t(r,s=>n(s,i)))}var _a=new O(""),vu=new O(""),yu=new O("",{providedIn:"root",factory:()=>!0});var ma=(()=>{class n extends tr{backend;injector;chain=null;pendingTasks=_(an);contributeToStability=_(yu);constructor(e,r){super(),this.backend=e,this.injector=r}handle(e){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(_a),...this.injector.get(vu,[])]));this.chain=r.reduceRight((i,s)=>mu(i,s,this.injector),gu)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(e,i=>this.backend.handle(i)).pipe(dt(()=>this.pendingTasks.remove(r)))}else return this.chain(e,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(S(vn),S(qe))};static \u0275prov=E({token:n,factory:n.\u0275fac})}return n})();var _u=/^\)\]\}',?\n/;function wu(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var va=(()=>{class n{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new M(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?$(r.\u0275loadImpl()):w(null)).pipe(J(()=>new xi(s=>{let o=r.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((v,g)=>o.setRequestHeader(v,g.join(","))),e.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){let v=e.detectContentTypeHeader();v!==null&&o.setRequestHeader("Content-Type",v)}if(e.responseType){let v=e.responseType.toLowerCase();o.responseType=v!=="json"?v:"text"}let a=e.serializeBody(),l=null,c=()=>{if(l!==null)return l;let v=o.statusText||"OK",g=new _e(o.getAllResponseHeaders()),R=wu(o)||e.url;return l=new yn({headers:g,status:o.status,statusText:v,url:R}),l},u=()=>{let{headers:v,status:g,statusText:R,url:j}=c(),A=null;g!==cu&&(A=typeof o.response>"u"?o.responseText:o.response),g===0&&(g=A?ya:0);let U=g>=200&&g<300;if(e.responseType==="json"&&typeof A=="string"){let F=A;A=A.replace(_u,"");try{A=A!==""?JSON.parse(A):null}catch(G){A=F,U&&(U=!1,A={error:G,text:A})}}U?(s.next(new nr({body:A,headers:v,status:g,statusText:R,url:j||void 0})),s.complete()):s.error(new Pe({error:A,headers:v,status:g,statusText:R,url:j||void 0}))},d=v=>{let{url:g}=c(),R=new Pe({error:v,status:o.status||0,statusText:o.statusText||"Unknown Error",url:g||void 0});s.error(R)},p=!1,f=v=>{p||(s.next(c()),p=!0);let g={type:Ne.DownloadProgress,loaded:v.loaded};v.lengthComputable&&(g.total=v.total),e.responseType==="text"&&o.responseText&&(g.partialText=o.responseText),s.next(g)},y=v=>{let g={type:Ne.UploadProgress,loaded:v.loaded};v.lengthComputable&&(g.total=v.total),s.next(g)};return o.addEventListener("load",u),o.addEventListener("error",d),o.addEventListener("timeout",d),o.addEventListener("abort",d),e.reportProgress&&(o.addEventListener("progress",f),a!==null&&o.upload&&o.upload.addEventListener("progress",y)),o.send(a),s.next({type:Ne.Sent}),()=>{o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",u),o.removeEventListener("timeout",d),e.reportProgress&&(o.removeEventListener("progress",f),a!==null&&o.upload&&o.upload.removeEventListener("progress",y)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(r){return new(r||n)(S(gn))};static \u0275prov=E({token:n,factory:n.\u0275fac})}return n})(),wa=new O(""),bu="XSRF-TOKEN",Cu=new O("",{providedIn:"root",factory:()=>bu}),Su="X-XSRF-TOKEN",Eu=new O("",{providedIn:"root",factory:()=>Su}),_n=class{},xu=(()=>{class n{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=fn(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(r){return new(r||n)(S(q),S(He),S(Cu))};static \u0275prov=E({token:n,factory:n.\u0275fac})}return n})();function Tu(n,t){let e=n.url.toLowerCase();if(!_(wa)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let r=_(_n).getToken(),i=_(Eu);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),t(n)}function Vp(...n){let t=[uu,va,ma,{provide:tr,useExisting:ma},{provide:vn,useFactory:()=>_(fu,{optional:!0})??_(va)},{provide:_a,useValue:Tu,multi:!0},{provide:wa,useValue:!0},{provide:_n,useClass:xu}];for(let e of n)t.push(...e.\u0275providers);return qt(t)}var Wi=class extends ra{supportsDOMEvents=!0},Ji=class n extends Wi{static makeCurrent(){ta(new n)}onAndCancel(t,e,r){return t.addEventListener(e,r),()=>{t.removeEventListener(e,r)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=Ru();return e==null?null:Du(e)}resetBaseElement(){ir=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return fn(document.cookie,t)}},ir=null;function Ru(){return ir=ir||document.querySelector("base"),ir?ir.getAttribute("href"):null}function Du(n){return new URL(n,document.baseURI).pathname}var Ou=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:n.\u0275fac})}return n})(),Ki=new O(""),Aa=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,i){return this._findPluginFor(r).addEventListener(e,r,i)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(s=>s.supports(e)),!r)throw new M(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||n)(S(Ki),S(le))};static \u0275prov=E({token:n,factory:n.\u0275fac})}return n})(),bn=class{_doc;constructor(t){this._doc=t}manager},wn="ng-app-id";function ba(n){for(let t of n)t.remove()}function Ca(n,t){let e=t.createElement("style");return e.textContent=n,e}function Iu(n,t,e,r){let i=n.head?.querySelectorAll(`style[${wn}="${t}"],link[${wn}="${t}"]`);if(i)for(let s of i)s.removeAttribute(wn),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&e.set(s.textContent,{usage:0,elements:[s]})}function Yi(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var Ra=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,r,i,s={}){this.doc=e,this.appId=r,this.nonce=i,this.isServer=pn(s),Iu(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let i of e)this.addUsage(i,this.inline,Ca);r?.forEach(i=>this.addUsage(i,this.external,Yi))}removeStyles(e,r){for(let i of e)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(e,r,i){let s=r.get(e);s?s.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(e,this.doc)))})}removeUsage(e,r){let i=r.get(e);i&&(i.usage--,i.usage<=0&&(ba(i.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])ba(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(e,Ca(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(e,Yi(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(wn,this.appId),e.appendChild(r)}static \u0275fac=function(r){return new(r||n)(S(q),S(ji),S(Ni,8),S(He))};static \u0275prov=E({token:n,factory:n.\u0275fac})}return n})(),Hi={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Xi=/%COMP%/g,Da="%COMP%",Mu=`_nghost-${Da}`,ku=`_ngcontent-${Da}`,Pu=!0,ju=new O("",{providedIn:"root",factory:()=>Pu});function Nu(n){return ku.replace(Xi,n)}function Uu(n){return Mu.replace(Xi,n)}function Oa(n,t){return t.map(e=>e.replace(Xi,n))}var Sa=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,r,i,s,o,a,l,c=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.platformIsServer=pn(a),this.defaultRenderer=new sr(e,o,l,this.platformIsServer)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Wt.ShadowDom&&(r=k(m({},r),{encapsulation:Wt.Emulated}));let i=this.getOrCreateRenderer(e,r);return i instanceof Cn?i.applyToHost(e):i instanceof or&&i.applyStyles(),i}getOrCreateRenderer(e,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Wt.Emulated:s=new Cn(l,c,r,this.appId,u,o,a,d);break;case Wt.ShadowDom:return new Qi(l,c,e,r,o,a,this.nonce,d);default:s=new or(l,c,r,u,o,a,d);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static \u0275fac=function(r){return new(r||n)(S(Aa),S(Ra),S(ji),S(ju),S(q),S(He),S(le),S(Ni))};static \u0275prov=E({token:n,factory:n.\u0275fac})}return n})(),sr=class{eventManager;doc;ngZone;platformIsServer;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,r,i){this.eventManager=t,this.doc=e,this.ngZone=r,this.platformIsServer=i}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(Hi[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(Ea(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(Ea(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){e.remove()}selectRootElement(t,e){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new M(-5104,!1);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;let s=Hi[i];s?t.setAttributeNS(s,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){let i=Hi[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(Jt.DashCase|Jt.Important)?t.style.setProperty(e,r,i&Jt.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&Jt.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t!=null&&(t[e]=r)}setValue(t,e){t.nodeValue=e}listen(t,e,r){if(typeof t=="string"&&(t=Ye().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(r))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function Ea(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Qi=class extends sr{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,r,i,s,o,a,l){super(t,s,o,l),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=Oa(i.id,i.styles);for(let d of c){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=d,this.shadowRoot.appendChild(p)}let u=i.getExternalStyles?.();if(u)for(let d of u){let p=Yi(d,s);a&&p.setAttribute("nonce",a),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},or=class extends sr{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,r,i,s,o,a,l){super(t,s,o,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i,this.styles=l?Oa(l,r.styles):r.styles,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Cn=class extends or{contentAttr;hostAttr;constructor(t,e,r,i,s,o,a,l){let c=i+"-"+r.id;super(t,e,r,s,o,a,l,c),this.contentAttr=Nu(c),this.hostAttr=Uu(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}},Fu=(()=>{class n extends bn{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i){return e.addEventListener(r,i,!1),()=>this.removeEventListener(e,r,i)}removeEventListener(e,r,i){return e.removeEventListener(r,i)}static \u0275fac=function(r){return new(r||n)(S(q))};static \u0275prov=E({token:n,factory:n.\u0275fac})}return n})(),xa=["alt","control","meta","shift"],Lu={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},$u=(()=>{class n extends bn{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ye().onAndCancel(e,s.domEventName,o))}static parseEventName(e){let r=e.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),xa.forEach(c=>{let u=r.indexOf(c);u>-1&&(r.splice(u,1),o+=c+".")}),o+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(e,r){let i=Lu[e.key]||e.key,s="";return r.indexOf("code.")>-1&&(i=e.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),xa.forEach(o=>{if(o!==i){let a=Vu[o];a(e)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(e,r,i){return s=>{n.matchEventFullKeyCode(s,e)&&i.runGuarded(()=>r(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||n)(S(q))};static \u0275prov=E({token:n,factory:n.\u0275fac})}return n})();function dg(n,t){return Zo(m({rootComponent:n},Bu(t)))}function Bu(n){return{appProviders:[...Wu,...n?.providers??[]],platformProviders:Hu}}function zu(){Ji.makeCurrent()}function Gu(){return new Pi}function qu(){return jo(document),document}var Hu=[{provide:He,useValue:oa},{provide:No,useValue:zu,multi:!0},{provide:q,useFactory:qu,deps:[]}];var Wu=[{provide:Mo,useValue:"root"},{provide:Pi,useFactory:Gu,deps:[]},{provide:Ki,useClass:Fu,multi:!0,deps:[q,le,He]},{provide:Ki,useClass:$u,multi:!0,deps:[q]},Sa,Ra,Aa,{provide:Wo,useExisting:Sa},{provide:gn,useClass:Ou,deps:[]},[]];var Ia=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||n)(S(q))};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ju=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=S(Ku),i},providedIn:"root"})}return n})(),Ku=(()=>{class n extends Ju{_doc;constructor(e){super(),this._doc=e}sanitize(e,r){if(r==null)return null;switch(e){case We.NONE:return r;case We.HTML:return ft(r,"HTML")?ht(r):Go(this._doc,String(r)).toString();case We.STYLE:return ft(r,"Style")?ht(r):r;case We.SCRIPT:if(ft(r,"Script"))return ht(r);throw new M(5200,!1);case We.URL:return ft(r,"URL")?ht(r):zo(String(r));case We.RESOURCE_URL:if(ft(r,"ResourceURL"))return ht(r);throw new M(5201,!1);default:throw new M(5202,!1)}}bypassSecurityTrustHtml(e){return Fo(e)}bypassSecurityTrustStyle(e){return Lo(e)}bypassSecurityTrustScript(e){return Vo(e)}bypassSecurityTrustUrl(e){return $o(e)}bypassSecurityTrustResourceUrl(e){return Bo(e)}static \u0275fac=function(r){return new(r||n)(S(q))};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var b="primary",br=Symbol("RouteTitle"),ns=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function bt(n){return new ns(n)}function Qu(n,t,e){let r=e.path.split("/");if(r.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Xu(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!ue(n[e],t[e]))return!1;return!0}function ue(n,t){let e=n?is(n):void 0,r=t?is(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let s=0;s<e.length;s++)if(i=e[s],!Ba(n[i],t[i]))return!1;return!0}function is(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Ba(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),r=[...t].sort();return e.every((i,s)=>r[s]===i)}else return n===t}function za(n){return n.length>0?n[n.length-1]:null}function Le(n){return bo(n)?n:cn(n)?$(Promise.resolve(n)):w(n)}var Zu={exact:qa,subset:Ha},Ga={exact:ed,subset:td,ignored:()=>!0};function Ma(n,t,e){return Zu[e.paths](n.root,t.root,e.matrixParams)&&Ga[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function ed(n,t){return ue(n,t)}function qa(n,t,e){if(!Xe(n.segments,t.segments)||!xn(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!n.children[r]||!qa(n.children[r],t.children[r],e))return!1;return!0}function td(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Ba(n[e],t[e]))}function Ha(n,t,e){return Wa(n,t,t.segments,e)}function Wa(n,t,e,r){if(n.segments.length>e.length){let i=n.segments.slice(0,e.length);return!(!Xe(i,e)||t.hasChildren()||!xn(i,e,r))}else if(n.segments.length===e.length){if(!Xe(n.segments,e)||!xn(n.segments,e,r))return!1;for(let i in t.children)if(!n.children[i]||!Ha(n.children[i],t.children[i],r))return!1;return!0}else{let i=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!Xe(n.segments,i)||!xn(n.segments,i,r)||!n.children[b]?!1:Wa(n.children[b],t,s,r)}}function xn(n,t,e){return t.every((r,i)=>Ga[e](n[i].parameters,r.parameters))}var be=class{root;queryParams;fragment;_queryParamMap;constructor(t=new I([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=bt(this.queryParams),this._queryParamMap}toString(){return id.serialize(this)}},I=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Tn(this)}},Qe=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=bt(this.parameters),this._parameterMap}toString(){return Ka(this)}};function rd(n,t){return Xe(n,t)&&n.every((e,r)=>ue(e.parameters,t[r].parameters))}function Xe(n,t){return n.length!==t.length?!1:n.every((e,r)=>e.path===t[r].path)}function nd(n,t){let e=[];return Object.entries(n.children).forEach(([r,i])=>{r===b&&(e=e.concat(t(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==b&&(e=e.concat(t(i,r)))}),e}var Cr=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:()=>new Ct,providedIn:"root"})}return n})(),Ct=class{parse(t){let e=new os(t);return new be(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${ar(t.root,!0)}`,r=ad(t.queryParams),i=typeof t.fragment=="string"?`#${sd(t.fragment)}`:"";return`${e}${r}${i}`}},id=new Ct;function Tn(n){return n.segments.map(t=>Ka(t)).join("/")}function ar(n,t){if(!n.hasChildren())return Tn(n);if(t){let e=n.children[b]?ar(n.children[b],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==b&&r.push(`${i}:${ar(s,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=nd(n,(r,i)=>i===b?[ar(n.children[b],!1)]:[`${i}:${ar(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[b]!=null?`${Tn(n)}/${e[0]}`:`${Tn(n)}/(${e.join("//")})`}}function Ja(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sn(n){return Ja(n).replace(/%3B/gi,";")}function sd(n){return encodeURI(n)}function ss(n){return Ja(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function An(n){return decodeURIComponent(n)}function ka(n){return An(n.replace(/\+/g,"%20"))}function Ka(n){return`${ss(n.path)}${od(n.parameters)}`}function od(n){return Object.entries(n).map(([t,e])=>`;${ss(t)}=${ss(e)}`).join("")}function ad(n){let t=Object.entries(n).map(([e,r])=>Array.isArray(r)?r.map(i=>`${Sn(e)}=${Sn(i)}`).join("&"):`${Sn(e)}=${Sn(r)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var ld=/^[^\/()?;#]+/;function Zi(n){let t=n.match(ld);return t?t[0]:""}var cd=/^[^\/()?;=#]+/;function ud(n){let t=n.match(cd);return t?t[0]:""}var dd=/^[^=?&#]+/;function hd(n){let t=n.match(dd);return t?t[0]:""}var fd=/^[^&#]+/;function pd(n){let t=n.match(fd);return t?t[0]:""}var os=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new I([],{}):new I([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[b]=new I(t,e)),r}parseSegment(){let t=Zi(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new M(4009,!1);return this.capture(t),new Qe(An(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=ud(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let i=Zi(this.remaining);i&&(r=i,this.capture(r))}t[An(e)]=An(r)}parseQueryParam(t){let e=hd(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let o=pd(this.remaining);o&&(r=o,this.capture(r))}let i=ka(e),s=ka(r);if(t.hasOwnProperty(i)){let o=t[i];Array.isArray(o)||(o=[o],t[i]=o),o.push(s)}else t[i]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Zi(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new M(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=b);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[b]:new I([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new M(4011,!1)}};function Ya(n){return n.segments.length>0?new I([],{[b]:n}):n}function Qa(n){let t={};for(let[r,i]of Object.entries(n.children)){let s=Qa(i);if(r===b&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))t[o]=a;else(s.segments.length>0||s.hasChildren())&&(t[r]=s)}let e=new I(n.segments,t);return gd(e)}function gd(n){if(n.numberOfChildren===1&&n.children[b]){let t=n.children[b];return new I(n.segments.concat(t.segments),t.children)}return n}function Ze(n){return n instanceof be}function md(n,t,e=null,r=null){let i=Xa(n);return Za(i,t,e,r)}function Xa(n){let t;function e(s){let o={};for(let l of s.children){let c=e(l);o[l.outlet]=c}let a=new I(s.url,o);return s===n&&(t=a),a}let r=e(n.root),i=Ya(r);return t??i}function Za(n,t,e,r){let i=n;for(;i.parent;)i=i.parent;if(t.length===0)return es(i,i,i,e,r);let s=vd(t);if(s.toRoot())return es(i,i,new I([],{}),e,r);let o=yd(s,i,n),a=o.processChildren?ur(o.segmentGroup,o.index,s.commands):tl(o.segmentGroup,o.index,s.commands);return es(i,o.segmentGroup,a,e,r)}function Rn(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function fr(n){return typeof n=="object"&&n!=null&&n.outlets}function es(n,t,e,r,i){let s={};r&&Object.entries(r).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;n===t?o=e:o=el(n,t,e);let a=Ya(Qa(o));return new be(a,s,i)}function el(n,t,e){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===t?r[i]=e:r[i]=el(s,t,e)}),new I(n.segments,r)}var Dn=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&Rn(r[0]))throw new M(4003,!1);let i=r.find(fr);if(i&&i!==za(r))throw new M(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function vd(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Dn(!0,0,n);let t=0,e=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Dn(e,t,r)}var yt=class{segmentGroup;processChildren;index;constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}};function yd(n,t,e){if(n.isAbsolute)return new yt(t,!0,0);if(!e)return new yt(t,!1,NaN);if(e.parent===null)return new yt(e,!0,0);let r=Rn(n.commands[0])?0:1,i=e.segments.length-1+r;return _d(e,i,n.numberOfDoubleDots)}function _d(n,t,e){let r=n,i=t,s=e;for(;s>i;){if(s-=i,r=r.parent,!r)throw new M(4005,!1);i=r.segments.length}return new yt(r,!1,i-s)}function wd(n){return fr(n[0])?n[0].outlets:{[b]:n}}function tl(n,t,e){if(n??=new I([],{}),n.segments.length===0&&n.hasChildren())return ur(n,t,e);let r=bd(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new I(n.segments.slice(0,r.pathIndex),{});return s.children[b]=new I(n.segments.slice(r.pathIndex),n.children),ur(s,0,i)}else return r.match&&i.length===0?new I(n.segments,{}):r.match&&!n.hasChildren()?as(n,t,e):r.match?ur(n,0,i):as(n,t,e)}function ur(n,t,e){if(e.length===0)return new I(n.segments,{});{let r=wd(e),i={};if(Object.keys(r).some(s=>s!==b)&&n.children[b]&&n.numberOfChildren===1&&n.children[b].segments.length===0){let s=ur(n.children[b],t,e);return new I(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=tl(n.children[s],t,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new I(n.segments,i)}}function bd(n,t,e){let r=0,i=t,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return s;let o=n.segments[i],a=e[r];if(fr(a))break;let l=`${a}`,c=r<e.length-1?e[r+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!ja(l,c,o))return s;r+=2}else{if(!ja(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function as(n,t,e){let r=n.segments.slice(0,t),i=0;for(;i<e.length;){let s=e[i];if(fr(s)){let l=Cd(s.outlets);return new I(r,l)}if(i===0&&Rn(e[0])){let l=n.segments[t];r.push(new Qe(l.path,Pa(e[0]))),i++;continue}let o=fr(s)?s.outlets[b]:`${s}`,a=i<e.length-1?e[i+1]:null;o&&a&&Rn(a)?(r.push(new Qe(o,Pa(a))),i+=2):(r.push(new Qe(o,{})),i++)}return new I(r,{})}function Cd(n){let t={};return Object.entries(n).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[e]=as(new I([],{}),0,r))}),t}function Pa(n){let t={};return Object.entries(n).forEach(([e,r])=>t[e]=`${r}`),t}function ja(n,t,e){return n==e.path&&ue(t,e.parameters)}var dr="imperative",V=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(V||{}),re=class{id;url;constructor(t,e){this.id=t,this.url=e}},St=class extends re{type=V.NavigationStart;navigationTrigger;restoredState;constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},de=class extends re{urlAfterRedirects;type=V.NavigationEnd;constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},X=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(X||{}),On=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(On||{}),we=class extends re{reason;code;type=V.NavigationCancel;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ue=class extends re{reason;code;type=V.NavigationSkipped;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}},pr=class extends re{error;target;type=V.NavigationError;constructor(t,e,r,i){super(t,e),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},In=class extends re{urlAfterRedirects;state;type=V.RoutesRecognized;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ls=class extends re{urlAfterRedirects;state;type=V.GuardsCheckStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cs=class extends re{urlAfterRedirects;state;shouldActivate;type=V.GuardsCheckEnd;constructor(t,e,r,i,s){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},us=class extends re{urlAfterRedirects;state;type=V.ResolveStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ds=class extends re{urlAfterRedirects;state;type=V.ResolveEnd;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hs=class{route;type=V.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},fs=class{route;type=V.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ps=class{snapshot;type=V.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gs=class{snapshot;type=V.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ms=class{snapshot;type=V.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vs=class{snapshot;type=V.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mn=class{routerEvent;position;anchor;type=V.Scroll;constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},gr=class{},Et=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function Sd(n,t){return n.providers&&!n._injector&&(n._injector=Ui(n.providers,t,`Route: ${n.path}`)),n._injector??t}function ie(n){return n.outlet||b}function Ed(n,t){let e=n.filter(r=>ie(r)===t);return e.push(...n.filter(r=>ie(r)!==t)),e}function Sr(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var ys=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Sr(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Er(this.rootInjector)}},Er=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,r){let i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new ys(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(r){return new(r||n)(S(qe))};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kn=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=_s(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){let e=_s(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=ws(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return ws(t,this._root).map(e=>e.value)}};function _s(n,t){if(n===t.value)return t;for(let e of t.children){let r=_s(n,e);if(r)return r}return null}function ws(n,t){if(n===t.value)return[t];for(let e of t.children){let r=ws(n,e);if(r.length)return r.unshift(t),r}return[]}var Q=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function vt(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Pn=class extends kn{snapshot;constructor(t,e){super(t),this.snapshot=e,Ds(this,t)}toString(){return this.snapshot.toString()}};function rl(n){let t=xd(n),e=new ee([new Qe("",{})]),r=new ee({}),i=new ee({}),s=new ee({}),o=new ee(""),a=new Fe(e,r,s,o,i,b,n,t.root);return a.snapshot=t.root,new Pn(new Q(a,[]),t)}function xd(n){let t={},e={},r={},i="",s=new _t([],t,r,i,e,b,n,null,{});return new Nn("",new Q(s,[]))}var Fe=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,r,i,s,o,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(D(c=>c[br]))??w(void 0),this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(D(t=>bt(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(D(t=>bt(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function jn(n,t,e="emptyOnly"){let r,{routeConfig:i}=n;return t!==null&&(e==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:m(m({},t.params),n.params),data:m(m({},t.data),n.data),resolve:m(m(m(m({},n.data),t.data),i?.data),n._resolvedData)}:r={params:m({},n.params),data:m({},n.data),resolve:m(m({},n.data),n._resolvedData??{})},i&&il(i)&&(r.resolve[br]=i.title),r}var _t=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[br]}constructor(t,e,r,i,s,o,a,l,c){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=bt(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=bt(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Nn=class extends kn{url;constructor(t,e){super(e),this.url=t,Ds(this,e)}toString(){return nl(this._root)}};function Ds(n,t){t.value._routerState=n,t.children.forEach(e=>Ds(n,e))}function nl(n){let t=n.children.length>0?` { ${n.children.map(nl).join(", ")} } `:"";return`${n.value}${t}`}function ts(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,ue(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),ue(t.params,e.params)||n.paramsSubject.next(e.params),Xu(t.url,e.url)||n.urlSubject.next(e.url),ue(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function bs(n,t){let e=ue(n.params,t.params)&&rd(n.url,t.url),r=!n.parent!=!t.parent;return e&&!r&&(!n.parent||bs(n.parent,t.parent))}function il(n){return typeof n.title=="string"||n.title===null}var Td=new O(""),Ad=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=b;activateEvents=new K;deactivateEvents=new K;attachEvents=new K;detachEvents=new K;routerOutletData=Po(void 0);parentContexts=_(Er);location=_(Jo);changeDetector=_(Qt);inputBinder=_(Vn,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new M(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new M(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new M(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new M(4013,!1);this._activatedRoute=e;let i=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Cs(e,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=L({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ve]})}return n})(),Cs=class n{route;childContexts;parent;outletData;__ngOutletInjector(t){return new n(this.route,this.childContexts,t,this.outletData)}constructor(t,e,r,i){this.route=t,this.childContexts=e,this.parent=r,this.outletData=i}get(t,e){return t===Fe?this.route:t===Er?this.childContexts:t===Td?this.outletData:this.parent.get(t,e)}},Vn=new O(""),Na=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:r}=e,i=sn([r.queryParams,r.params,r.data]).pipe(J(([s,o,a],l)=>(a=m(m(m({},s),o),a),l===0?w(a):Promise.resolve(a)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(e);return}let o=ea(r.component);if(!o){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of o.inputs)e.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(e,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:n.\u0275fac})}return n})();function Rd(n,t,e){let r=mr(n,t._root,e?e._root:void 0);return new Pn(r,t)}function mr(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=t.value;let i=Dd(n,t,e);return new Q(r,i)}else{if(n.shouldAttach(t.value)){let s=n.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>mr(n,a)),o}}let r=Od(t.value),i=t.children.map(s=>mr(n,s));return new Q(r,i)}}function Dd(n,t,e){return t.children.map(r=>{for(let i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return mr(n,r,i);return mr(n,r)})}function Od(n){return new Fe(new ee(n.url),new ee(n.params),new ee(n.queryParams),new ee(n.fragment),new ee(n.data),n.outlet,n.component,n)}var vr=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},sl="ngNavigationCancelingError";function Un(n,t){let{redirectTo:e,navigationBehaviorOptions:r}=Ze(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=ol(!1,X.Redirect);return i.url=e,i.navigationBehaviorOptions=r,i}function ol(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[sl]=!0,e.cancellationCode=t,e}function Id(n){return al(n)&&Ze(n.url)}function al(n){return!!n&&n[sl]}var Md=(n,t,e,r)=>D(i=>(new Ss(t,i.targetRouterState,i.currentRouterState,e,r).activate(n),i)),Ss=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,r,i,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),ts(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){let i=vt(e);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(t,e,r){let i=t.value,s=e?e.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,r);else s&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,s=vt(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,s=vt(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,e,r){let i=vt(e);t.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new vs(s.value.snapshot))}),t.children.length&&this.forwardEvent(new gs(t.value.snapshot))}activateRoutes(t,e,r){let i=t.value,s=e?e.value:null;if(ts(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),ts(a.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,r)}},Fn=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},wt=class{component;route;constructor(t,e){this.component=t,this.route=e}};function kd(n,t,e){let r=n._root,i=t?t._root:null;return lr(r,i,e,[r.value])}function Pd(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function Tt(n,t){let e=Symbol(),r=t.get(n,e);return r===e?typeof n=="function"&&!Oo(n)?n:t.get(n):r}function lr(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=vt(t);return n.children.forEach(o=>{jd(o,s[o.value.outlet],e,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>hr(a,e.getContext(o),i)),i}function jd(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=Nd(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Fn(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?lr(n,t,a?a.children:null,r,i):lr(n,t,e,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new wt(a.outlet.component,o))}else o&&hr(t,a,i),i.canActivateChecks.push(new Fn(r)),s.component?lr(n,null,a?a.children:null,r,i):lr(n,null,e,r,i);return i}function Nd(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Xe(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Xe(n.url,t.url)||!ue(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bs(n,t)||!ue(n.queryParams,t.queryParams);case"paramsChange":default:return!bs(n,t)}}function hr(n,t,e){let r=vt(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?t?hr(o,t.children.getContext(s),e):hr(o,null,e):hr(o,t,e)}),i.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new wt(t.outlet.component,i)):e.canDeactivateChecks.push(new wt(null,i)):e.canDeactivateChecks.push(new wt(null,i))}function xr(n){return typeof n=="function"}function Ud(n){return typeof n=="boolean"}function Fd(n){return n&&xr(n.canLoad)}function Ld(n){return n&&xr(n.canActivate)}function Vd(n){return n&&xr(n.canActivateChild)}function $d(n){return n&&xr(n.canDeactivate)}function Bd(n){return n&&xr(n.canMatch)}function ll(n){return n instanceof Co||n?.name==="EmptyError"}var En=Symbol("INITIAL_VALUE");function xt(){return J(n=>sn(n.map(t=>t.pipe(ut(1),Ro(En)))).pipe(D(t=>{for(let e of t)if(e!==!0){if(e===En)return En;if(e===!1||zd(e))return e}return!0}),me(t=>t!==En),ut(1)))}function zd(n){return Ze(n)||n instanceof vr}function Gd(n,t){return W(e=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?w(k(m({},e),{guardsResult:!0})):qd(o,r,i,n).pipe(W(a=>a&&Ud(a)?Hd(r,s,n,t):w(a)),D(a=>k(m({},e),{guardsResult:a})))})}function qd(n,t,e,r){return $(n).pipe(W(i=>Qd(i.component,i.route,e,t,r)),Oe(i=>i!==!0,!0))}function Hd(n,t,e,r){return $(t).pipe(De(i=>So(Jd(i.route.parent,r),Wd(i.route,r),Yd(n,i.path,e),Kd(n,i.route,e))),Oe(i=>i!==!0,!0))}function Wd(n,t){return n!==null&&t&&t(new ms(n)),w(!0)}function Jd(n,t){return n!==null&&t&&t(new ps(n)),w(!0)}function Kd(n,t,e){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return w(!0);let i=r.map(s=>Di(()=>{let o=Sr(t)??e,a=Tt(s,o),l=Ld(a)?a.canActivate(t,n):te(o,()=>a(t,n));return Le(l).pipe(Oe())}));return w(i).pipe(xt())}function Yd(n,t,e){let r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>Pd(o)).filter(o=>o!==null).map(o=>Di(()=>{let a=o.guards.map(l=>{let c=Sr(o.node)??e,u=Tt(l,c),d=Vd(u)?u.canActivateChild(r,n):te(c,()=>u(r,n));return Le(d).pipe(Oe())});return w(a).pipe(xt())}));return w(s).pipe(xt())}function Qd(n,t,e,r,i){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return w(!0);let o=s.map(a=>{let l=Sr(t)??i,c=Tt(a,l),u=$d(c)?c.canDeactivate(n,t,e,r):te(l,()=>c(n,t,e,r));return Le(u).pipe(Oe())});return w(o).pipe(xt())}function Xd(n,t,e,r){let i=t.canLoad;if(i===void 0||i.length===0)return w(!0);let s=i.map(o=>{let a=Tt(o,n),l=Fd(a)?a.canLoad(t,e):te(n,()=>a(t,e));return Le(l)});return w(s).pipe(xt(),cl(r))}function cl(n){return wo(B(t=>{if(typeof t!="boolean")throw Un(n,t)}),D(t=>t===!0))}function Zd(n,t,e,r){let i=t.canMatch;if(!i||i.length===0)return w(!0);let s=i.map(o=>{let a=Tt(o,n),l=Bd(a)?a.canMatch(t,e):te(n,()=>a(t,e));return Le(l)});return w(s).pipe(xt(),cl(r))}var yr=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},_r=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function mt(n){return Gt(new yr(n))}function eh(n){return Gt(new M(4e3,!1))}function th(n){return Gt(ol(!1,X.GuardRejected))}var Es=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return w(r);if(i.numberOfChildren>1||!i.children[b])return eh(`${t.redirectTo}`);i=i.children[b]}}applyRedirectCommands(t,e,r,i,s){if(typeof e!="string"){let a=e,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:p,params:f,data:y,title:v}=i,g=te(s,()=>a({params:f,data:y,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:p,title:v}));if(g instanceof be)throw new _r(g);e=g}let o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,r);if(e[0]==="/")throw new _r(o);return o}applyRedirectCreateUrlTree(t,e,r,i){let s=this.createSegmentGroup(t,e.root,r,i);return new be(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let r={};return Object.entries(t).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=e[a]}else r[i]=s}),r}createSegmentGroup(t,e,r,i){let s=this.createSegments(t,e.segments,r,i),o={};return Object.entries(e.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(t,l,r,i)}),new I(s,o)}createSegments(t,e,r,i){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,i):this.findOrReturn(s,r))}findPosParam(t,e,r){let i=r[e.path.substring(1)];if(!i)throw new M(4001,!1);return i}findOrReturn(t,e){let r=0;for(let i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}},xs={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rh(n,t,e,r,i){let s=ul(n,t,e);return s.matched?(r=Sd(t,r),Zd(r,t,e,i).pipe(D(o=>o===!0?s:m({},xs)))):w(s)}function ul(n,t,e){if(t.path==="**")return nh(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?m({},xs):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(t.matcher||Qu)(e,n,t);if(!i)return m({},xs);let s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=i.consumed.length>0?m(m({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function nh(n){return{matched:!0,parameters:n.length>0?za(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Ua(n,t,e,r){return e.length>0&&oh(n,e,r)?{segmentGroup:new I(t,sh(r,new I(e,n.children))),slicedSegments:[]}:e.length===0&&ah(n,e,r)?{segmentGroup:new I(n.segments,ih(n,e,r,n.children)),slicedSegments:e}:{segmentGroup:new I(n.segments,n.children),slicedSegments:e}}function ih(n,t,e,r){let i={};for(let s of e)if($n(n,t,s)&&!r[ie(s)]){let o=new I([],{});i[ie(s)]=o}return m(m({},r),i)}function sh(n,t){let e={};e[b]=t;for(let r of n)if(r.path===""&&ie(r)!==b){let i=new I([],{});e[ie(r)]=i}return e}function oh(n,t,e){return e.some(r=>$n(n,t,r)&&ie(r)!==b)}function ah(n,t,e){return e.some(r=>$n(n,t,r))}function $n(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function lh(n,t,e){return t.length===0&&!n.children[e]}var Ts=class{};function ch(n,t,e,r,i,s,o="emptyOnly"){return new As(n,t,e,r,i,o,s).recognize()}var uh=31,As=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,r,i,s,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Es(this.urlSerializer,this.urlTree)}noMatchError(t){return new M(4002,`'${t.segmentGroup}'`)}recognize(){let t=Ua(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(D(({children:e,rootSnapshot:r})=>{let i=new Q(r,e),s=new Nn("",i),o=md(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(t){let e=new _t([],Object.freeze({}),Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),b,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,b,e).pipe(D(r=>({children:r,rootSnapshot:e})),ct(r=>{if(r instanceof _r)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof yr?this.noMatchError(r):r}))}processSegmentGroup(t,e,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,e,r,s):this.processSegment(t,e,r,r.segments,i,!0,s).pipe(D(o=>o instanceof Q?[o]:[]))}processChildren(t,e,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return $(s).pipe(De(o=>{let a=r.children[o],l=Ed(e,o);return this.processSegmentGroup(t,l,a,o,i)}),Ao((o,a)=>(o.push(...a),o)),Oi(null),To(),W(o=>{if(o===null)return mt(r);let a=dl(o);return dh(a),w(a)}))}processSegment(t,e,r,i,s,o,a){return $(e).pipe(De(l=>this.processSegmentAgainstRoute(l._injector??t,e,l,r,i,s,o,a).pipe(ct(c=>{if(c instanceof yr)return w(null);throw c}))),Oe(l=>!!l),ct(l=>{if(ll(l))return lh(r,i,s)?w(new Ts):mt(r);throw l}))}processSegmentAgainstRoute(t,e,r,i,s,o,a,l){return ie(r)!==o&&(o===b||!$n(i,s,r))?mt(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,e,r,s,o,l):mt(i)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,s,o,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:p}=ul(e,i,s);if(!l)return mt(e);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>uh&&(this.allowRedirects=!1));let f=new _t(s,c,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,Fa(i),ie(i),i.component??i._loadedComponent??null,i,La(i)),y=jn(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(y.params),f.data=Object.freeze(y.data);let v=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,f,t);return this.applyRedirects.lineralizeSegments(i,v).pipe(W(g=>this.processSegment(t,r,e,g.concat(p),o,!1,a)))}matchSegmentAgainstRoute(t,e,r,i,s,o){let a=rh(e,r,i,t,this.urlSerializer);return r.path==="**"&&(e.children={}),a.pipe(J(l=>l.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(J(({routes:c})=>{let u=r._loadedInjector??t,{parameters:d,consumedSegments:p,remainingSegments:f}=l,y=new _t(p,d,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,Fa(r),ie(r),r.component??r._loadedComponent??null,r,La(r)),v=jn(y,o,this.paramsInheritanceStrategy);y.params=Object.freeze(v.params),y.data=Object.freeze(v.data);let{segmentGroup:g,slicedSegments:R}=Ua(e,p,f,c);if(R.length===0&&g.hasChildren())return this.processChildren(u,c,g,y).pipe(D(A=>new Q(y,A)));if(c.length===0&&R.length===0)return w(new Q(y,[]));let j=ie(r)===s;return this.processSegment(u,c,g,R,j?b:s,!0,y).pipe(D(A=>new Q(y,A instanceof Q?[A]:[])))}))):mt(e)))}getChildConfig(t,e,r){return e.children?w({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?w({routes:e._loadedRoutes,injector:e._loadedInjector}):Xd(t,e,r,this.urlSerializer).pipe(W(i=>i?this.configLoader.loadChildren(t,e).pipe(B(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):th(e))):w({routes:[],injector:t})}};function dh(n){n.sort((t,e)=>t.value.outlet===b?-1:e.value.outlet===b?1:t.value.outlet.localeCompare(e.value.outlet))}function hh(n){let t=n.value.routeConfig;return t&&t.path===""}function dl(n){let t=[],e=new Set;for(let r of n){if(!hh(r)){t.push(r);continue}let i=t.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),e.add(i)):t.push(r)}for(let r of e){let i=dl(r.children);t.push(new Q(r.value,i))}return t.filter(r=>!e.has(r))}function Fa(n){return n.data||{}}function La(n){return n.resolve||{}}function fh(n,t,e,r,i,s){return W(o=>ch(n,t,e,r,o.extractedUrl,i,s).pipe(D(({state:a,tree:l})=>k(m({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function ph(n,t){return W(e=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return w(e);let s=new Set(i.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let c of hl(l))o.add(c);let a=0;return $(o).pipe(De(l=>s.has(l)?gh(l,r,n,t):(l.data=jn(l,l.parent,n).resolve,w(void 0))),B(()=>a++),Ii(1),W(l=>a===o.size?w(e):Re))})}function hl(n){let t=n.children.map(e=>hl(e)).flat();return[n,...t]}function gh(n,t,e,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!il(i)&&(s[br]=i.title),mh(s,n,t,r).pipe(D(o=>(n._resolvedData=o,n.data=jn(n,n.parent,e).resolve,null)))}function mh(n,t,e,r){let i=is(n);if(i.length===0)return w({});let s={};return $(i).pipe(W(o=>vh(n[o],t,e,r).pipe(Oe(),B(a=>{if(a instanceof vr)throw Un(new Ct,a);s[o]=a}))),Ii(1),xo(s),ct(o=>ll(o)?Re:Gt(o)))}function vh(n,t,e,r){let i=Sr(t)??r,s=Tt(n,i),o=s.resolve?s.resolve(t,e):te(i,()=>s(t,e));return Le(o)}function rs(n){return J(t=>{let e=n(t);return e?$(e).pipe(D(()=>t)):w(t)})}var fl=(()=>{class n{buildTitle(e){let r,i=e.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===b);return r}getResolvedTitleForRoute(e){return e.data[br]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:()=>_(yh),providedIn:"root"})}return n})(),yh=(()=>{class n extends fl{title;constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(S(Ia))};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Tr=new O("",{providedIn:"root",factory:()=>({})}),_h=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Yo({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(r,i){r&1&&Xo(0,"router-outlet")},dependencies:[Ad],encapsulation:2})}return n})();function Os(n){let t=n.children&&n.children.map(Os),e=t?k(m({},n),{children:t}):m({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==b&&(e.component=_h),e}var wr=new O(""),Is=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=_(hn);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return w(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let r=Le(e.loadComponent()).pipe(D(pl),B(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),dt(()=>{this.componentLoaders.delete(e)})),i=new Ai(r,()=>new oe).pipe(Ti());return this.componentLoaders.set(e,i),i}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return w({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=wh(r,this.compiler,e,this.onLoadEndListener).pipe(dt(()=>{this.childrenLoaders.delete(r)})),o=new Ai(s,()=>new oe).pipe(Ti());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wh(n,t,e,r){return Le(n.loadChildren()).pipe(D(pl),W(i=>i instanceof Ko||Array.isArray(i)?w(i):$(t.compileModuleAsync(i))),D(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(e).injector,o=s.get(wr,[],{optional:!0,self:!0}).flat()),{routes:o.map(Os),injector:s}}))}function bh(n){return n&&typeof n=="object"&&"default"in n}function pl(n){return bh(n)?n.default:n}var Ms=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:()=>_(Ch),providedIn:"root"})}return n})(),Ch=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gl=new O(""),ml=new O("");function Sh(n,t,e){let r=n.get(ml),i=n.get(q);return n.get(le).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(c=>setTimeout(c));let s,o=new Promise(c=>{s=c}),a=i.startViewTransition(()=>(s(),Eh(n))),{onViewTransitionCreated:l}=r;return l&&te(n,()=>l({transition:a,from:t,to:e})),o})}function Eh(n){return new Promise(t=>{Uo({read:()=>setTimeout(t)},{injector:n})})}var vl=new O(""),ks=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new oe;transitionAbortSubject=new oe;configLoader=_(Is);environmentInjector=_(qe);urlSerializer=_(Cr);rootContexts=_(Er);location=_(Zt);inputBindingEnabled=_(Vn,{optional:!0})!==null;titleStrategy=_(fl);options=_(Tr,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=_(Ms);createViewTransition=_(gl,{optional:!0});navigationErrorHandler=_(vl,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>w(void 0);rootComponentType=null;constructor(){let e=i=>this.events.next(new hs(i)),r=i=>this.events.next(new fs(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;this.transitions?.next(k(m(m({},this.transitions.value),e),{id:r}))}setupNavigations(e,r,i){return this.transitions=new ee({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:dr,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(me(s=>s.id!==0),D(s=>k(m({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),J(s=>{let o=!1,a=!1;return w(s).pipe(J(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",X.SupersededByNewNavigation),Re;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?k(m({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=l.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!c&&u!=="reload"){let d="";return this.events.next(new Ue(l.id,this.urlSerializer.serialize(l.rawUrl),d,On.IgnoredSameUrlNavigation)),l.resolve(!1),Re}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return w(l).pipe(J(d=>{let p=this.transitions?.getValue();return this.events.next(new St(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),p!==this.transitions?.getValue()?Re:Promise.resolve(d)}),fh(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),B(d=>{s.targetSnapshot=d.targetSnapshot,s.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=k(m({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let p=new In(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:d,extractedUrl:p,source:f,restoredState:y,extras:v}=l,g=new St(d,this.urlSerializer.serialize(p),f,y);this.events.next(g);let R=rl(this.rootComponentType).snapshot;return this.currentTransition=s=k(m({},l),{targetSnapshot:R,urlAfterRedirects:p,extras:k(m({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,w(s)}else{let d="";return this.events.next(new Ue(l.id,this.urlSerializer.serialize(l.extractedUrl),d,On.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Re}}),B(l=>{let c=new ls(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),D(l=>(this.currentTransition=s=k(m({},l),{guards:kd(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),Gd(this.environmentInjector,l=>this.events.next(l)),B(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw Un(this.urlSerializer,l.guardsResult);let c=new cs(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),me(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",X.GuardRejected),!1)),rs(l=>{if(l.guards.canActivateChecks.length)return w(l).pipe(B(c=>{let u=new us(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),J(c=>{let u=!1;return w(c).pipe(ph(this.paramsInheritanceStrategy,this.environmentInjector),B({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",X.NoDataFromResolver)}}))}),B(c=>{let u=new ds(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),rs(l=>{let c=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(B(p=>{u.component=p}),D(()=>{})));for(let p of u.children)d.push(...c(p));return d};return sn(c(l.targetSnapshot.root)).pipe(Oi(null),ut(1))}),rs(()=>this.afterPreactivation()),J(()=>{let{currentSnapshot:l,targetSnapshot:c}=s,u=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return u?$(u).pipe(D(()=>s)):w(s)}),D(l=>{let c=Rd(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=k(m({},l),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,s}),B(()=>{this.events.next(new gr)}),Md(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),ut(1),B({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new de(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),Do(this.transitionAbortSubject.pipe(B(l=>{throw l}))),dt(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",X.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),ct(l=>{if(a=!0,al(l))this.events.next(new we(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),Id(l)?this.events.next(new Et(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let c=new pr(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let u=te(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(u instanceof vr){let{message:d,cancellationCode:p}=Un(this.urlSerializer,u);this.events.next(new we(s.id,this.urlSerializer.serialize(s.extractedUrl),d,p)),this.events.next(new Et(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(c),l}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return Re}))}))}cancelNavigationTransition(e,r,i){let s=new we(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xh(n){return n!==dr}var Th=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:()=>_(Ah),providedIn:"root"})}return n})(),Rs=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},Ah=(()=>{class n extends Rs{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Me(n)))(i||n)}})();static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:()=>_(Rh),providedIn:"root"})}return n})(),Rh=(()=>{class n extends yl{location=_(Zt);urlSerializer=_(Cr);options=_(Tr,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=_(Ms);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new be;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=rl(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&e(r.url,r.state)})}handleRouterEvent(e,r){if(e instanceof St)this.stateMemento=this.createStateMemento();else if(e instanceof Ue)this.rawUrlTree=r.initialUrl;else if(e instanceof In){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else e instanceof gr?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):e instanceof we&&(e.code===X.GuardRejected||e.code===X.NoDataFromResolver)?this.restoreHistory(r):e instanceof pr?this.restoreHistory(r,!0):e instanceof de&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,r){let i=e instanceof be?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=m(m({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=m(m({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===e.finalUrl&&s===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Me(n)))(i||n)}})();static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cr=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(cr||{});function _l(n,t){n.events.pipe(me(e=>e instanceof de||e instanceof we||e instanceof pr||e instanceof Ue),D(e=>e instanceof de||e instanceof Ue?cr.COMPLETE:(e instanceof we?e.code===X.Redirect||e.code===X.SupersededByNewNavigation:!1)?cr.REDIRECTING:cr.FAILED),me(e=>e!==cr.REDIRECTING),ut(1)).subscribe(()=>{t()})}var Dh={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Oh={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ce=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=_(ln);stateManager=_(yl);options=_(Tr,{optional:!0})||{};pendingTasks=_(an);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=_(ks);urlSerializer=_(Cr);location=_(Zt);urlHandlingStrategy=_(Ms);_events=new oe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=_(Th);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=_(wr,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!_(Vn,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new _o;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof we&&r.code!==X.Redirect&&r.code!==X.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof de)this.navigated=!0;else if(r instanceof Et){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=m({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||xh(i.source)},o);this.scheduleNavigation(a,dr,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Mh(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),dr,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",r)},0)})}navigateToSyncWithBrowser(e,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let l=m({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Os),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=m(m({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let p=i?i.snapshot:this.routerState.snapshot.root;d=Xa(p)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),d=this.currentUrlTree.root}return Za(d,e,u,c??null)}navigateByUrl(e,r={skipLocationChange:!1}){let i=Ze(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,dr,null,r)}navigate(e,r={skipLocationChange:!1}){return Ih(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,r){let i;if(r===!0?i=m({},Dh):r===!1?i=m({},Oh):i=r,Ze(e))return Ma(this.currentUrlTree,e,i);let s=this.parseUrl(e);return Ma(this.currentUrlTree,s,i)}removeEmptyProps(e){return Object.entries(e).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(e,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,p)=>{a=d,l=p});let u=this.pendingTasks.add();return _l(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ih(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new M(4008,!1)}function Mh(n){return!(n instanceof gr)&&!(n instanceof Et)}var jg=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new oe;constructor(e,r,i,s,o,a){this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a;let l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof de&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ze(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let r=this.href===null?null:qo(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(e,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,e,r):i.removeAttribute(s,e)}get urlTree(){return this.routerLinkInput===null?null:Ze(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(x(Ce),x(Fe),ko("tabindex"),x(Kt),x(Ht),x(Xt))};static \u0275dir=L({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Je("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&Yt("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ke],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ke],replaceUrl:[2,"replaceUrl","replaceUrl",Ke],routerLink:"routerLink"},features:[Qo,ve]})}return n})();var Ln=class{};var kh=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(e,r,i,s,o){this.router=e,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(me(e=>e instanceof de),De(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Ui(s.providers,e,`Route: ${s.path}`));let o=s._injector??e,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return $(i).pipe(Ri())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(e,r):i=w(null);let s=i.pipe(W(o=>o===null?w(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return $([s,o]).pipe(Ri())}else return s})}static \u0275fac=function(r){return new(r||n)(S(Ce),S(hn),S(qe),S(Ln),S(Is))};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wl=new O(""),Ph=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(e,r,i,s,o={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof St?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof de?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Ue&&e.code===On.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Mn&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Mn(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){Ho()};static \u0275prov=E({token:n,factory:n.\u0275fac})}return n})();function Ng(n,...t){return qt([{provide:wr,multi:!0,useValue:n},[],{provide:Fe,useFactory:bl,deps:[Ce]},{provide:un,multi:!0,useFactory:Cl},t.map(e=>e.\u0275providers)])}function bl(n){return n.routerState.root}function Ar(n,t){return{\u0275kind:n,\u0275providers:t}}function Cl(){let n=_(on);return t=>{let e=n.get(dn);if(t!==e.components[0])return;let r=n.get(Ce),i=n.get(Sl);n.get(Ps)===1&&r.initialNavigation(),n.get(El,null,Mi.Optional)?.setUpPreloading(),n.get(wl,null,Mi.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Sl=new O("",{factory:()=>new oe}),Ps=new O("",{providedIn:"root",factory:()=>1});function jh(){return Ar(2,[{provide:Ps,useValue:0},{provide:Fi,multi:!0,deps:[on],useFactory:t=>{let e=t.get(na,Promise.resolve());return()=>e.then(()=>new Promise(r=>{let i=t.get(Ce),s=t.get(Sl);_l(i,()=>{r(!0)}),t.get(ks).afterPreactivation=()=>(r(!0),s.closed?w(void 0):s),i.initialNavigation()}))}}])}function Nh(){return Ar(3,[{provide:Fi,multi:!0,useFactory:()=>{let t=_(Ce);return()=>{t.setUpLocationChangeListener()}}},{provide:Ps,useValue:2}])}var El=new O("");function Uh(n){return Ar(0,[{provide:El,useExisting:kh},{provide:Ln,useExisting:n}])}function Fh(){return Ar(8,[Na,{provide:Vn,useExisting:Na}])}function Lh(n){let t=[{provide:gl,useValue:Sh},{provide:ml,useValue:m({skipNextTransition:!!n?.skipInitialTransition},n)}];return Ar(9,t)}var Va=new O("ROUTER_FORROOT_GUARD"),Vh=[Zt,{provide:Cr,useClass:Ct},Ce,Er,{provide:Fe,useFactory:bl,deps:[Ce]},Is,[]],Ug=(()=>{class n{constructor(e){}static forRoot(e,r){return{ngModule:n,providers:[Vh,[],{provide:wr,multi:!0,useValue:e},{provide:Va,useFactory:Gh,deps:[[Ce,new ki,new Io]]},r?.errorHandler?{provide:vl,useValue:r.errorHandler}:[],{provide:Tr,useValue:r||{}},r?.useHash?Bh():zh(),$h(),r?.preloadingStrategy?Uh(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?qh(r):[],r?.bindToComponentInputs?Fh().\u0275providers:[],r?.enableViewTransitions?Lh().\u0275providers:[],Hh()]}}static forChild(e){return{ngModule:n,providers:[{provide:wr,multi:!0,useValue:e}]}}static \u0275fac=function(r){return new(r||n)(S(Va,8))};static \u0275mod=ke({type:n});static \u0275inj=Ie({})}return n})();function $h(){return{provide:wl,useFactory:()=>{let n=_(aa),t=_(le),e=_(Tr),r=_(ks),i=_(Cr);return e.scrollOffset&&n.setOffset(e.scrollOffset),new Ph(i,r,n,t,e)}}}function Bh(){return{provide:Xt,useClass:sa}}function zh(){return{provide:Xt,useClass:ia}}function Gh(n){return"guarded"}function qh(n){return[n.initialNavigation==="disabled"?Nh().\u0275providers:[],n.initialNavigation==="enabledBlocking"?jh().\u0275providers:[]]}var $a=new O("");function Hh(){return[{provide:$a,useFactory:Cl},{provide:un,multi:!0,useExisting:$a}]}var kl=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,r){this._renderer=e,this._elementRef=r}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(r){return new(r||n)(x(Kt),x(Ht))};static \u0275dir=L({type:n})}return n})(),Pl=(()=>{class n extends kl{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Me(n)))(i||n)}})();static \u0275dir=L({type:n,features:[Y]})}return n})(),jr=new O(""),Wh={provide:jr,useExisting:ae(()=>Jh),multi:!0},Jh=(()=>{class n extends Pl{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Me(n)))(i||n)}})();static \u0275dir=L({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&Je("change",function(o){return i.onChange(o.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[ce([Wh]),Y]})}return n})(),Kh={provide:jr,useExisting:ae(()=>jl),multi:!0};function Yh(){let n=Ye()?Ye().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Qh=new O(""),jl=(()=>{class n extends kl{_compositionMode;_composing=!1;constructor(e,r,i){super(e,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!Yh())}writeValue(e){let r=e??"";this.setProperty("value",r)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(r){return new(r||n)(x(Kt),x(Ht),x(Qh,8))};static \u0275dir=L({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Je("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[ce([Kh]),Y]})}return n})();function Ve(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function Nl(n){return n!=null&&typeof n.length=="number"}var et=new O(""),Nr=new O(""),Xh=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,xl=class{static min(t){return Zh(t)}static max(t){return ef(t)}static required(t){return Ul(t)}static requiredTrue(t){return tf(t)}static email(t){return rf(t)}static minLength(t){return nf(t)}static maxLength(t){return Fl(t)}static pattern(t){return sf(t)}static nullValidator(t){return zn(t)}static compose(t){return Gl(t)}static composeAsync(t){return ql(t)}};function Zh(n){return t=>{if(Ve(t.value)||Ve(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function ef(n){return t=>{if(Ve(t.value)||Ve(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function Ul(n){return Ve(n.value)?{required:!0}:null}function tf(n){return n.value===!0?null:{required:!0}}function rf(n){return Ve(n.value)||Xh.test(n.value)?null:{email:!0}}function nf(n){return t=>Ve(t.value)||!Nl(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}function Fl(n){return t=>Nl(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function sf(n){if(!n)return zn;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),r=>{if(Ve(r.value))return null;let i=r.value;return t.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}function zn(n){return null}function Ll(n){return n!=null}function Vl(n){return cn(n)?$(n):n}function $l(n){let t={};return n.forEach(e=>{t=e!=null?m(m({},t),e):t}),Object.keys(t).length===0?null:t}function Bl(n,t){return t.map(e=>e(n))}function of(n){return!n.validate}function zl(n){return n.map(t=>of(t)?t:e=>t.validate(e))}function Gl(n){if(!n)return null;let t=n.filter(Ll);return t.length==0?null:function(e){return $l(Bl(e,t))}}function Vs(n){return n!=null?Gl(zl(n)):null}function ql(n){if(!n)return null;let t=n.filter(Ll);return t.length==0?null:function(e){let r=Bl(e,t).map(Vl);return Eo(r).pipe(D($l))}}function $s(n){return n!=null?ql(zl(n)):null}function Tl(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Hl(n){return n._rawValidators}function Wl(n){return n._rawAsyncValidators}function js(n){return n?Array.isArray(n)?n:[n]:[]}function Gn(n,t){return Array.isArray(n)?n.includes(t):n===t}function Al(n,t){let e=js(t);return js(n).forEach(i=>{Gn(e,i)||e.push(i)}),e}function Rl(n,t){return js(t).filter(e=>!Gn(n,e))}var qn=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Vs(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=$s(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Se=class extends qn{name;get formDirective(){return null}get path(){return null}},Ee=class extends qn{_parent=null;name=null;valueAccessor=null},Hn=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},af={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},tm=k(m({},af),{"[class.ng-submitted]":"isSubmitted"}),rm=(()=>{class n extends Hn{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(x(Ee,2))};static \u0275dir=L({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Li("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Y]})}return n})(),nm=(()=>{class n extends Hn{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(x(Se,10))};static \u0275dir=L({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Li("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Y]})}return n})();var Rr="VALID",Bn="INVALID",At="PENDING",Dr="DISABLED",$e=class{},Wn=class extends $e{value;source;constructor(t,e){super(),this.value=t,this.source=e}},Ir=class extends $e{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},Mr=class extends $e{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},Rt=class extends $e{status;source;constructor(t,e){super(),this.status=t,this.source=e}},Ns=class extends $e{source;constructor(t){super(),this.source=t}},Us=class extends $e{source;constructor(t){super(),this.source=t}};function Bs(n){return(Qn(n)?n.validators:n)||null}function lf(n){return Array.isArray(n)?Vs(n):n||null}function zs(n,t){return(Qn(t)?t.asyncValidators:n)||null}function cf(n){return Array.isArray(n)?$s(n):n||null}function Qn(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Jl(n,t,e){let r=n.controls;if(!(t?Object.keys(r):r).length)throw new M(1e3,"");if(!r[e])throw new M(1001,"")}function Kl(n,t,e){n._forEachChild((r,i)=>{if(e[i]===void 0)throw new M(1002,"")})}var Dt=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return ye(this.statusReactive)}set status(t){ye(()=>this.statusReactive.set(t))}_status=gt(()=>this.statusReactive());statusReactive=pt(void 0);get valid(){return this.status===Rr}get invalid(){return this.status===Bn}get pending(){return this.status==At}get disabled(){return this.status===Dr}get enabled(){return this.status!==Dr}errors;get pristine(){return ye(this.pristineReactive)}set pristine(t){ye(()=>this.pristineReactive.set(t))}_pristine=gt(()=>this.pristineReactive());pristineReactive=pt(!0);get dirty(){return!this.pristine}get touched(){return ye(this.touchedReactive)}set touched(t){ye(()=>this.touchedReactive.set(t))}_touched=gt(()=>this.touchedReactive());touchedReactive=pt(!1);get untouched(){return!this.touched}_events=new oe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Al(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Al(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Rl(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Rl(t,this._rawAsyncValidators))}hasValidator(t){return Gn(this._rawValidators,t)}hasAsyncValidator(t){return Gn(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(k(m({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new Mr(!0,r))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),e&&t.emitEvent!==!1&&this._events.next(new Mr(!1,r))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(k(m({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new Ir(!1,r))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),e&&t.emitEvent!==!1&&this._events.next(new Ir(!0,r))}markAsPending(t={}){this.status=At;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Rt(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(k(m({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Dr,this.errors=null,this._forEachChild(i=>{i.disable(k(m({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Wn(this.value,r)),this._events.next(new Rt(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(k(m({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Rr,this._forEachChild(r=>{r.enable(k(m({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(k(m({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rr||this.status===At)&&this._runAsyncValidator(r,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Wn(this.value,e)),this._events.next(new Rt(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(k(m({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Dr:Rr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=At,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let r=Vl(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((r,i)=>r&&r._find(i),this)}getError(t,e){let r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new Rt(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,r)}_initObservables(){this.valueChanges=new K,this.statusChanges=new K}_calculateStatus(){return this._allControlsDisabled()?Dr:this.errors?Bn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(At)?At:this._anyControlsHaveStatus(Bn)?Bn:Rr}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),i&&this._events.next(new Ir(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Mr(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Qn(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=lf(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=cf(this._rawAsyncValidators)}},Ot=class extends Dt{constructor(t,e,r){super(Bs(e),zs(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){Kl(this,!0,t),Object.keys(t).forEach(r=>{Jl(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>r._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,r]of Object.entries(this.controls))if(this.contains(e)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,r,i)=>((r.enabled||this.disabled)&&(e[i]=r.value),e))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,s)=>{r=e(r,i,s)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Fs=class extends Ot{};var It=new O("CallSetDisabledState",{providedIn:"root",factory:()=>Xn}),Xn="always";function Yl(n,t){return[...t.path,n]}function Pr(n,t,e=Xn){Gs(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),df(n,t),ff(n,t),hf(n,t),uf(n,t)}function Jn(n,t,e=!0){let r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),Yn(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Kn(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function uf(n,t){if(t.valueAccessor.setDisabledState){let e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function Gs(n,t){let e=Hl(n);t.validator!==null?n.setValidators(Tl(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let r=Wl(n);t.asyncValidator!==null?n.setAsyncValidators(Tl(r,t.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Kn(t._rawValidators,i),Kn(t._rawAsyncValidators,i)}function Yn(n,t){let e=!1;if(n!==null){if(t.validator!==null){let i=Hl(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==t.validator);s.length!==i.length&&(e=!0,n.setValidators(s))}}if(t.asyncValidator!==null){let i=Wl(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==t.asyncValidator);s.length!==i.length&&(e=!0,n.setAsyncValidators(s))}}}let r=()=>{};return Kn(t._rawValidators,r),Kn(t._rawAsyncValidators,r),e}function df(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Ql(n,t)})}function hf(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Ql(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function Ql(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ff(n,t){let e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function Xl(n,t){n==null,Gs(n,t)}function pf(n,t){return Yn(n,t)}function qs(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function gf(n){return Object.getPrototypeOf(n.constructor)===Pl}function Zl(n,t){n._syncPendingControls(),t.forEach(e=>{let r=e.control;r.updateOn==="submit"&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Hs(n,t){if(!t)return null;Array.isArray(t);let e,r,i;return t.forEach(s=>{s.constructor===jl?e=s:gf(s)?r=s:i=s}),i||r||e||null}function mf(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}var vf={provide:Se,useExisting:ae(()=>yf)},Or=Promise.resolve(),yf=(()=>{class n extends Se{callSetDisabledState;get submitted(){return ye(this.submittedReactive)}_submitted=gt(()=>this.submittedReactive());submittedReactive=pt(!1);_directives=new Set;form;ngSubmit=new K;options;constructor(e,r,i){super(),this.callSetDisabledState=i,this.form=new Ot({},Vs(e),$s(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Or.then(()=>{let r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),Pr(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Or.then(()=>{let r=this._findContainer(e.path);r&&r.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Or.then(()=>{let r=this._findContainer(e.path),i=new Ot({});Xl(i,e),r.registerControl(e.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Or.then(()=>{let r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){Or.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),Zl(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(r){return new(r||n)(x(et,10),x(Nr,10),x(It,8))};static \u0275dir=L({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Je("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ce([vf]),Y]})}return n})();function Dl(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function Ol(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var kr=class extends Dt{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,r){super(Bs(e),zs(r,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Qn(e)&&(e.nonNullable||e.initialValueIsDefault)&&(Ol(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Dl(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Dl(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Ol(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var _f=n=>n instanceof kr;var wf={provide:Ee,useExisting:ae(()=>bf)},Il=Promise.resolve(),bf=(()=>{class n extends Ee{_changeDetectorRef;callSetDisabledState;control=new kr;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new K;constructor(e,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Hs(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),qs(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Pr(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){Il.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let r=e.isDisabled.currentValue,i=r!==0&&Ke(r);Il.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?Yl(e,this._parent):[e]}static \u0275fac=function(r){return new(r||n)(x(Se,9),x(et,10),x(Nr,10),x(jr,10),x(Qt,8),x(It,8))};static \u0275dir=L({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ce([wf]),Y,ve]})}return n})(),sm=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=L({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var Ws=new O(""),Cf={provide:Ee,useExisting:ae(()=>Sf)},Sf=(()=>{class n extends Ee{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(e){}model;update=new K;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,r,i,s,o){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=o,this._setValidators(e),this._setAsyncValidators(r),this.valueAccessor=Hs(this,i)}ngOnChanges(e){if(this._isControlChanged(e)){let r=e.form.previousValue;r&&Jn(r,this,!1),Pr(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}qs(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Jn(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}static \u0275fac=function(r){return new(r||n)(x(et,10),x(Nr,10),x(jr,10),x(Ws,8),x(It,8))};static \u0275dir=L({type:n,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[ce([Cf]),Y,ve]})}return n})(),Ef={provide:Se,useExisting:ae(()=>xf)},xf=(()=>{class n extends Se{callSetDisabledState;get submitted(){return ye(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=gt(()=>this._submittedReactive());_submittedReactive=pt(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new K;constructor(e,r,i){super(),this.callSetDisabledState=i,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Yn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let r=this.form.get(e.path);return Pr(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){Jn(e.control||null,e,!1),mf(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this._submittedReactive.set(!0),Zl(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new Ns(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new Us(this.form))}_updateDomValue(){this.directives.forEach(e=>{let r=e.control,i=this.form.get(e.path);r!==i&&(Jn(r||null,e),_f(i)&&(Pr(i,e,this.callSetDisabledState),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let r=this.form.get(e.path);Xl(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let r=this.form.get(e.path);r&&pf(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Gs(this.form,this),this._oldForm&&Yn(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)(x(et,10),x(Nr,10),x(It,8))};static \u0275dir=L({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&Je("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ce([Ef]),Y,ve]})}return n})();var Tf={provide:Ee,useExisting:ae(()=>Af)},Af=(()=>{class n extends Ee{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new K;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,r,i,s,o){super(),this._ngModelWarningConfig=o,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Hs(this,s)}ngOnChanges(e){this._added||this._setUpControl(),qs(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return Yl(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(x(Se,13),x(et,10),x(Nr,10),x(jr,10),x(Ws,8))};static \u0275dir=L({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[ce([Tf]),Y,ve]})}return n})();function Rf(n){return typeof n=="number"?n:parseInt(n,10)}var ec=(()=>{class n{_validator=zn;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let r=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):zn,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=L({type:n,features:[ve]})}return n})();var Df={provide:et,useExisting:ae(()=>Of),multi:!0};var Of=(()=>{class n extends ec{required;inputName="required";normalizeInput=Ke;createValidator=e=>Ul;enabled(e){return e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Me(n)))(i||n)}})();static \u0275dir=L({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Yt("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[ce([Df]),Y]})}return n})();var If={provide:et,useExisting:ae(()=>Mf),multi:!0},Mf=(()=>{class n extends ec{maxlength;inputName="maxlength";normalizeInput=e=>Rf(e);createValidator=e=>Fl(e);static \u0275fac=(()=>{let e;return function(i){return(e||(e=Me(n)))(i||n)}})();static \u0275dir=L({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Yt("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[ce([If]),Y]})}return n})();var tc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ke({type:n});static \u0275inj=Ie({})}return n})(),Ls=class extends Dt{constructor(t,e,r){super(Bs(e),zs(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),e&&(this.controls.splice(i,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){Kl(this,!1,t),t.forEach((r,i)=>{Jl(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,r)=>r._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function Ml(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var kf=(()=>{class n{useNonNullable=!1;get nonNullable(){let e=new n;return e.useNonNullable=!0,e}group(e,r=null){let i=this._reduceControls(e),s={};return Ml(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Ot(i,s)}record(e,r=null){let i=this._reduceControls(e);return new Fs(i,r)}control(e,r,i){let s={};return this.useNonNullable?(Ml(r)?s=r:(s.validators=r,s.asyncValidators=i),new kr(e,k(m({},s),{nonNullable:!0}))):new kr(e,r,i)}array(e,r,i){let s=e.map(o=>this._createControl(o));return new Ls(s,r,i)}_reduceControls(e){let r={};return Object.keys(e).forEach(i=>{r[i]=this._createControl(e[i])}),r}_createControl(e){if(e instanceof kr)return e;if(e instanceof Dt)return e;if(Array.isArray(e)){let r=e[0],i=e.length>1?e[1]:null,s=e.length>2?e[2]:null;return this.control(r,i,s)}else return this.control(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),om=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:()=>_(kf).nonNullable,providedIn:"root"})}return n})();var am=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:It,useValue:e.callSetDisabledState??Xn}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ke({type:n});static \u0275inj=Ie({imports:[tc]})}return n})(),lm=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Ws,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:It,useValue:e.callSetDisabledState??Xn}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ke({type:n});static \u0275inj=Ie({imports:[tc]})}return n})();function Zn(n){"@babel/helpers - typeof";return Zn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zn(n)}function Ur(n,t){if(t.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+t.length+" present")}function Js(n){Ur(1,arguments);var t=Object.prototype.toString.call(n);return n instanceof Date||Zn(n)==="object"&&t==="[object Date]"?new Date(n.getTime()):typeof n=="number"||t==="[object Number]"?new Date(n):((typeof n=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function he(n,t){for(var e=n<0?"-":"",r=Math.abs(n).toString();r.length<t;)r="0"+r;return e+r}function rc(n,t){var e,r;Ur(1,arguments);var i=Js(n);if(isNaN(i.getTime()))throw new RangeError("Invalid time value");var s=String((e=t?.format)!==null&&e!==void 0?e:"extended"),o=String((r=t?.representation)!==null&&r!==void 0?r:"complete");if(s!=="extended"&&s!=="basic")throw new RangeError("format must be 'extended' or 'basic'");if(o!=="date"&&o!=="time"&&o!=="complete")throw new RangeError("representation must be 'date', 'time', or 'complete'");var a="",l="",c=s==="extended"?"-":"",u=s==="extended"?":":"";if(o!=="time"){var d=he(i.getDate(),2),p=he(i.getMonth()+1,2),f=he(i.getFullYear(),4);a="".concat(f).concat(c).concat(p).concat(c).concat(d)}if(o!=="date"){var y=i.getTimezoneOffset();if(y!==0){var v=Math.abs(y),g=he(Math.floor(v/60),2),R=he(v%60,2),j=y<0?"+":"-";l="".concat(j).concat(g,":").concat(R)}else l="Z";var A=he(i.getHours(),2),U=he(i.getMinutes(),2),F=he(i.getSeconds(),2),G=a===""?"":"T",nn=[A,U,F].join(u);a="".concat(a).concat(G).concat(nn).concat(l)}return a}var nc=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-NPJLHOA5.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)};var Fr=class extends Error{constructor(t,e="FunctionsError",r){super(t),this.name=e,this.context=r}},ei=class extends Fr{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},ti=class extends Fr{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},ri=class extends Fr{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},Ks=function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n}(Ks||{});var Pf=function(n,t,e,r){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},Lr=class{constructor(t,{headers:e={},customFetch:r,region:i=Ks.Any}={}){this.url=t,this.headers=e,this.region=i,this.fetch=nc(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,e={}){var r;return Pf(this,void 0,void 0,function*(){try{let{headers:i,method:s,body:o}=e,a={},{region:l}=e;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));let u=yield this.fetch(`${this.url}/${t}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(y=>{throw new ei(y)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new ti(u);if(!u.ok)throw new ri(u);let p=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return p==="application/json"?f=yield u.json():p==="application/octet-stream"?f=yield u.blob():p==="text/event-stream"?f=u:p==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(i){return{data:null,error:i}}})}};var mc=Zc(gc(),1),{PostgrestClient:vc,PostgrestQueryBuilder:$m,PostgrestFilterBuilder:Bm,PostgrestTransformBuilder:zm,PostgrestBuilder:Gm,PostgrestError:Hf}=mc.default;var yc="2.11.2";var _c={"X-Client-Info":`realtime-js/${yc}`},wc="1.0.0",oi=1e4,bc=1e3,kt=function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n}(kt||{}),Z=function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n}(Z||{}),ne=function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n}(ne||{}),ao=function(n){return n.websocket="websocket",n}(ao||{}),tt=function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n}(tt||{});var ai=class{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){let e=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,e,r)}_decodeBroadcast(t,e,r){let i=e.getUint8(1),s=e.getUint8(2),o=this.HEADER_LENGTH+2,a=r.decode(t.slice(o,o+i));o=o+i;let l=r.decode(t.slice(o,o+s));o=o+s;let c=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}};var Pt=class{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var P=function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n}(P||{}),co=(n,t,e={})=>{var r;let i=(r=e.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((s,o)=>(s[o]=Wf(o,n,t,i),s),{})},Wf=(n,t,e,r)=>{let i=t.find(a=>a.name===n),s=i?.type,o=e[n];return s&&!r.includes(s)?Cc(s,o):lo(o)},Cc=(n,t)=>{if(n.charAt(0)==="_"){let e=n.slice(1,n.length);return Qf(t,e)}switch(n){case P.bool:return Jf(t);case P.float4:case P.float8:case P.int2:case P.int4:case P.int8:case P.numeric:case P.oid:return Kf(t);case P.json:case P.jsonb:return Yf(t);case P.timestamp:return Xf(t);case P.abstime:case P.date:case P.daterange:case P.int4range:case P.int8range:case P.money:case P.reltime:case P.text:case P.time:case P.timestamptz:case P.timetz:case P.tsrange:case P.tstzrange:return lo(t);default:return lo(t)}},lo=n=>n,Jf=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Kf=n=>{if(typeof n=="string"){let t=parseFloat(n);if(!Number.isNaN(t))return t}return n},Yf=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},Qf=(n,t)=>{if(typeof n!="string")return n;let e=n.length-1,r=n[e];if(n[0]==="{"&&r==="}"){let s,o=n.slice(1,e);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>Cc(t,a))}return n},Xf=n=>typeof n=="string"?n.replace(" ","T"):n,li=n=>{let t=n;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};var jt=class{constructor(t,e,r={},i=oi){this.channel=t,this.event=e,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var r;return this._hasReceived(t)&&e((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var Hr=class n{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=n.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=n.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,r,i){let s=this.cloneDeep(t),o=this.transformState(e),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{let d=s[c];if(d){let p=u.map(g=>g.presence_ref),f=d.map(g=>g.presence_ref),y=u.filter(g=>f.indexOf(g.presence_ref)<0),v=d.filter(g=>p.indexOf(g.presence_ref)<0);y.length>0&&(a[c]=y),v.length>0&&(l[c]=v)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(t,e,r,i){let{joins:s,leaves:o}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;let u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){let d=t[a].map(f=>f.presence_ref),p=u.filter(f=>d.indexOf(f.presence_ref)<0);t[a].unshift(...p)}r(a,u,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;let u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=c,i(a,c,l),c.length===0&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(r=>e(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,r)=>{let i=t[r];return"metas"in i?e[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):e[r]=i,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var xe=function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n}(xe||{});var Wr=class n{constructor(t,e={config:{}},r){this.topic=t,this.params=e,this.socket=r,this.bindings={},this.state=Z.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new jt(this,ne.join,this.params,this.timeout),this.rejoinTimer=new Pt(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Z.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Z.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Z.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Z.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ne.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Hr(this),this.broadcastEndpointURL=li(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,e=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(u=>t?.(xe.CHANNEL_ERROR,u)),this._onClose(()=>t?.(xe.CLOSED));let l={},c={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",d=>h(this,[d],function*({postgres_changes:u}){var p;if(this.socket.setAuth(),u===void 0){t?.(xe.SUBSCRIBED);return}else{let f=this.bindings.postgres_changes,y=(p=f?.length)!==null&&p!==void 0?p:0,v=[];for(let g=0;g<y;g++){let R=f[g],{filter:{event:j,schema:A,table:U,filter:F}}=R,G=u&&u[g];if(G&&G.event===j&&G.schema===A&&G.table===U&&G.filter===F)v.push(Object.assign(Object.assign({},R),{id:G.id}));else{this.unsubscribe(),t?.(xe.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(xe.SUBSCRIBED);return}})).receive("error",u=>{t?.(xe.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t?.(xe.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(r){return h(this,arguments,function*(t,e={}){return yield this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)})}untrack(){return h(this,arguments,function*(t={}){return yield this.send({type:"presence",event:"untrack"},t)})}on(t,e,r){return this._on(t,e,r)}send(r){return h(this,arguments,function*(t,e={}){var i,s;if(!this._canPush()&&t.type==="broadcast"){let{event:o,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{let u=yield this._fetchWithTimeout(this.broadcastEndpointURL,c,(i=e.timeout)!==null&&i!==void 0?i:this.timeout);return yield(s=u.body)===null||s===void 0?void 0:s.cancel(),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,l,c;let u=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Z.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ne.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{let i=new jt(this,ne.leave,{},t);i.receive("ok",()=>{e(),r("ok")}).receive("timeout",()=>{e(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_fetchWithTimeout(t,e,r){return h(this,null,function*(){let i=new AbortController,s=setTimeout(()=>i.abort(),r),o=yield this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(s),o})}_push(t,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new jt(this,t,e,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,e,r){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,r){var i,s;let o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=ne;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,e,r);if(e&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var y,v,g;return((y=f.filter)===null||y===void 0?void 0:y.event)==="*"||((g=(v=f.filter)===null||v===void 0?void 0:v.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(f=>f.callback(p,r)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var y,v,g,R,j,A;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){let U=f.id,F=(y=f.filter)===null||y===void 0?void 0:y.event;return U&&((v=e.ids)===null||v===void 0?void 0:v.includes(U))&&(F==="*"||F?.toLocaleLowerCase()===((g=e.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{let U=(j=(R=f?.filter)===null||R===void 0?void 0:R.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return U==="*"||U===((A=e?.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof p=="object"&&"ids"in p){let y=p.data,{schema:v,table:g,commit_timestamp:R,type:j,errors:A}=y;p=Object.assign(Object.assign({},{schema:v,table:g,commit_timestamp:R,eventType:j,new:{},old:{},errors:A}),this._getPayloadRecords(y))}f.callback(p,r)})}_isClosed(){return this.state===Z.closed}_isJoined(){return this.state===Z.joined}_isJoining(){return this.state===Z.joining}_isLeaving(){return this.state===Z.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,r){let i=t.toLocaleLowerCase(),s={type:i,filter:e,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,e){let r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&n.isEqual(i.filter,e))}),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let r in t)if(t[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ne.close,{},t)}_onError(t){this._on(ne.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Z.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=co(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=co(t.columns,t.old_record)),e}};var ep=()=>{},tp=typeof WebSocket<"u",rp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Jr=class{constructor(t,e){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=_c,this.params={},this.timeout=oi,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=ep,this.conn=null,this.sendBuffer=[],this.serializer=new ai,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>import("./chunk-NPJLHOA5.js").then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${t}/${ao.websocket}`,this.httpEndpoint=li(t),e?.transport?this.transport=e.transport:this.transport=null,e?.params&&(this.params=e.params),e?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),e.headers)),e?.timeout&&(this.timeout=e.timeout),e?.logger&&(this.logger=e.logger),e?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=e.heartbeatIntervalMs);let i=(r=e?.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=e?.reconnectAfterMs?e.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=e?.encode?e.encode:(s,o)=>o(JSON.stringify(s)),this.decode=e?.decode?e.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Pt(()=>h(this,null,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(e?.fetch),e?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=e?.worker||!1,this.workerUrl=e?.workerUrl}this.accessToken=e?.accessToken||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(tp){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new uo(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),import("./chunk-GFTZZNGD.js").then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:wc}))}disconnect(t,e){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,e??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(t){return h(this,null,function*(){let e=yield t.unsubscribe();return this.channels.length===0&&this.disconnect(),e})}removeAllChannels(){return h(this,null,function*(){let t=yield Promise.all(this.channels.map(e=>e.unsubscribe()));return this.disconnect(),t})}log(t,e,r){this.logger(t,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case kt.connecting:return tt.Connecting;case kt.open:return tt.Open;case kt.closing:return tt.Closing;default:return tt.Closed}}isConnected(){return this.connectionState()===tt.Open}channel(t,e={config:{}}){let r=new Wr(`realtime:${t}`,e,this);return this.channels.push(r),r}push(t){let{topic:e,event:r,payload:i,ref:s}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${e} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(t=null){return h(this,null,function*(){let e=t||this.accessToken&&(yield this.accessToken())||this.accessTokenValue;if(e){let r=null;try{r=JSON.parse(atob(e.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=e,this.channels.forEach(i=>{e&&i.updateJoinPayload({access_token:e}),i.joinedOnce&&i._isJoined()&&i._push(ne.access_token,{access_token:e})})}})}sendHeartbeat(){return h(this,null,function*(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(bc,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}})}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,e=>{let{topic:r,event:i,payload:s,ref:o}=e;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(e))})}_onConnOpen(){return h(this,null,function*(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(e=>e(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(e=>e(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(ne.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;let r=t.match(/\?/)?"&":"?",i=new URLSearchParams(e);return`${t}${r}${i}`}_workerObjectUrl(t){let e;if(t)e=t;else{let r=new Blob([rp],{type:"application/javascript"});e=URL.createObjectURL(r)}return e}};var uo=class{constructor(t,e,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=kt.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}};var Nt=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function N(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var ci=class extends Nt{constructor(t,e){super(t),this.name="StorageApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}},rt=class extends Nt{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};var np=function(n,t,e,r){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},di=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-NPJLHOA5.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},Sc=()=>np(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-NPJLHOA5.js")).Response:Response}),ui=n=>{if(Array.isArray(n))return n.map(e=>ui(e));if(typeof n=="function"||n!==Object(n))return n;let t={};return Object.entries(n).forEach(([e,r])=>{let i=e.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=ui(r)}),t};var nt=function(n,t,e,r){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},ho=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),ip=(n,t,e)=>nt(void 0,void 0,void 0,function*(){let r=yield Sc();n instanceof r&&!e?.noResolveJson?n.json().then(i=>{t(new ci(ho(i),n.status||500))}).catch(i=>{t(new rt(ho(i),i))}):t(new rt(ho(n),n))}),sp=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),e))};function Kr(n,t,e,r,i,s){return nt(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(e,sp(t,r,i,s)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>ip(l,a,r))})})}function Ut(n,t,e,r){return nt(this,void 0,void 0,function*(){return Kr(n,"GET",t,e,r)})}function fe(n,t,e,r,i){return nt(this,void 0,void 0,function*(){return Kr(n,"POST",t,r,i,e)})}function Ec(n,t,e,r,i){return nt(this,void 0,void 0,function*(){return Kr(n,"PUT",t,r,i,e)})}function xc(n,t,e,r){return nt(this,void 0,void 0,function*(){return Kr(n,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),r)})}function hi(n,t,e,r,i){return nt(this,void 0,void 0,function*(){return Kr(n,"DELETE",t,r,i,e)})}var H=function(n,t,e,r){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},op={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Tc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},fi=class{constructor(t,e={},r,i){this.url=t,this.headers=e,this.bucketId=r,this.fetch=di(i)}uploadOrUpdate(t,e,r,i){return H(this,void 0,void 0,function*(){try{let s,o=Object.assign(Object.assign({},Tc),i),a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)}),l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));let c=this._removeEmptyFolders(e),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:s,headers:a},o?.duplex?{duplex:o.duplex}:{})),p=yield d.json();return d.ok?{data:{path:c,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(s){if(N(s))return{data:null,error:s};throw s}})}upload(t,e,r){return H(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,r)})}uploadToSignedUrl(t,e,r,i){return H(this,void 0,void 0,function*(){let s=this._removeEmptyFolders(t),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l,c=Object.assign({upsert:Tc.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);let d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),p=yield d.json();return d.ok?{data:{path:s,fullPath:p.Key},error:null}:{data:null,error:p}}catch(l){if(N(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,e){return H(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),i=Object.assign({},this.headers);e?.upsert&&(i["x-upsert"]="true");let s=yield fe(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new Nt("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(N(r))return{data:null,error:r};throw r}})}update(t,e,r){return H(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,r)})}move(t,e,r){return H(this,void 0,void 0,function*(){try{return{data:yield fe(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(N(i))return{data:null,error:i};throw i}})}copy(t,e,r){return H(this,void 0,void 0,function*(){try{return{data:{path:(yield fe(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(N(i))return{data:null,error:i};throw i}})}createSignedUrl(t,e,r){return H(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield fe(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(N(i))return{data:null,error:i};throw i}})}createSignedUrls(t,e,r){return H(this,void 0,void 0,function*(){try{let i=yield fe(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(N(i))return{data:null,error:i};throw i}})}download(t,e){return H(this,void 0,void 0,function*(){let i=typeof e?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(e?.transform||{}),o=s?`?${s}`:"";try{let a=this._getFinalPath(t);return{data:yield(yield Ut(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(N(a))return{data:null,error:a};throw a}})}info(t){return H(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{let r=yield Ut(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:ui(r),error:null}}catch(r){if(N(r))return{data:null,error:r};throw r}})}exists(t){return H(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{return yield xc(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(N(r)&&r instanceof rt){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,e){let r=this._getFinalPath(t),i=[],s=e?.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&i.push(s);let a=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(t){return H(this,void 0,void 0,function*(){try{return{data:yield hi(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(N(e))return{data:null,error:e};throw e}})}list(t,e,r){return H(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},op),e),{prefix:t||""});return{data:yield fe(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(N(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};var Ac="2.7.1";var Rc={"X-Client-Info":`storage-js/${Ac}`};var Ft=function(n,t,e,r){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},pi=class{constructor(t,e={},r){this.url=t,this.headers=Object.assign(Object.assign({},Rc),e),this.fetch=di(r)}listBuckets(){return Ft(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(N(t))return{data:null,error:t};throw t}})}getBucket(t){return Ft(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(N(e))return{data:null,error:e};throw e}})}createBucket(t,e={public:!1}){return Ft(this,void 0,void 0,function*(){try{return{data:yield fe(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(N(r))return{data:null,error:r};throw r}})}updateBucket(t,e){return Ft(this,void 0,void 0,function*(){try{return{data:yield Ec(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(N(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Ft(this,void 0,void 0,function*(){try{return{data:yield fe(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(N(e))return{data:null,error:e};throw e}})}deleteBucket(t){return Ft(this,void 0,void 0,function*(){try{return{data:yield hi(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(N(e))return{data:null,error:e};throw e}})}};var Yr=class extends pi{constructor(t,e={},r){super(t,e,r)}from(t){return new fi(this.url,this.headers,t,this.fetch)}};var Dc="2.48.0";var Qr="";typeof Deno<"u"?Qr="deno":typeof document<"u"?Qr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Qr="react-native":Qr="node";var ap={"X-Client-Info":`supabase-js-${Qr}/${Dc}`},Oc={headers:ap},Ic={schema:"public"},Mc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},kc={};ua();var lp=function(n,t,e,r){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},cp=n=>{let t;return n?t=n:typeof fetch>"u"?t=la:t=fetch,(...e)=>t(...e)},up=()=>typeof Headers>"u"?ca:Headers,Pc=(n,t,e)=>{let r=cp(e),i=up();return(s,o)=>lp(void 0,void 0,void 0,function*(){var a;let l=(a=yield t())!==null&&a!==void 0?a:n,c=new i(o?.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:c}))})};var dp=function(n,t,e,r){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,t||[])).next())})};function jc(n){return n.replace(/\/$/,"")}function Nc(n,t){let{db:e,auth:r,realtime:i,global:s}=n,{db:o,auth:a,realtime:l,global:c}=t,u={db:Object.assign(Object.assign({},o),e),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),s),accessToken:()=>dp(this,void 0,void 0,function*(){return""})};return n.accessToken?u.accessToken=n.accessToken:delete u.accessToken,u}function Uc(n){return Math.round(Date.now()/1e3)+n}function Fc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let t=Math.random()*16|0;return(n=="x"?t:t&3|8).toString(16)})}var se=()=>typeof document<"u",it={tested:!1,writable:!1},Be=()=>{if(!se())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(it.tested)return it.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),it.tested=!0,it.writable=!0}catch{it.tested=!0,it.writable=!1}return it.writable};function gi(n){let t={},e=new URL(n);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return e.searchParams.forEach((r,i)=>{t[i]=r}),t}var mi=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-NPJLHOA5.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},Lc=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",ze=(n,t,e)=>h(void 0,null,function*(){yield n.setItem(t,JSON.stringify(e))}),Zr=(n,t)=>h(void 0,null,function*(){let e=yield n.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}}),vi=(n,t)=>h(void 0,null,function*(){yield n.removeItem(t)});function hp(n){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="",r,i,s,o,a,l,c,u=0;for(n=n.replace("-","+").replace("_","/");u<n.length;)o=t.indexOf(n.charAt(u++)),a=t.indexOf(n.charAt(u++)),l=t.indexOf(n.charAt(u++)),c=t.indexOf(n.charAt(u++)),r=o<<2|a>>4,i=(a&15)<<4|l>>2,s=(l&3)<<6|c,e=e+String.fromCharCode(r),l!=64&&i!=0&&(e=e+String.fromCharCode(i)),c!=64&&s!=0&&(e=e+String.fromCharCode(s));return e}var Xr=class n{constructor(){this.promise=new n.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}};Xr.promiseConstructor=Promise;function fo(n){let t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,e=n.split(".");if(e.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(e[1]))throw new Error("JWT is not valid: payload is not in base64url format");let r=e[1];return JSON.parse(hp(r))}function Vc(n){return h(this,null,function*(){return yield new Promise(t=>{setTimeout(()=>t(null),n)})})}function $c(n,t){return new Promise((r,i)=>{h(this,null,function*(){for(let s=0;s<1/0;s++)try{let o=yield n(s);if(!t(s,null,o)){r(o);return}}catch(o){if(!t(s,o)){i(o);return}}})})}function fp(n){return("0"+n.toString(16)).substr(-2)}function st(){let t=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length,i="";for(let s=0;s<56;s++)i+=e.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,fp).join("")}function pp(n){return h(this,null,function*(){let e=new TextEncoder().encode(n),r=yield crypto.subtle.digest("SHA-256",e),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")})}function gp(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function ot(n){return h(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let e=yield pp(n);return gp(e)})}var en=class extends Error{constructor(t,e){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e}};function C(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var yi=class extends en{constructor(t,e){super(t,e),this.name="AuthApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}};function Bc(n){return C(n)&&n.name==="AuthApiError"}var Lt=class extends en{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}},Te=class extends en{constructor(t,e,r){super(t),this.name=e,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}},Ae=class extends Te{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}},Vt=class extends Te{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}},at=class extends Te{constructor(t){super(t,"AuthInvalidCredentialsError",400)}},lt=class extends Te{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},tn=class extends Te{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},$t=class extends Te{constructor(t,e){super(t,"AuthRetryableFetchError",e)}};function wi(n){return C(n)&&n.name==="AuthRetryableFetchError"}var _i=class extends Te{constructor(t,e,r){super(t,"AuthWeakPasswordError",e),this.reasons=r}};var mp=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e},Bt=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),vp=[502,503,504];function zc(n){return h(this,null,function*(){if(!Lc(n))throw new $t(Bt(n),0);if(vp.includes(n.status))throw new $t(Bt(n),n.status);let t;try{t=yield n.json()}catch(e){throw new Lt(Bt(e),e)}throw typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((e,r)=>e&&typeof r=="string",!0)?new _i(Bt(t),n.status,t.weak_password.reasons):new yi(Bt(t),n.status||500)})}var yp=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),e))};function T(n,t,e,r){return h(this,null,function*(){var i;let s=Object.assign({},r?.headers);r?.jwt&&(s.Authorization=`Bearer ${r.jwt}`);let o=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);let a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=yield _p(n,t,e+a,{headers:s,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}})}function _p(n,t,e,r,i,s){return h(this,null,function*(){let o=yp(t,r,i,s),a;try{a=yield n(e,o)}catch(l){throw console.error(l),new $t(Bt(l),0)}if(a.ok||(yield zc(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(l){yield zc(l)}})}function Ge(n){var t;let e=null;wp(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=Uc(n.expires_in)));let r=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:e,user:r},error:null}}function po(n){let t=Ge(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((e,r)=>e&&typeof r=="string",!0)&&(t.data.weak_password=n.weak_password),t}function pe(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function Gc(n){return{data:n,error:null}}function qc(n){let{action_link:t,email_otp:e,hashed_token:r,redirect_to:i,verification_type:s}=n,o=mp(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:e,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Hc(n){return n}function wp(n){return n.access_token&&n.refresh_token&&n.expires_in}var bp=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e},zt=class{constructor({url:t="",headers:e={},fetch:r}){this.url=t,this.headers=e,this.fetch=mi(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(t,e="global"){return h(this,null,function*(){try{return yield T(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(C(r))return{data:null,error:r};throw r}})}inviteUserByEmail(r){return h(this,arguments,function*(t,e={}){try{return yield T(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:pe})}catch(i){if(C(i))return{data:{user:null},error:i};throw i}})}generateLink(t){return h(this,null,function*(){try{let{options:e}=t,r=bp(t,["options"]),i=Object.assign(Object.assign({},r),e);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),yield T(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:qc,redirectTo:e?.redirectTo})}catch(e){if(C(e))return{data:{properties:null,user:null},error:e};throw e}})}createUser(t){return h(this,null,function*(){try{return yield T(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:pe})}catch(e){if(C(e))return{data:{user:null},error:e};throw e}})}listUsers(t){return h(this,null,function*(){var e,r,i,s,o,a,l;try{let c={nextPage:null,lastPage:0,total:0},u=yield T(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Hc});if(u.error)throw u.error;let d=yield u.json(),p=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(y=>{let v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(y.split(";")[1].split("=")[1]);c[`${g}Page`]=v}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(C(c))return{data:{users:[]},error:c};throw c}})}getUserById(t){return h(this,null,function*(){try{return yield T(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:pe})}catch(e){if(C(e))return{data:{user:null},error:e};throw e}})}updateUserById(t,e){return h(this,null,function*(){try{return yield T(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:pe})}catch(r){if(C(r))return{data:{user:null},error:r};throw r}})}deleteUser(t,e=!1){return h(this,null,function*(){try{return yield T(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:pe})}catch(r){if(C(r))return{data:{user:null},error:r};throw r}})}_listFactors(t){return h(this,null,function*(){try{let{data:e,error:r}=yield T(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:e,error:r}}catch(e){if(C(e))return{data:null,error:e};throw e}})}_deleteFactor(t){return h(this,null,function*(){try{return{data:yield T(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(C(e))return{data:null,error:e};throw e}})}};var bi="2.61.0";var Wc="http://localhost:9999",Jc="supabase.auth.token";var Kc={"X-Client-Info":`gotrue-js/${bi}`},go=10;var Yc={getItem:n=>Be()?globalThis.localStorage.getItem(n):null,setItem:(n,t)=>{Be()&&globalThis.localStorage.setItem(n,t)},removeItem:n=>{Be()&&globalThis.localStorage.removeItem(n)}};function mo(n={}){return{getItem:t=>n[t]||null,setItem:(t,e)=>{n[t]=e},removeItem:t=>{delete n[t]}}}function Qc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var Cp={debug:!!(globalThis&&Be()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Ci=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}};Qc();var Sp={url:Wc,storageKey:Jc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Kc,flowType:"implicit",debug:!1},rn=30*1e3,Xc=3;function Ep(n,t,e){return h(this,null,function*(){return yield e()})}var vo=(()=>{class n{constructor(e){var r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&se()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let i=Object.assign(Object.assign({},Sp),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new zt({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=mi(i.fetch),this.lock=i.lock||Ep,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Be()?this.storage=Yc:(this.memoryStorage={},this.storage=mo(this.memoryStorage)):(this.memoryStorage={},this.storage=mo(this.memoryStorage)),se()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",s=>h(this,null,function*(){this._debug("received broadcast notification from other tab or client",s),yield this._notifyAllSubscribers(s.data.event,s.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${bi}) ${new Date().toISOString()}`,...e),this}initialize(){return h(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=h(this,null,function*(){return yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return h(this,null,function*(){try{let e=se()?yield this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){let{data:r,error:i}=yield this._getSessionFromURL(e);if(i)return this._debug("#_initialize()","error detecting session from URL",i),i?.message==="Identity is already linked"||i?.message==="Identity is already linked to another user"?{error:i}:(yield this._removeSession(),{error:i});let{session:s,redirectType:o}=r;return this._debug("#_initialize()","detected session in URL",s,"redirect type",o),yield this._saveSession(s),setTimeout(()=>h(this,null,function*(){o==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",s):yield this._notifyAllSubscribers("SIGNED_IN",s)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(e){return C(e)?{error:e}:{error:new Lt("Unexpected error during initialization",e)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signUp(e){return h(this,null,function*(){var r,i,s;try{yield this._removeSession();let o;if("email"in e){let{email:d,password:p,options:f}=e,y=null,v=null;if(this.flowType==="pkce"){let g=st();yield ze(this.storage,`${this.storageKey}-code-verifier`,g),y=yield ot(g),v=g===y?"plain":"s256"}o=yield T(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:p,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:y,code_challenge_method:v},xform:Ge})}else if("phone"in e){let{phone:d,password:p,options:f}=e;o=yield T(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(i=f?.data)!==null&&i!==void 0?i:{},channel:(s=f?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Ge})}else throw new at("You must provide either an email or phone number and a password");let{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};let c=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(C(o))return{data:{user:null,session:null},error:o};throw o}})}signInWithPassword(e){return h(this,null,function*(){try{yield this._removeSession();let r;if("email"in e){let{email:o,password:a,options:l}=e;r=yield T(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:po})}else if("phone"in e){let{phone:o,password:a,options:l}=e;r=yield T(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:po})}else throw new at("You must provide either an email or phone number and a password");let{data:i,error:s}=r;return s?{data:{user:null,session:null},error:s}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Vt}:(i.session&&(yield this._saveSession(i.session),yield this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s})}catch(r){if(C(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOAuth(e){return h(this,null,function*(){var r,i,s,o;return yield this._removeSession(),yield this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})})}exchangeCodeForSession(e){return h(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>h(this,null,function*(){return this._exchangeCodeForSession(e)}))})}_exchangeCodeForSession(e){return h(this,null,function*(){let r=yield Zr(this.storage,`${this.storageKey}-code-verifier`),[i,s]=(r??"").split("/"),{data:o,error:a}=yield T(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:Ge});return yield vi(this.storage,`${this.storageKey}-code-verifier`),a?{data:{user:null,session:null,redirectType:null},error:a}:!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Vt}:(o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:a})})}signInWithIdToken(e){return h(this,null,function*(){yield this._removeSession();try{let{options:r,provider:i,token:s,access_token:o,nonce:a}=e,l=yield T(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:s,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Ge}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Vt}:(c.session&&(yield this._saveSession(c.session),yield this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(C(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOtp(e){return h(this,null,function*(){var r,i,s,o,a;try{if(yield this._removeSession(),"email"in e){let{email:l,options:c}=e,u=null,d=null;if(this.flowType==="pkce"){let f=st();yield ze(this.storage,`${this.storageKey}-code-verifier`,f),u=yield ot(f),d=f===u?"plain":"s256"}let{error:p}=yield T(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c?.data)!==null&&r!==void 0?r:{},create_user:(i=c?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){let{phone:l,options:c}=e,{data:u,error:d}=yield T(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c?.data)!==null&&s!==void 0?s:{},create_user:(o=c?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(a=c?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new at("You must provide either an email or phone number.")}catch(l){if(C(l))return{data:{user:null,session:null},error:l};throw l}})}verifyOtp(e){return h(this,null,function*(){var r,i;try{e.type!=="email_change"&&e.type!=="phone_change"&&(yield this._removeSession());let s,o;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(i=e.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:l}=yield T(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:Ge});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");let c=a.session,u=a.user;return c?.access_token&&(yield this._saveSession(c),yield this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(C(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithSSO(e){return h(this,null,function*(){var r,i,s;try{yield this._removeSession();let o=null,a=null;if(this.flowType==="pkce"){let l=st();yield ze(this.storage,`${this.storageKey}-code-verifier`,l),o=yield ot(l),a=l===o?"plain":"s256"}return yield T(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:Gc})}catch(o){if(C(o))return{data:null,error:o};throw o}})}reauthenticate(){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return h(this,null,function*(){try{return yield this._useSession(e=>h(this,null,function*(){let{data:{session:r},error:i}=e;if(i)throw i;if(!r)throw new Ae;let{error:s}=yield T(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}}))}catch(e){if(C(e))return{data:{user:null,session:null},error:e};throw e}})}resend(e){return h(this,null,function*(){try{e.type!="email_change"&&e.type!="phone_change"&&(yield this._removeSession());let r=`${this.url}/resend`;if("email"in e){let{email:i,type:s,options:o}=e,{error:a}=yield T(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){let{phone:i,type:s,options:o}=e,{data:a,error:l}=yield T(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:l}}throw new at("You must provide either an email or phone number and a type")}catch(r){if(C(r))return{data:{user:null,session:null},error:r};throw r}})}getSession(){return h(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>h(this,null,function*(){return this._useSession(e=>h(this,null,function*(){return e}))}))})}_acquireLock(e,r){return h(this,null,function*(){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=h(this,null,function*(){return yield i,yield r()});return this.pendingInLock.push(h(this,null,function*(){try{yield s}catch{}})),s}return yield this.lock(`lock:${this.storageKey}`,e,()=>h(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push(h(this,null,function*(){try{yield i}catch{}})),yield i;this.pendingInLock.length;){let s=[...this.pendingInLock];yield Promise.all(s),this.pendingInLock.splice(0,s.length)}return yield i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(e){return h(this,null,function*(){this._debug("#_useSession","begin");try{let r=yield this.__loadSession();return yield e(r)}finally{this._debug("#_useSession","end")}})}__loadSession(){return h(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,r=yield Zr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!e)return{data:{session:null},error:null};let i=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i)return{data:{session:e},error:null};let{session:s,error:o}=yield this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(e){return h(this,null,function*(){return e?yield this._getUser(e):(yield this.initializePromise,this._acquireLock(-1,()=>h(this,null,function*(){return yield this._getUser()})))})}_getUser(e){return h(this,null,function*(){try{return e?yield T(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:pe}):yield this._useSession(r=>h(this,null,function*(){var i,s;let{data:o,error:a}=r;if(a)throw a;return yield T(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:pe})}))}catch(r){if(C(r))return{data:{user:null},error:r};throw r}})}updateUser(i){return h(this,arguments,function*(e,r={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._updateUser(e,r)}))})}_updateUser(i){return h(this,arguments,function*(e,r={}){try{return yield this._useSession(s=>h(this,null,function*(){let{data:o,error:a}=s;if(a)throw a;if(!o.session)throw new Ae;let l=o.session,c=null,u=null;if(this.flowType==="pkce"&&e.email!=null){let f=st();yield ze(this.storage,`${this.storageKey}-code-verifier`,f),c=yield ot(f),u=f===c?"plain":"s256"}let{data:d,error:p}=yield T(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:u}),jwt:l.access_token,xform:pe});if(p)throw p;return l.user=d.user,yield this._saveSession(l),yield this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}}))}catch(s){if(C(s))return{data:{user:null},error:s};throw s}})}_decodeJWT(e){return fo(e)}setSession(e){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._setSession(e)}))})}_setSession(e){return h(this,null,function*(){try{if(!e.access_token||!e.refresh_token)throw new Ae;let r=Date.now()/1e3,i=r,s=!0,o=null,a=fo(e.access_token);if(a.exp&&(i=a.exp,s=i<=r),s){let{session:l,error:c}=yield this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{let{data:l,error:c}=yield this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:i-r,expires_at:i},yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(C(r))return{data:{session:null,user:null},error:r};throw r}})}refreshSession(e){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._refreshSession(e)}))})}_refreshSession(e){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var i;if(!e){let{data:a,error:l}=r;if(l)throw l;e=(i=a.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new Ae;let{session:s,error:o}=yield this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}}))}catch(r){if(C(r))return{data:{user:null,session:null},error:r};throw r}})}_getSessionFromURL(e){return h(this,null,function*(){try{if(!se())throw new lt("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new lt("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new tn("Not a valid PKCE flow url.");let r=gi(window.location.href);if(e){if(!r.code)throw new tn("No code detected.");let{data:A,error:U}=yield this._exchangeCodeForSession(r.code);if(U)throw U;let F=new URL(window.location.href);return F.searchParams.delete("code"),window.history.replaceState(window.history.state,"",F.toString()),{data:{session:A.session,redirectType:null},error:null}}if(r.error||r.error_description||r.error_code)throw new lt(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});let{provider_token:i,provider_refresh_token:s,access_token:o,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=r;if(!o||!l||!a||!u)throw new lt("No session defined in URL");let d=Math.round(Date.now()/1e3),p=parseInt(l),f=d+p;c&&(f=parseInt(c));let y=f-d;y*1e3<=rn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${p}s`);let v=f-p;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",v,f,d);let{data:g,error:R}=yield this._getUser(o);if(R)throw R;let j={provider_token:i,provider_refresh_token:s,access_token:o,expires_in:p,expires_at:f,refresh_token:a,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:j,redirectType:r.type},error:null}}catch(r){if(C(r))return{data:{session:null,redirectType:null},error:r};throw r}})}_isImplicitGrantFlow(){let e=gi(window.location.href);return!!(se()&&(e.access_token||e.error_description))}_isPKCEFlow(){return h(this,null,function*(){let e=gi(window.location.href),r=yield Zr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)})}signOut(){return h(this,arguments,function*(e={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._signOut(e)}))})}_signOut(){return h(this,arguments,function*({scope:e}={scope:"global"}){return yield this._useSession(r=>h(this,null,function*(){var i;let{data:s,error:o}=r;if(o)return{error:o};let a=(i=s.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:l}=yield this.admin.signOut(a,e);if(l&&!(Bc(l)&&(l.status===404||l.status===401)))return{error:l}}return e!=="others"&&(yield this._removeSession(),yield vi(this.storage,`${this.storageKey}-code-verifier`),yield this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}}))})}onAuthStateChange(e){let r=Fc(),i={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),h(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){this._emitInitialSession(r)}))}),{data:{subscription:i}}}_emitInitialSession(e){return h(this,null,function*(){return yield this._useSession(r=>h(this,null,function*(){var i,s;try{let{data:{session:o},error:a}=r;if(a)throw a;yield(i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){yield(s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}}))})}resetPasswordForEmail(i){return h(this,arguments,function*(e,r={}){let s=null,o=null;if(this.flowType==="pkce"){let a=st();yield ze(this.storage,`${this.storageKey}-code-verifier`,`${a}/PASSWORD_RECOVERY`),s=yield ot(a),o=a===s?"plain":"s256"}try{return yield T(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(C(a))return{data:null,error:a};throw a}})}getUserIdentities(){return h(this,null,function*(){var e;try{let{data:r,error:i}=yield this.getUser();if(i)throw i;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(C(r))return{data:null,error:r};throw r}})}linkIdentity(e){return h(this,null,function*(){var r;try{let{data:i,error:s}=yield this._useSession(o=>h(this,null,function*(){var a,l,c,u,d;let{data:p,error:f}=o;if(f)throw f;let y=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return yield T(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})}));if(s)throw s;return se()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(C(i))return{data:{provider:e.provider,url:null},error:i};throw i}})}unlinkIdentity(e){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var i,s;let{data:o,error:a}=r;if(a)throw a;return yield T(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0})}))}catch(r){if(C(r))return{data:null,error:r};throw r}})}_refreshAccessToken(e){return h(this,null,function*(){let r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return yield $c(s=>h(this,null,function*(){return yield Vc(s*200),this._debug(r,"refreshing attempt",s),yield T(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ge})}),(s,o,a)=>a&&a.error&&wi(a.error)&&Date.now()+(s+1)*200-i<rn)}catch(i){if(this._debug(r,"error",i),C(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(r,"end")}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,r){return h(this,null,function*(){let i=yield this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),se()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}})}_recoverAndRefresh(){return h(this,null,function*(){var e;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let i=yield Zr(this.storage,this.storageKey);if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&(yield this._removeSession());return}let s=Math.round(Date.now()/1e3),o=((e=i.expires_at)!==null&&e!==void 0?e:1/0)<s+go;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${go}s`),o){if(this.autoRefreshToken&&i.refresh_token){let{error:a}=yield this._callRefreshToken(i.refresh_token);a&&(console.error(a),wi(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),yield this._removeSession()))}}else yield this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}})}_callRefreshToken(e){return h(this,null,function*(){var r,i;if(!e)throw new Ae;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Xr;let{data:o,error:a}=yield this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new Ae;yield this._saveSession(o.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);let l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),C(o)){let a={session:null,error:o};return wi(o)||(yield this._removeSession(),yield this._notifyAllSubscribers("SIGNED_OUT",null)),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}})}_notifyAllSubscribers(e,r,i=!0){return h(this,null,function*(){let s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:r});let o=[],a=Array.from(this.stateChangeEmitters.values()).map(l=>h(this,null,function*(){try{yield l.callback(e,r)}catch(c){o.push(c)}}));if(yield Promise.all(a),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}})}_saveSession(e){return h(this,null,function*(){this._debug("#_saveSession()",e),yield ze(this.storage,this.storageKey,e)})}_removeSession(){return h(this,null,function*(){this._debug("#_removeSession()"),yield vi(this.storage,this.storageKey)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&se()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){return h(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),rn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(()=>h(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return h(this,null,function*(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return h(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>h(this,null,function*(){try{let e=Date.now();try{return yield this._useSession(r=>h(this,null,function*(){let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let s=Math.floor((i.expires_at*1e3-e)/rn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${rn}ms, refresh threshold is ${Xc} ticks`),s<=Xc&&(yield this._callRefreshToken(i.refresh_token))}))}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(e.isAcquireTimeout||e instanceof Ci)this._debug("auto refresh token tick lock not available");else throw e}})}_handleVisibilityChange(){return h(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!se()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>h(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return h(this,null,function*(){let r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,r,i){return h(this,null,function*(){let s=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&s.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let o=st();yield ze(this.storage,`${this.storageKey}-code-verifier`,o);let a=yield ot(o),l=o===a?"plain":"s256";this._debug("PKCE","code verifier",`${o.substring(0,5)}...`,"code challenge",a,"method",l);let c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(c.toString())}if(i?.queryParams){let o=new URLSearchParams(i.queryParams);s.push(o.toString())}return i?.skipBrowserRedirect&&s.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${s.join("&")}`})}_unenroll(e){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var i;let{data:s,error:o}=r;return o?{data:null,error:o}:yield T(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token})}))}catch(r){if(C(r))return{data:null,error:r};throw r}})}_enroll(e){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var i,s;let{data:o,error:a}=r;if(a)return{data:null,error:a};let{data:l,error:c}=yield T(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return c?{data:null,error:c}:(!((s=l?.totp)===null||s===void 0)&&s.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})}))}catch(r){if(C(r))return{data:null,error:r};throw r}})}_verify(e){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var i;let{data:s,error:o}=r;if(o)return{data:null,error:o};let{data:a,error:l}=yield T(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return l?{data:null,error:l}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})}))}catch(r){if(C(r))return{data:null,error:r};throw r}}))})}_challenge(e){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var i;let{data:s,error:o}=r;return o?{data:null,error:o}:yield T(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token})}))}catch(r){if(C(r))return{data:null,error:r};throw r}}))})}_challengeAndVerify(e){return h(this,null,function*(){let{data:r,error:i}=yield this._challenge({factorId:e.factorId});return i?{data:null,error:i}:yield this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})})}_listFactors(){return h(this,null,function*(){let{data:{user:e},error:r}=yield this.getUser();if(r)return{data:null,error:r};let i=e?.factors||[],s=i.filter(o=>o.factor_type==="totp"&&o.status==="verified");return{data:{all:i,totp:s},error:null}})}_getAuthenticatorAssuranceLevel(){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){return yield this._useSession(e=>h(this,null,function*(){var r,i;let{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let a=this._decodeJWT(s.access_token),l=null;a.aal&&(l=a.aal);let c=l;((i=(r=s.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(c="aal2");let d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}))})}}return n.nextInstanceID=0,n})();var xp=vo,yo=xp;var Si=class extends yo{constructor(t){super(t)}};var Tp=function(n,t,e,r){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},Ei=class{constructor(t,e,r){var i,s,o;if(this.supabaseUrl=t,this.supabaseKey=e,!t)throw new Error("supabaseUrl is required.");if(!e)throw new Error("supabaseKey is required.");let a=jc(t);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;let l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:Ic,realtime:kc,auth:Object.assign(Object.assign({},Mc),{storageKey:l}),global:Oc},u=Nc(r??{},c);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=Pc(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new vc(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new Lr(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Yr(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,e;return Tp(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,lock:a,debug:l},c,u){let d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Si({url:this.authUrl,headers:Object.assign(Object.assign({},d),c),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Jr(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var n_=(n,t,e)=>new Ei(n,t,e);export{vn as a,Pe as b,uu as c,Vp as d,Sa as e,dg as f,Ju as g,b as h,de as i,Fe as j,Ad as k,Ce as l,jg as m,Ng as n,Ug as o,Zn as p,jr as q,Jh as r,Qh as s,jl as t,xl as u,Ee as v,rm as w,nm as x,Dt as y,yf as z,kr as A,bf as B,sm as C,Sf as D,xf as E,Af as F,Of as G,Mf as H,kf as I,om as J,am as K,lm as L,rc as M,n_ as N};
