import{$a as Ei,A as kn,Aa as Dn,Ab as Ni,Ad as Yi,Bb as Nn,Cb as $i,Cd as qn,Db as wr,Dd as Qi,Ea as Mn,Eb as $n,Ed as Cr,Fa as yi,Ga as wt,H as ae,Ha as wi,Ja as yr,Jb as Fn,K as Fe,Ka as _t,Kb as Fi,L as ge,La as ve,Lb as Bn,Ma as jn,Mb as _r,Na as _i,Nb as br,O as xn,Oa as bi,Ob as Bi,P as Be,Pc as Sr,T as ze,Ta as Si,Tc as zn,U as me,Ua as Un,V as In,Va as Ri,Vc as Vi,W as di,Wa as qe,Wc as Rr,Ya as Ln,Z as fi,Za as Ti,a as oi,ab as bt,ba as pi,bb as Ve,bc as zi,bd as Hi,c as ai,ca as V,cb as He,cd as Tr,d as ci,da as gi,db as Ci,dd as Gi,e as Cn,eb as Ai,ed as Wi,f as An,fa as j,fb as Oi,fd as B,g as pe,gb as ki,gd as Ji,h as J,hb as xi,hd as Rt,ia as x,ib as Ii,ic as qi,id as Ki,jb as Pi,jd as Xi,ka as C,kb as Ae,kd as Tt,l as oe,la as vr,ma as mi,na as P,nb as Di,o as $,oa as Pn,od as Er,p as _,pa as R,pb as St,q as vt,qa as y,r as li,s as ui,sb as Mi,ta as yt,tb as ji,ub as Ge,v as E,va as vi,vb as Ui,w as mr,wa as Ce,wb as Li,x as q,xa as K,y as On,z as hi}from"./chunk-2L27LJAK.js";import{b as Zi,c as eo,f as yc,g as to}from"./chunk-X5YLR3NI.js";import{a as v,b as N,e as ie,g as mc,h as vc,i as d}from"./chunk-ODN5LVDJ.js";var Fs=ie($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});var Ns=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};$s.default=Ns});var zs=ie(Zt=>{"use strict";var _a=Zt&&Zt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Zt,"__esModule",{value:!0});var hh=_a((to(),vc(yc))),dh=_a(Fs()),Bs=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=hh.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=Object.assign({},this.headers),this.headers[t]=e,this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=this.fetch,s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(i=>d(this,null,function*(){var o,a,c;let l=null,u=null,h=null,p=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){let O=yield i.text();O===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=O:u=JSON.parse(O))}let m=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),g=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");m&&g&&g.length>1&&(h=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,p=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{let m=yield i.text();try{l=JSON.parse(m),Array.isArray(l)&&i.status===404&&(u=[],l=null,p=200,f="OK")}catch{i.status===404&&m===""?(p=204,f="No Content"):l={message:m}}if(l&&this.isMaybeSingle&&(!((c=l?.details)===null||c===void 0)&&c.includes("0 rows"))&&(l=null,p=200,f="OK"),l&&this.shouldThrowOnError)throw new dh.default(l)}return{error:l,data:u,count:h,status:p,statusText:f}}));return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,c;return{error:{message:`${(o=i?.name)!==null&&o!==void 0?o:"FetchError"}: ${i?.message}`,details:`${(a=i?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i?.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}};Zt.default=Bs});var Vs=ie(er=>{"use strict";var fh=er&&er.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(er,"__esModule",{value:!0});var ph=fh(zs()),qs=class extends ph.default{select(t){let e=!1,r=(t??"*").split("").map(s=>/\s/.test(s)&&!e?"":(s==='"'&&(e=!e),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){let o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){let s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:s=r}={}){let i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;let c=[t?"analyze":null,e?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};er.default=qs});var nn=ie(tr=>{"use strict";var gh=tr&&tr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(tr,"__esModule",{value:!0});var mh=gh(Vs()),Hs=class extends mh.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){let r=Array.from(new Set(e)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");let o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){let s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}};tr.default=Hs});var Ws=ie(nr=>{"use strict";var vh=nr&&nr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(nr,"__esModule",{value:!0});var rr=vh(nn()),Gs=class{constructor(t,{headers:e={},schema:r,fetch:s}){this.url=t,this.headers=e,this.schema=r,this.fetch=s}select(t,{head:e=!1,count:r}={}){let s=e?"HEAD":"GET",i=!1,o=(t??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new rr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e,defaultToNull:r=!0}={}){let s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),e&&i.push(`count=${e}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){let o=t.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){let a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new rr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){let o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){let c=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){let l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new rr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){let r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),e&&s.push(`count=${e}`),this.headers.Prefer=s.join(","),new rr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){let e="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new rr.default({method:e,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};nr.default=Gs});var ba=ie(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.version=void 0;sn.version="0.0.0-automated"});var Sa=ie(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});on.DEFAULT_HEADERS=void 0;var yh=ba();on.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${yh.version}`}});var Ta=ie(sr=>{"use strict";var Ra=sr&&sr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(sr,"__esModule",{value:!0});var wh=Ra(Ws()),_h=Ra(nn()),bh=Sa(),Js=class n{constructor(t,{headers:e={},schema:r,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},bh.DEFAULT_HEADERS),e),this.schemaName=r,this.fetch=s}from(t){let e=new URL(`${this.url}/${t}`);return new wh.default(e,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new n(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:r=!1,get:s=!1,count:i}={}){let o,a=new URL(`${this.url}/rpc/${t}`),c;r||s?(o=r?"HEAD":"GET",Object.entries(e).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{a.searchParams.append(u,h)})):(o="POST",c=e);let l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new _h.default({method:o,url:a,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};sr.default=Js});var Ia=ie(U=>{"use strict";var it=U&&U.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(U,"__esModule",{value:!0});U.PostgrestError=U.PostgrestBuilder=U.PostgrestTransformBuilder=U.PostgrestFilterBuilder=U.PostgrestQueryBuilder=U.PostgrestClient=void 0;var Ea=it(Ta());U.PostgrestClient=Ea.default;var Ca=it(Ws());U.PostgrestQueryBuilder=Ca.default;var Aa=it(nn());U.PostgrestFilterBuilder=Aa.default;var Oa=it(Vs());U.PostgrestTransformBuilder=Oa.default;var ka=it(zs());U.PostgrestBuilder=ka.default;var xa=it(Fs());U.PostgrestError=xa.default;U.default={PostgrestClient:Ea.default,PostgrestQueryBuilder:Ca.default,PostgrestFilterBuilder:Aa.default,PostgrestTransformBuilder:Oa.default,PostgrestBuilder:ka.default,PostgrestError:xa.default}});var Ct=class{},Or=class{},Oe=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let r=e.indexOf(":");if(r>0){let s=e.slice(0,r),i=e.slice(r+1).trim();this.addHeaderEntry(s,i)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,r)=>{this.addHeaderEntry(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,e);let s=(t.op==="a"?this.headers.get(e):void 0)||[];s.push(...r),this.headers.set(e,s);break;case"d":let i=t.value;if(!i)this.headers.delete(e),this.normalizedNames.delete(e);else{let o=this.headers.get(e);if(!o)return;o=o.filter(a=>i.indexOf(a)===-1),o.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}break}}addHeaderEntry(t,e){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(e):this.headers.set(r,[e])}setHeaderEntries(t,e){let r=(Array.isArray(e)?e:[e]).map(i=>i.toString()),s=t.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(t,s)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var Hn=class{encodeKey(t){return ro(t)}encodeValue(t){return ro(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function bc(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{let i=s.indexOf("="),[o,a]=i==-1?[t.decodeKey(s),""]:[t.decodeKey(s.slice(0,i)),t.decodeValue(s.slice(i+1))],c=e.get(o)||[];c.push(a),e.set(o,c)}),e}var Sc=/%(\d[a-f0-9])/gi,Rc={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function ro(n){return encodeURIComponent(n).replace(Sc,(t,e)=>Rc[e]??t)}function Ar(n){return`${n}`}var ye=class n{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new Hn,t.fromString){if(t.fromObject)throw new x(2805,!1);this.map=bc(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let r=t.fromObject[e],s=Array.isArray(r)?r.map(Ar):[Ar(r)];this.map.set(e,s)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(r=>{let s=t[r];Array.isArray(s)?s.forEach(i=>{e.push({param:r,value:i,op:"a"})}):e.push({param:r,value:s,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(Ar(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],s=r.indexOf(Ar(t.value));s!==-1&&r.splice(s,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var Gn=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function Tc(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function no(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function so(n){return typeof Blob<"u"&&n instanceof Blob}function io(n){return typeof FormData<"u"&&n instanceof FormData}function Ec(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var oo="Content-Type",ao="Accept",ho="X-Request-URL",fo="text/plain",po="application/json",Cc=`${po}, ${fo}, */*`,Et=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(t,e,r,s){this.url=e,this.method=t.toUpperCase();let i;if(Tc(this.method)||s?(this.body=r!==void 0?r:null,i=s):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),this.transferCache=i.transferCache),this.headers??=new Oe,this.context??=new Gn,!this.params)this.params=new ye,this.urlWithParams=e;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),c=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||no(this.body)||so(this.body)||io(this.body)||Ec(this.body)?this.body:this.body instanceof ye?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||io(this.body)?null:so(this.body)?this.body.type||null:no(this.body)?null:typeof this.body=="string"?fo:this.body instanceof ye?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?po:null}clone(t={}){let e=t.method||this.method,r=t.url||this.url,s=t.responseType||this.responseType,i=t.transferCache??this.transferCache,o=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,c=t.reportProgress??this.reportProgress,l=t.headers||this.headers,u=t.params||this.params,h=t.context??this.context;return t.setHeaders!==void 0&&(l=Object.keys(t.setHeaders).reduce((p,f)=>p.set(f,t.setHeaders[f]),l)),t.setParams&&(u=Object.keys(t.setParams).reduce((p,f)=>p.set(f,t.setParams[f]),u)),new n(e,r,o,{params:u,headers:l,context:h,reportProgress:c,responseType:s,withCredentials:a,transferCache:i})}},We=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(We||{}),At=class{headers;status;statusText;url;ok;type;constructor(t,e=200,r="OK"){this.headers=t.headers||new Oe,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},Wn=class n extends At{constructor(t={}){super(t)}type=We.ResponseHeader;clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},kr=class n extends At{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=We.Response;clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},xr=class extends At{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},Ac=200,Oc=204;function Vn(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var kc=(()=>{class n{handler;constructor(e){this.handler=e}request(e,r,s={}){let i;if(e instanceof Et)i=e;else{let c;s.headers instanceof Oe?c=s.headers:c=new Oe(s.headers);let l;s.params&&(s.params instanceof ye?l=s.params:l=new ye({fromObject:s.params})),i=new Et(e,r,s.body!==void 0?s.body:null,{headers:c,context:s.context,params:l,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let o=_(i).pipe(ge(c=>this.handler.handle(c)));if(e instanceof Et||s.observe==="events")return o;let a=o.pipe(ae(c=>c instanceof kr));switch(s.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(E(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new x(2806,!1);return c.body}));case"blob":return a.pipe(E(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new x(2807,!1);return c.body}));case"text":return a.pipe(E(c=>{if(c.body!==null&&typeof c.body!="string")throw new x(2808,!1);return c.body}));case"json":default:return a.pipe(E(c=>c.body))}case"response":return a;default:throw new x(2809,!1)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:new ye().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,s={}){return this.request("PATCH",e,Vn(s,r))}post(e,r,s={}){return this.request("POST",e,Vn(s,r))}put(e,r,s={}){return this.request("PUT",e,Vn(s,r))}static \u0275fac=function(r){return new(r||n)(R(Ct))};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})();var xc=new P("");function Ic(n,t){return t(n)}function Pc(n,t,e){return(r,s)=>K(e,()=>t(r,i=>n(i,s)))}var go=new P(""),Dc=new P(""),Mc=new P("",{providedIn:"root",factory:()=>!0});var co=(()=>{class n extends Ct{backend;injector;chain=null;pendingTasks=y(yr);contributeToStability=y(Mc);constructor(e,r){super(),this.backend=e,this.injector=r}handle(e){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(go),...this.injector.get(Dc,[])]));this.chain=r.reduceRight((s,i)=>Pc(s,i,this.injector),Ic)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(e,s=>this.backend.handle(s)).pipe(ze(()=>this.pendingTasks.remove(r)))}else return this.chain(e,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(R(Or),R(Ce))};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})();var jc=/^\)\]\}',?\n/,Uc=RegExp(`^${ho}:`,"m");function Lc(n){return"responseURL"in n&&n.responseURL?n.responseURL:Uc.test(n.getAllResponseHeaders())?n.getResponseHeader(ho):null}var lo=(()=>{class n{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new x(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?$(r.\u0275loadImpl()):_(null)).pipe(V(()=>new ci(i=>{let o=r.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((m,g)=>o.setRequestHeader(m,g.join(","))),e.headers.has(ao)||o.setRequestHeader(ao,Cc),!e.headers.has(oo)){let m=e.detectContentTypeHeader();m!==null&&o.setRequestHeader(oo,m)}if(e.responseType){let m=e.responseType.toLowerCase();o.responseType=m!=="json"?m:"text"}let a=e.serializeBody(),c=null,l=()=>{if(c!==null)return c;let m=o.statusText||"OK",g=new Oe(o.getAllResponseHeaders()),O=Lc(o)||e.url;return c=new Wn({headers:g,status:o.status,statusText:m,url:O}),c},u=()=>{let{headers:m,status:g,statusText:O,url:F}=l(),k=null;g!==Oc&&(k=typeof o.response>"u"?o.responseText:o.response),g===0&&(g=k?Ac:0);let L=g>=200&&g<300;if(e.responseType==="json"&&typeof k=="string"){let Q=k;k=k.replace(jc,"");try{k=k!==""?JSON.parse(k):null}catch(fe){k=Q,L&&(L=!1,k={error:fe,text:k})}}L?(i.next(new kr({body:k,headers:m,status:g,statusText:O,url:F||void 0})),i.complete()):i.error(new xr({error:k,headers:m,status:g,statusText:O,url:F||void 0}))},h=m=>{let{url:g}=l(),O=new xr({error:m,status:o.status||0,statusText:o.statusText||"Unknown Error",url:g||void 0});i.error(O)},p=!1,f=m=>{p||(i.next(l()),p=!0);let g={type:We.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(g.total=m.total),e.responseType==="text"&&o.responseText&&(g.partialText=o.responseText),i.next(g)},w=m=>{let g={type:We.UploadProgress,loaded:m.loaded};m.lengthComputable&&(g.total=m.total),i.next(g)};return o.addEventListener("load",u),o.addEventListener("error",h),o.addEventListener("timeout",h),o.addEventListener("abort",h),e.reportProgress&&(o.addEventListener("progress",f),a!==null&&o.upload&&o.upload.addEventListener("progress",w)),o.send(a),i.next({type:We.Sent}),()=>{o.removeEventListener("error",h),o.removeEventListener("abort",h),o.removeEventListener("load",u),o.removeEventListener("timeout",h),e.reportProgress&&(o.removeEventListener("progress",f),a!==null&&o.upload&&o.upload.removeEventListener("progress",w)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(r){return new(r||n)(R(Cr))};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})(),mo=new P(""),Nc="XSRF-TOKEN",$c=new P("",{providedIn:"root",factory:()=>Nc}),Fc="X-XSRF-TOKEN",Bc=new P("",{providedIn:"root",factory:()=>Fc}),Ir=class{},zc=(()=>{class n{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,r,s){this.doc=e,this.platform=r,this.cookieName=s}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Er(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(r){return new(r||n)(R(B),R(qe),R($c))};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})();function qc(n,t){let e=n.url.toLowerCase();if(!y(mo)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let r=y(Ir).getToken(),s=y(Bc);return r!=null&&!n.headers.has(s)&&(n=n.clone({headers:n.headers.set(s,r)})),t(n)}function vd(...n){let t=[kc,lo,co,{provide:Ct,useExisting:co},{provide:Or,useFactory:()=>y(xc,{optional:!0})??y(lo)},{provide:go,useValue:qc,multi:!0},{provide:mo,useValue:!0},{provide:Ir,useClass:zc}];for(let e of n)t.push(...e.\u0275providers);return yt(t)}var Kn=class extends Wi{supportsDOMEvents=!0},Xn=class n extends Kn{static makeCurrent(){Gi(new n)}onAndCancel(t,e,r,s){return t.addEventListener(e,r,s),()=>{t.removeEventListener(e,r,s)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=Gc();return e==null?null:Wc(e)}resetBaseElement(){Ot=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Er(document.cookie,t)}},Ot=null;function Gc(){return Ot=Ot||document.querySelector("base"),Ot?Ot.getAttribute("href"):null}function Wc(n){return new URL(n,document.baseURI).pathname}var Jc=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})(),Yn=new P(""),So=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(s=>{s.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,s,i){return this._findPluginFor(r).addEventListener(e,r,s,i)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(i=>i.supports(e)),!r)throw new x(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||n)(R(Yn),R(ve))};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})(),Dr=class{_doc;constructor(t){this._doc=t}manager},Pr="ng-app-id";function vo(n){for(let t of n)t.remove()}function yo(n,t){let e=t.createElement("style");return e.textContent=n,e}function Kc(n,t,e,r){let s=n.head?.querySelectorAll(`style[${Pr}="${t}"],link[${Pr}="${t}"]`);if(s)for(let i of s)i.removeAttribute(Pr),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&e.set(i.textContent,{usage:0,elements:[i]})}function Qn(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var Ro=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,r,s,i={}){this.doc=e,this.appId=r,this.nonce=s,this.isServer=qn(i),Kc(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let s of e)this.addUsage(s,this.inline,yo);r?.forEach(s=>this.addUsage(s,this.external,Qn))}removeStyles(e,r){for(let s of e)this.removeUsage(s,this.inline);r?.forEach(s=>this.removeUsage(s,this.external))}addUsage(e,r,s){let i=r.get(e);i?i.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,s(e,this.doc)))})}removeUsage(e,r){let s=r.get(e);s&&(s.usage--,s.usage<=0&&(vo(s.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])vo(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:s}]of this.inline)s.push(this.addElement(e,yo(r,this.doc)));for(let[r,{elements:s}]of this.external)s.push(this.addElement(e,Qn(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Pr,this.appId),e.appendChild(r)}static \u0275fac=function(r){return new(r||n)(R(B),R(Un),R(Ln,8),R(qe))};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})(),Jn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},es=/%COMP%/g;var To="%COMP%",Xc=`_nghost-${To}`,Yc=`_ngcontent-${To}`,Qc=!0,Zc=new P("",{providedIn:"root",factory:()=>Qc});function el(n){return Yc.replace(es,n)}function tl(n){return Xc.replace(es,n)}function Eo(n,t){return t.map(e=>e.replace(es,n))}var wo=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,r,s,i,o,a,c,l=null,u=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=i,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=u,this.platformIsServer=qn(a),this.defaultRenderer=new kt(e,o,c,this.platformIsServer,this.tracingService)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===bt.ShadowDom&&(r=N(v({},r),{encapsulation:bt.Emulated}));let s=this.getOrCreateRenderer(e,r);return s instanceof Mr?s.applyToHost(e):s instanceof xt&&s.applyStyles(),s}getOrCreateRenderer(e,r){let s=this.rendererByCompId,i=s.get(r.id);if(!i){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer,p=this.tracingService;switch(r.encapsulation){case bt.Emulated:i=new Mr(c,l,r,this.appId,u,o,a,h,p);break;case bt.ShadowDom:return new Zn(c,l,e,r,o,a,this.nonce,h,p);default:i=new xt(c,l,r,u,o,a,h,p);break}s.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(r){return new(r||n)(R(So),R(Ro),R(Un),R(Zc),R(B),R(qe),R(ve),R(Ln),R(Ti,8))};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})(),kt=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,r,s,i){this.eventManager=t,this.doc=e,this.ngZone=r,this.platformIsServer=s,this.tracingService=i}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(Jn[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(_o(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(_o(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){e.remove()}selectRootElement(t,e){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new x(-5104,!1);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,s){if(s){e=s+":"+e;let i=Jn[s];i?t.setAttributeNS(i,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){let s=Jn[r];s?t.removeAttributeNS(s,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,s){s&(St.DashCase|St.Important)?t.style.setProperty(e,r,s&St.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&St.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t!=null&&(t[e]=r)}setValue(t,e){t.nodeValue=e}listen(t,e,r,s){if(typeof t=="string"&&(t=Tr().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);let i=this.decoratePreventDefault(r);return this.tracingService!==null&&this.tracingService.wrapEventListener&&(i=this.tracingService.wrapEventListener(t,e,i)),this.eventManager.addEventListener(t,e,i,s)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function _o(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Zn=class extends kt{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,r,s,i,o,a,c,l){super(t,i,o,c,l),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=s.styles;u=Eo(s.id,u);for(let p of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=p,this.shadowRoot.appendChild(f)}let h=s.getExternalStyles?.();if(h)for(let p of h){let f=Qn(p,i);a&&f.setAttribute("nonce",a),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},xt=class extends kt{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,r,s,i,o,a,c,l){super(t,i,o,a,c),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=s;let u=r.styles;this.styles=l?Eo(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Mr=class extends xt{contentAttr;hostAttr;constructor(t,e,r,s,i,o,a,c,l){let u=s+"-"+r.id;super(t,e,r,i,o,a,c,l,u),this.contentAttr=el(u),this.hostAttr=tl(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}},rl=(()=>{class n extends Dr{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,s,i){return e.addEventListener(r,s,i),()=>this.removeEventListener(e,r,s,i)}removeEventListener(e,r,s,i){return e.removeEventListener(r,s,i)}static \u0275fac=function(r){return new(r||n)(R(B))};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})(),bo=["alt","control","meta","shift"],nl={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},il=(()=>{class n extends Dr{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,r,s,i){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Tr().onAndCancel(e,o.domEventName,a,i))}static parseEventName(e){let r=e.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let i=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),bo.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),o+=l+".")}),o+=i,r.length!=0||i.length===0)return null;let c={};return c.domEventName=s,c.fullKey=o,c}static matchEventFullKeyCode(e,r){let s=nl[e.key]||e.key,i="";return r.indexOf("code.")>-1&&(s=e.code,i="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),bo.forEach(o=>{if(o!==s){let a=sl[o];a(e)&&(i+=o+".")}}),i+=s,i===r)}static eventCallback(e,r,s){return i=>{n.matchEventFullKeyCode(i,e)&&s.runGuarded(()=>r(i))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||n)(R(B))};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})();function zd(n,t){return Vi(v({rootComponent:n},ol(t)))}function ol(n){return{appProviders:[...hl,...n?.providers??[]],platformProviders:ul}}function al(){Xn.makeCurrent()}function cl(){return new jn}function ll(){return Si(document),document}var ul=[{provide:qe,useValue:Yi},{provide:Ri,useValue:al,multi:!0},{provide:B,useFactory:ll,deps:[]}];var hl=[{provide:vi,useValue:"root"},{provide:jn,useFactory:cl,deps:[]},{provide:Yn,useClass:rl,multi:!0,deps:[B]},{provide:Yn,useClass:il,multi:!0,deps:[B]},wo,Ro,So,{provide:Mi,useExisting:wo},{provide:Cr,useClass:Jc,deps:[]},[]];var Co=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||n)(R(B))};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var dl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:function(r){let s=null;return r?s=new(r||n):s=R(fl),s},providedIn:"root"})}return n})(),fl=(()=>{class n extends dl{_doc;constructor(e){super(),this._doc=e}sanitize(e,r){if(r==null)return null;switch(e){case Ae.NONE:return r;case Ae.HTML:return He(r,"HTML")?Ve(r):Pi(this._doc,String(r)).toString();case Ae.STYLE:return He(r,"Style")?Ve(r):r;case Ae.SCRIPT:if(He(r,"Script"))return Ve(r);throw new x(5200,!1);case Ae.URL:return He(r,"URL")?Ve(r):Ii(String(r));case Ae.RESOURCE_URL:if(He(r,"ResourceURL"))return Ve(r);throw new x(5201,!1);default:throw new x(5202,!1)}}bypassSecurityTrustHtml(e){return Ci(e)}bypassSecurityTrustStyle(e){return Ai(e)}bypassSecurityTrustScript(e){return Oi(e)}bypassSecurityTrustUrl(e){return ki(e)}bypassSecurityTrustResourceUrl(e){return xi(e)}static \u0275fac=function(r){return new(r||n)(R(B))};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var b="primary",Vt=Symbol("RouteTitle"),is=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Ze(n){return new is(n)}function gl(n,t,e){let r=e.path.split("/");if(r.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||r.length<n.length))return null;let s={};for(let i=0;i<r.length;i++){let o=r[i],a=n[i];if(o[0]===":")s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function ml(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!te(n[e],t[e]))return!1;return!0}function te(n,t){let e=n?os(n):void 0,r=t?os(t):void 0;if(!e||!r||e.length!=r.length)return!1;let s;for(let i=0;i<e.length;i++)if(s=e[i],!Uo(n[s],t[s]))return!1;return!0}function os(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Uo(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),r=[...t].sort();return e.every((s,i)=>r[i]===s)}else return n===t}function Lo(n){return n.length>0?n[n.length-1]:null}function Se(n){return li(n)?n:Fi(n)?$(Promise.resolve(n)):_(n)}var vl={exact:$o,subset:Fo},No={exact:yl,subset:wl,ignored:()=>!0};function Ao(n,t,e){return vl[e.paths](n.root,t.root,e.matrixParams)&&No[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function yl(n,t){return te(n,t)}function $o(n,t,e){if(!xe(n.segments,t.segments)||!Lr(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!n.children[r]||!$o(n.children[r],t.children[r],e))return!1;return!0}function wl(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Uo(n[e],t[e]))}function Fo(n,t,e){return Bo(n,t,t.segments,e)}function Bo(n,t,e,r){if(n.segments.length>e.length){let s=n.segments.slice(0,e.length);return!(!xe(s,e)||t.hasChildren()||!Lr(s,e,r))}else if(n.segments.length===e.length){if(!xe(n.segments,e)||!Lr(n.segments,e,r))return!1;for(let s in t.children)if(!n.children[s]||!Fo(n.children[s],t.children[s],r))return!1;return!0}else{let s=e.slice(0,n.segments.length),i=e.slice(n.segments.length);return!xe(n.segments,s)||!Lr(n.segments,s,r)||!n.children[b]?!1:Bo(n.children[b],t,i,r)}}function Lr(n,t,e){return t.every((r,s)=>No[e](n[s].parameters,r.parameters))}var le=class{root;queryParams;fragment;_queryParamMap;constructor(t=new A([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ze(this.queryParams),this._queryParamMap}toString(){return Sl.serialize(this)}},A=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nr(this)}},ke=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Ze(this.parameters),this._parameterMap}toString(){return qo(this)}};function _l(n,t){return xe(n,t)&&n.every((e,r)=>te(e.parameters,t[r].parameters))}function xe(n,t){return n.length!==t.length?!1:n.every((e,r)=>e.path===t[r].path)}function bl(n,t){let e=[];return Object.entries(n.children).forEach(([r,s])=>{r===b&&(e=e.concat(t(s,r)))}),Object.entries(n.children).forEach(([r,s])=>{r!==b&&(e=e.concat(t(s,r)))}),e}var Ht=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:()=>new et,providedIn:"root"})}return n})(),et=class{parse(t){let e=new cs(t);return new le(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${It(t.root,!0)}`,r=El(t.queryParams),s=typeof t.fragment=="string"?`#${Rl(t.fragment)}`:"";return`${e}${r}${s}`}},Sl=new et;function Nr(n){return n.segments.map(t=>qo(t)).join("/")}function It(n,t){if(!n.hasChildren())return Nr(n);if(t){let e=n.children[b]?It(n.children[b],!1):"",r=[];return Object.entries(n.children).forEach(([s,i])=>{s!==b&&r.push(`${s}:${It(i,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=bl(n,(r,s)=>s===b?[It(n.children[b],!1)]:[`${s}:${It(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[b]!=null?`${Nr(n)}/${e[0]}`:`${Nr(n)}/(${e.join("//")})`}}function zo(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function jr(n){return zo(n).replace(/%3B/gi,";")}function Rl(n){return encodeURI(n)}function as(n){return zo(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $r(n){return decodeURIComponent(n)}function Oo(n){return $r(n.replace(/\+/g,"%20"))}function qo(n){return`${as(n.path)}${Tl(n.parameters)}`}function Tl(n){return Object.entries(n).map(([t,e])=>`;${as(t)}=${as(e)}`).join("")}function El(n){let t=Object.entries(n).map(([e,r])=>Array.isArray(r)?r.map(s=>`${jr(e)}=${jr(s)}`).join("&"):`${jr(e)}=${jr(r)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var Cl=/^[^\/()?;#]+/;function ts(n){let t=n.match(Cl);return t?t[0]:""}var Al=/^[^\/()?;=#]+/;function Ol(n){let t=n.match(Al);return t?t[0]:""}var kl=/^[^=?&#]+/;function xl(n){let t=n.match(kl);return t?t[0]:""}var Il=/^[^&#]+/;function Pl(n){let t=n.match(Il);return t?t[0]:""}var cs=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new A([],{}):new A([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[b]=new A(t,e)),r}parseSegment(){let t=ts(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new x(4009,!1);return this.capture(t),new ke($r(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=Ol(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let s=ts(this.remaining);s&&(r=s,this.capture(r))}t[$r(e)]=$r(r)}parseQueryParam(t){let e=xl(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let o=Pl(this.remaining);o&&(r=o,this.capture(r))}let s=Oo(e),i=Oo(r);if(t.hasOwnProperty(s)){let o=t[s];Array.isArray(o)||(o=[o],t[s]=o),o.push(i)}else t[s]=i}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ts(this.remaining),s=this.remaining[r.length];if(s!=="/"&&s!==")"&&s!==";")throw new x(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=b);let o=this.parseChildren();e[i]=Object.keys(o).length===1?o[b]:new A([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new x(4011,!1)}};function Vo(n){return n.segments.length>0?new A([],{[b]:n}):n}function Ho(n){let t={};for(let[r,s]of Object.entries(n.children)){let i=Ho(s);if(r===b&&i.segments.length===0&&i.hasChildren())for(let[o,a]of Object.entries(i.children))t[o]=a;else(i.segments.length>0||i.hasChildren())&&(t[r]=i)}let e=new A(n.segments,t);return Dl(e)}function Dl(n){if(n.numberOfChildren===1&&n.children[b]){let t=n.children[b];return new A(n.segments.concat(t.segments),t.children)}return n}function Ie(n){return n instanceof le}function Ml(n,t,e=null,r=null){let s=Go(n);return Wo(s,t,e,r)}function Go(n){let t;function e(i){let o={};for(let c of i.children){let l=e(c);o[c.outlet]=l}let a=new A(i.url,o);return i===n&&(t=a),a}let r=e(n.root),s=Vo(r);return t??s}function Wo(n,t,e,r){let s=n;for(;s.parent;)s=s.parent;if(t.length===0)return rs(s,s,s,e,r);let i=jl(t);if(i.toRoot())return rs(s,s,new A([],{}),e,r);let o=Ul(i,s,n),a=o.processChildren?Dt(o.segmentGroup,o.index,i.commands):Ko(o.segmentGroup,o.index,i.commands);return rs(s,o.segmentGroup,a,e,r)}function Fr(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ut(n){return typeof n=="object"&&n!=null&&n.outlets}function rs(n,t,e,r,s){let i={};r&&Object.entries(r).forEach(([c,l])=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;n===t?o=e:o=Jo(n,t,e);let a=Vo(Ho(o));return new le(a,i,s)}function Jo(n,t,e){let r={};return Object.entries(n.children).forEach(([s,i])=>{i===t?r[s]=e:r[s]=Jo(i,t,e)}),new A(n.segments,r)}var Br=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&Fr(r[0]))throw new x(4003,!1);let s=r.find(Ut);if(s&&s!==Lo(r))throw new x(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function jl(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Br(!0,0,n);let t=0,e=!1,r=n.reduce((s,i,o)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...s,{outlets:a}]}if(i.segmentPath)return[...s,i.segmentPath]}return typeof i!="string"?[...s,i]:o===0?(i.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?e=!0:a===".."?t++:a!=""&&s.push(a))}),s):[...s,i]},[]);return new Br(e,t,r)}var Xe=class{segmentGroup;processChildren;index;constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}};function Ul(n,t,e){if(n.isAbsolute)return new Xe(t,!0,0);if(!e)return new Xe(t,!1,NaN);if(e.parent===null)return new Xe(e,!0,0);let r=Fr(n.commands[0])?0:1,s=e.segments.length-1+r;return Ll(e,s,n.numberOfDoubleDots)}function Ll(n,t,e){let r=n,s=t,i=e;for(;i>s;){if(i-=s,r=r.parent,!r)throw new x(4005,!1);s=r.segments.length}return new Xe(r,!1,s-i)}function Nl(n){return Ut(n[0])?n[0].outlets:{[b]:n}}function Ko(n,t,e){if(n??=new A([],{}),n.segments.length===0&&n.hasChildren())return Dt(n,t,e);let r=$l(n,t,e),s=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let i=new A(n.segments.slice(0,r.pathIndex),{});return i.children[b]=new A(n.segments.slice(r.pathIndex),n.children),Dt(i,0,s)}else return r.match&&s.length===0?new A(n.segments,{}):r.match&&!n.hasChildren()?ls(n,t,e):r.match?Dt(n,0,s):ls(n,t,e)}function Dt(n,t,e){if(e.length===0)return new A(n.segments,{});{let r=Nl(e),s={};if(Object.keys(r).some(i=>i!==b)&&n.children[b]&&n.numberOfChildren===1&&n.children[b].segments.length===0){let i=Dt(n.children[b],t,e);return new A(n.segments,i.children)}return Object.entries(r).forEach(([i,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(s[i]=Ko(n.children[i],t,o))}),Object.entries(n.children).forEach(([i,o])=>{r[i]===void 0&&(s[i]=o)}),new A(n.segments,s)}}function $l(n,t,e){let r=0,s=t,i={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=e.length)return i;let o=n.segments[s],a=e[r];if(Ut(a))break;let c=`${a}`,l=r<e.length-1?e[r+1]:null;if(s>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!xo(c,l,o))return i;r+=2}else{if(!xo(c,{},o))return i;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}function ls(n,t,e){let r=n.segments.slice(0,t),s=0;for(;s<e.length;){let i=e[s];if(Ut(i)){let c=Fl(i.outlets);return new A(r,c)}if(s===0&&Fr(e[0])){let c=n.segments[t];r.push(new ke(c.path,ko(e[0]))),s++;continue}let o=Ut(i)?i.outlets[b]:`${i}`,a=s<e.length-1?e[s+1]:null;o&&a&&Fr(a)?(r.push(new ke(o,ko(a))),s+=2):(r.push(new ke(o,{})),s++)}return new A(r,{})}function Fl(n){let t={};return Object.entries(n).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[e]=ls(new A([],{}),0,r))}),t}function ko(n){let t={};return Object.entries(n).forEach(([e,r])=>t[e]=`${r}`),t}function xo(n,t,e){return n==e.path&&te(t,e.parameters)}var Mt="imperative",M=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(M||{}),X=class{id;url;constructor(t,e){this.id=t,this.url=e}},tt=class extends X{type=M.NavigationStart;navigationTrigger;restoredState;constructor(t,e,r="imperative",s=null){super(t,e),this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},re=class extends X{urlAfterRedirects;type=M.NavigationEnd;constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},G=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(G||{}),zr=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(zr||{}),ce=class extends X{reason;code;type=M.NavigationCancel;constructor(t,e,r,s){super(t,e),this.reason=r,this.code=s}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},we=class extends X{reason;code;type=M.NavigationSkipped;constructor(t,e,r,s){super(t,e),this.reason=r,this.code=s}},Lt=class extends X{error;target;type=M.NavigationError;constructor(t,e,r,s){super(t,e),this.error=r,this.target=s}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},qr=class extends X{urlAfterRedirects;state;type=M.RoutesRecognized;constructor(t,e,r,s){super(t,e),this.urlAfterRedirects=r,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},us=class extends X{urlAfterRedirects;state;type=M.GuardsCheckStart;constructor(t,e,r,s){super(t,e),this.urlAfterRedirects=r,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hs=class extends X{urlAfterRedirects;state;shouldActivate;type=M.GuardsCheckEnd;constructor(t,e,r,s,i){super(t,e),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ds=class extends X{urlAfterRedirects;state;type=M.ResolveStart;constructor(t,e,r,s){super(t,e),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fs=class extends X{urlAfterRedirects;state;type=M.ResolveEnd;constructor(t,e,r,s){super(t,e),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ps=class{route;type=M.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},gs=class{route;type=M.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ms=class{snapshot;type=M.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vs=class{snapshot;type=M.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ys=class{snapshot;type=M.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ws=class{snapshot;type=M.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vr=class{routerEvent;position;anchor;type=M.Scroll;constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Nt=class{},rt=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function Bl(n,t){return n.providers&&!n._injector&&(n._injector=Nn(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Z(n){return n.outlet||b}function zl(n,t){let e=n.filter(r=>Z(r)===t);return e.push(...n.filter(r=>Z(r)!==t)),e}function Gt(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var _s=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Gt(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Wt(this.rootInjector)}},Wt=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,r){let s=this.getOrCreateContext(e);s.outlet=r,this.contexts.set(e,s)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new _s(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(r){return new(r||n)(R(Ce))};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hr=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=bs(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){let e=bs(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Ss(t,this._root);return e.length<2?[]:e[e.length-2].children.map(s=>s.value).filter(s=>s!==t)}pathFromRoot(t){return Ss(t,this._root).map(e=>e.value)}};function bs(n,t){if(n===t.value)return t;for(let e of t.children){let r=bs(n,e);if(r)return r}return null}function Ss(n,t){if(n===t.value)return[t];for(let e of t.children){let r=Ss(n,e);if(r.length)return r.unshift(t),r}return[]}var H=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Ke(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Gr=class extends Hr{snapshot;constructor(t,e){super(t),this.snapshot=e,Is(this,t)}toString(){return this.snapshot.toString()}};function Xo(n){let t=ql(n),e=new J([new ke("",{})]),r=new J({}),s=new J({}),i=new J({}),o=new J(""),a=new _e(e,r,i,o,s,b,n,t.root);return a.snapshot=t.root,new Gr(new H(a,[]),t)}function ql(n){let t={},e={},r={},s="",i=new Ye([],t,r,s,e,b,n,null,{});return new Jr("",new H(i,[]))}var _e=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,r,s,i,o,a,c){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=s,this.dataSubject=i,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(E(l=>l[Vt]))??_(void 0),this.url=t,this.params=e,this.queryParams=r,this.fragment=s,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(E(t=>Ze(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(E(t=>Ze(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Wr(n,t,e="emptyOnly"){let r,{routeConfig:s}=n;return t!==null&&(e==="always"||s?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:v(v({},t.params),n.params),data:v(v({},t.data),n.data),resolve:v(v(v(v({},n.data),t.data),s?.data),n._resolvedData)}:r={params:v({},n.params),data:v({},n.data),resolve:v(v({},n.data),n._resolvedData??{})},s&&Qo(s)&&(r.resolve[Vt]=s.title),r}var Ye=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Vt]}constructor(t,e,r,s,i,o,a,c,l){this.url=t,this.params=e,this.queryParams=r,this.fragment=s,this.data=i,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ze(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ze(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Jr=class extends Hr{url;constructor(t,e){super(e),this.url=t,Is(this,e)}toString(){return Yo(this._root)}};function Is(n,t){t.value._routerState=n,t.children.forEach(e=>Is(n,e))}function Yo(n){let t=n.children.length>0?` { ${n.children.map(Yo).join(", ")} } `:"";return`${n.value}${t}`}function ns(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,te(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),te(t.params,e.params)||n.paramsSubject.next(e.params),ml(t.url,e.url)||n.urlSubject.next(e.url),te(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Rs(n,t){let e=te(n.params,t.params)&&_l(n.url,t.url),r=!n.parent!=!t.parent;return e&&!r&&(!n.parent||Rs(n.parent,t.parent))}function Qo(n){return typeof n.title=="string"||n.title===null}var Vl=new P(""),Hl=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=b;activateEvents=new _t;deactivateEvents=new _t;attachEvents=new _t;detachEvents=new _t;routerOutletData=_i(void 0);parentContexts=y(Wt);location=y(Li);changeDetector=y(zn);inputBinder=y(Qr,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:s}=e.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new x(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new x(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new x(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new x(4013,!1);this._activatedRoute=e;let s=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Ts(e,a,s.injector,this.routerOutletData);this.activated=s.createComponent(o,{index:s.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=$n({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Dn]})}return n})(),Ts=class n{route;childContexts;parent;outletData;__ngOutletInjector(t){return new n(this.route,this.childContexts,t,this.outletData)}constructor(t,e,r,s){this.route=t,this.childContexts=e,this.parent=r,this.outletData=s}get(t,e){return t===_e?this.route:t===Wt?this.childContexts:t===Vl?this.outletData:this.parent.get(t,e)}},Qr=new P(""),Io=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:r}=e,s=mr([r.queryParams,r.params,r.data]).pipe(V(([i,o,a],c)=>(a=v(v(v({},i),o),a),c===0?_(a):Promise.resolve(a)))).subscribe(i=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(e);return}let o=Hi(r.component);if(!o){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of o.inputs)e.activatedComponentRef.setInput(a,i[a])});this.outletDataSubscriptions.set(e,s)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})();function Gl(n,t,e){let r=$t(n,t._root,e?e._root:void 0);return new Gr(r,t)}function $t(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=t.value;let s=Wl(n,t,e);return new H(r,s)}else{if(n.shouldAttach(t.value)){let i=n.retrieve(t.value);if(i!==null){let o=i.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>$t(n,a)),o}}let r=Jl(t.value),s=t.children.map(i=>$t(n,i));return new H(r,s)}}function Wl(n,t,e){return t.children.map(r=>{for(let s of e.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return $t(n,r,s);return $t(n,r)})}function Jl(n){return new _e(new J(n.url),new J(n.params),new J(n.queryParams),new J(n.fragment),new J(n.data),n.outlet,n.component,n)}var Ft=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},Zo="ngNavigationCancelingError";function Kr(n,t){let{redirectTo:e,navigationBehaviorOptions:r}=Ie(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,s=ea(!1,G.Redirect);return s.url=e,s.navigationBehaviorOptions=r,s}function ea(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[Zo]=!0,e.cancellationCode=t,e}function Kl(n){return ta(n)&&Ie(n.url)}function ta(n){return!!n&&n[Zo]}var Xl=(n,t,e,r)=>E(s=>(new Es(t,s.targetRouterState,s.currentRouterState,e,r).activate(n),s)),Es=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,r,s,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=s,this.inputBindingEnabled=i}activate(t){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),ns(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){let s=Ke(e);t.children.forEach(i=>{let o=i.value.outlet;this.deactivateRoutes(i,s[o],r),delete s[o]}),Object.values(s).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(t,e,r){let s=t.value,i=e?e.value:null;if(s===i)if(s.component){let o=r.getContext(s.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,r);else i&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let r=e.getContext(t.value.outlet),s=r&&t.value.component?r.children:e,i=Ke(t);for(let o of Object.values(i))this.deactivateRouteAndItsChildren(o,s);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let r=e.getContext(t.value.outlet),s=r&&t.value.component?r.children:e,i=Ke(t);for(let o of Object.values(i))this.deactivateRouteAndItsChildren(o,s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,e,r){let s=Ke(e);t.children.forEach(i=>{this.activateRoutes(i,s[i.value.outlet],r),this.forwardEvent(new ws(i.value.snapshot))}),t.children.length&&this.forwardEvent(new vs(t.value.snapshot))}activateRoutes(t,e,r){let s=t.value,i=e?e.value:null;if(ns(s),s===i)if(s.component){let o=r.getOrCreateContext(s.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,r);else if(s.component){let o=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){let a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),ns(a.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=s,o.outlet&&o.outlet.activateWith(s,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,r)}},Xr=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Qe=class{component;route;constructor(t,e){this.component=t,this.route=e}};function Yl(n,t,e){let r=n._root,s=t?t._root:null;return Pt(r,s,e,[r.value])}function Ql(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function st(n,t){let e=Symbol(),r=t.get(n,e);return r===e?typeof n=="function"&&!mi(n)?n:t.get(n):r}function Pt(n,t,e,r,s={canDeactivateChecks:[],canActivateChecks:[]}){let i=Ke(t);return n.children.forEach(o=>{Zl(o,i[o.value.outlet],e,r.concat([o.value]),s),delete i[o.value.outlet]}),Object.entries(i).forEach(([o,a])=>jt(a,e.getContext(o),s)),s}function Zl(n,t,e,r,s={canDeactivateChecks:[],canActivateChecks:[]}){let i=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){let c=eu(o,i,i.routeConfig.runGuardsAndResolvers);c?s.canActivateChecks.push(new Xr(r)):(i.data=o.data,i._resolvedData=o._resolvedData),i.component?Pt(n,t,a?a.children:null,r,s):Pt(n,t,e,r,s),c&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new Qe(a.outlet.component,o))}else o&&jt(t,a,s),s.canActivateChecks.push(new Xr(r)),i.component?Pt(n,null,a?a.children:null,r,s):Pt(n,null,e,r,s);return s}function eu(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!xe(n.url,t.url);case"pathParamsOrQueryParamsChange":return!xe(n.url,t.url)||!te(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Rs(n,t)||!te(n.queryParams,t.queryParams);case"paramsChange":default:return!Rs(n,t)}}function jt(n,t,e){let r=Ke(n),s=n.value;Object.entries(r).forEach(([i,o])=>{s.component?t?jt(o,t.children.getContext(i),e):jt(o,null,e):jt(o,t,e)}),s.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Qe(t.outlet.component,s)):e.canDeactivateChecks.push(new Qe(null,s)):e.canDeactivateChecks.push(new Qe(null,s))}function Jt(n){return typeof n=="function"}function tu(n){return typeof n=="boolean"}function ru(n){return n&&Jt(n.canLoad)}function nu(n){return n&&Jt(n.canActivate)}function su(n){return n&&Jt(n.canActivateChild)}function iu(n){return n&&Jt(n.canDeactivate)}function ou(n){return n&&Jt(n.canMatch)}function ra(n){return n instanceof ui||n?.name==="EmptyError"}var Ur=Symbol("INITIAL_VALUE");function nt(){return V(n=>mr(n.map(t=>t.pipe(Be(1),pi(Ur)))).pipe(E(t=>{for(let e of t)if(e!==!0){if(e===Ur)return Ur;if(e===!1||au(e))return e}return!0}),ae(t=>t!==Ur),Be(1)))}function au(n){return Ie(n)||n instanceof Ft}function cu(n,t){return q(e=>{let{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:i,canDeactivateChecks:o}}=e;return o.length===0&&i.length===0?_(N(v({},e),{guardsResult:!0})):lu(o,r,s,n).pipe(q(a=>a&&tu(a)?uu(r,i,n,t):_(a)),E(a=>N(v({},e),{guardsResult:a})))})}function lu(n,t,e,r){return $(n).pipe(q(s=>gu(s.component,s.route,e,t,r)),me(s=>s!==!0,!0))}function uu(n,t,e,r){return $(t).pipe(ge(s=>hi(du(s.route.parent,r),hu(s.route,r),pu(n,s.path,e),fu(n,s.route,e))),me(s=>s!==!0,!0))}function hu(n,t){return n!==null&&t&&t(new ys(n)),_(!0)}function du(n,t){return n!==null&&t&&t(new ms(n)),_(!0)}function fu(n,t,e){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return _(!0);let s=r.map(i=>kn(()=>{let o=Gt(t)??e,a=st(i,o),c=nu(a)?a.canActivate(t,n):K(o,()=>a(t,n));return Se(c).pipe(me())}));return _(s).pipe(nt())}function pu(n,t,e){let r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(o=>Ql(o)).filter(o=>o!==null).map(o=>kn(()=>{let a=o.guards.map(c=>{let l=Gt(o.node)??e,u=st(c,l),h=su(u)?u.canActivateChild(r,n):K(l,()=>u(r,n));return Se(h).pipe(me())});return _(a).pipe(nt())}));return _(i).pipe(nt())}function gu(n,t,e,r,s){let i=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!i||i.length===0)return _(!0);let o=i.map(a=>{let c=Gt(t)??s,l=st(a,c),u=iu(l)?l.canDeactivate(n,t,e,r):K(c,()=>l(n,t,e,r));return Se(u).pipe(me())});return _(o).pipe(nt())}function mu(n,t,e,r){let s=t.canLoad;if(s===void 0||s.length===0)return _(!0);let i=s.map(o=>{let a=st(o,n),c=ru(a)?a.canLoad(t,e):K(n,()=>a(t,e));return Se(c)});return _(i).pipe(nt(),na(r))}function na(n){return ai(j(t=>{if(typeof t!="boolean")throw Kr(n,t)}),E(t=>t===!0))}function vu(n,t,e,r){let s=t.canMatch;if(!s||s.length===0)return _(!0);let i=s.map(o=>{let a=st(o,n),c=ou(a)?a.canMatch(t,e):K(n,()=>a(t,e));return Se(c)});return _(i).pipe(nt(),na(r))}var Bt=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},zt=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function Je(n){return vt(new Bt(n))}function yu(n){return vt(new x(4e3,!1))}function wu(n){return vt(ea(!1,G.GuardRejected))}var Cs=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let r=[],s=e.root;for(;;){if(r=r.concat(s.segments),s.numberOfChildren===0)return _(r);if(s.numberOfChildren>1||!s.children[b])return yu(`${t.redirectTo}`);s=s.children[b]}}applyRedirectCommands(t,e,r,s,i){if(typeof e!="string"){let a=e,{queryParams:c,fragment:l,routeConfig:u,url:h,outlet:p,params:f,data:w,title:m}=s,g=K(i,()=>a({params:f,data:w,queryParams:c,fragment:l,routeConfig:u,url:h,outlet:p,title:m}));if(g instanceof le)throw new zt(g);e=g}let o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,r);if(e[0]==="/")throw new zt(o);return o}applyRedirectCreateUrlTree(t,e,r,s){let i=this.createSegmentGroup(t,e.root,r,s);return new le(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let r={};return Object.entries(t).forEach(([s,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[s]=e[a]}else r[s]=i}),r}createSegmentGroup(t,e,r,s){let i=this.createSegments(t,e.segments,r,s),o={};return Object.entries(e.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(t,c,r,s)}),new A(i,o)}createSegments(t,e,r,s){return e.map(i=>i.path[0]===":"?this.findPosParam(t,i,s):this.findOrReturn(i,r))}findPosParam(t,e,r){let s=r[e.path.substring(1)];if(!s)throw new x(4001,!1);return s}findOrReturn(t,e){let r=0;for(let s of e){if(s.path===t.path)return e.splice(r),s;r++}return t}},As={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _u(n,t,e,r,s){let i=sa(n,t,e);return i.matched?(r=Bl(t,r),vu(r,t,e,s).pipe(E(o=>o===!0?i:v({},As)))):_(i)}function sa(n,t,e){if(t.path==="**")return bu(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?v({},As):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let s=(t.matcher||gl)(e,n,t);if(!s)return v({},As);let i={};Object.entries(s.posParams??{}).forEach(([a,c])=>{i[a]=c.path});let o=s.consumed.length>0?v(v({},i),s.consumed[s.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:s.consumed,remainingSegments:e.slice(s.consumed.length),parameters:o,positionalParamSegments:s.posParams??{}}}function bu(n){return{matched:!0,parameters:n.length>0?Lo(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Po(n,t,e,r){return e.length>0&&Tu(n,e,r)?{segmentGroup:new A(t,Ru(r,new A(e,n.children))),slicedSegments:[]}:e.length===0&&Eu(n,e,r)?{segmentGroup:new A(n.segments,Su(n,e,r,n.children)),slicedSegments:e}:{segmentGroup:new A(n.segments,n.children),slicedSegments:e}}function Su(n,t,e,r){let s={};for(let i of e)if(Zr(n,t,i)&&!r[Z(i)]){let o=new A([],{});s[Z(i)]=o}return v(v({},r),s)}function Ru(n,t){let e={};e[b]=t;for(let r of n)if(r.path===""&&Z(r)!==b){let s=new A([],{});e[Z(r)]=s}return e}function Tu(n,t,e){return e.some(r=>Zr(n,t,r)&&Z(r)!==b)}function Eu(n,t,e){return e.some(r=>Zr(n,t,r))}function Zr(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function Cu(n,t,e){return t.length===0&&!n.children[e]}var Os=class{};function Au(n,t,e,r,s,i,o="emptyOnly"){return new ks(n,t,e,r,s,o,i).recognize()}var Ou=31,ks=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,r,s,i,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=r,this.config=s,this.urlTree=i,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Cs(this.urlSerializer,this.urlTree)}noMatchError(t){return new x(4002,`'${t.segmentGroup}'`)}recognize(){let t=Po(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(E(({children:e,rootSnapshot:r})=>{let s=new H(r,e),i=new Jr("",s),o=Ml(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(o),{state:i,tree:o}}))}match(t){let e=new Ye([],Object.freeze({}),Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),b,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,b,e).pipe(E(r=>({children:r,rootSnapshot:e})),Fe(r=>{if(r instanceof zt)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Bt?this.noMatchError(r):r}))}processSegmentGroup(t,e,r,s,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,e,r,i):this.processSegment(t,e,r,r.segments,s,!0,i).pipe(E(o=>o instanceof H?[o]:[]))}processChildren(t,e,r,s){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return $(i).pipe(ge(o=>{let a=r.children[o],c=zl(e,o);return this.processSegmentGroup(t,c,a,o,s)}),fi((o,a)=>(o.push(...a),o)),xn(null),di(),q(o=>{if(o===null)return Je(r);let a=ia(o);return ku(a),_(a)}))}processSegment(t,e,r,s,i,o,a){return $(e).pipe(ge(c=>this.processSegmentAgainstRoute(c._injector??t,e,c,r,s,i,o,a).pipe(Fe(l=>{if(l instanceof Bt)return _(null);throw l}))),me(c=>!!c),Fe(c=>{if(ra(c))return Cu(r,s,i)?_(new Os):Je(r);throw c}))}processSegmentAgainstRoute(t,e,r,s,i,o,a,c){return Z(r)!==o&&(o===b||!Zr(s,i,r))?Je(s):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,s,r,i,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,s,e,r,i,o,c):Je(s)}expandSegmentAgainstRouteUsingRedirect(t,e,r,s,i,o,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:h,remainingSegments:p}=sa(e,s,i);if(!c)return Je(e);typeof s.redirectTo=="string"&&s.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Ou&&(this.allowRedirects=!1));let f=new Ye(i,l,Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,Do(s),Z(s),s.component??s._loadedComponent??null,s,Mo(s)),w=Wr(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(w.params),f.data=Object.freeze(w.data);let m=this.applyRedirects.applyRedirectCommands(u,s.redirectTo,h,f,t);return this.applyRedirects.lineralizeSegments(s,m).pipe(q(g=>this.processSegment(t,r,e,g.concat(p),o,!1,a)))}matchSegmentAgainstRoute(t,e,r,s,i,o){let a=_u(e,r,s,t,this.urlSerializer);return r.path==="**"&&(e.children={}),a.pipe(V(c=>c.matched?(t=r._injector??t,this.getChildConfig(t,r,s).pipe(V(({routes:l})=>{let u=r._loadedInjector??t,{parameters:h,consumedSegments:p,remainingSegments:f}=c,w=new Ye(p,h,Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,Do(r),Z(r),r.component??r._loadedComponent??null,r,Mo(r)),m=Wr(w,o,this.paramsInheritanceStrategy);w.params=Object.freeze(m.params),w.data=Object.freeze(m.data);let{segmentGroup:g,slicedSegments:O}=Po(e,p,f,l);if(O.length===0&&g.hasChildren())return this.processChildren(u,l,g,w).pipe(E(k=>new H(w,k)));if(l.length===0&&O.length===0)return _(new H(w,[]));let F=Z(r)===i;return this.processSegment(u,l,g,O,F?b:i,!0,w).pipe(E(k=>new H(w,k instanceof H?[k]:[])))}))):Je(e)))}getChildConfig(t,e,r){return e.children?_({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?_({routes:e._loadedRoutes,injector:e._loadedInjector}):mu(t,e,r,this.urlSerializer).pipe(q(s=>s?this.configLoader.loadChildren(t,e).pipe(j(i=>{e._loadedRoutes=i.routes,e._loadedInjector=i.injector})):wu(e))):_({routes:[],injector:t})}};function ku(n){n.sort((t,e)=>t.value.outlet===b?-1:e.value.outlet===b?1:t.value.outlet.localeCompare(e.value.outlet))}function xu(n){let t=n.value.routeConfig;return t&&t.path===""}function ia(n){let t=[],e=new Set;for(let r of n){if(!xu(r)){t.push(r);continue}let s=t.find(i=>r.value.routeConfig===i.value.routeConfig);s!==void 0?(s.children.push(...r.children),e.add(s)):t.push(r)}for(let r of e){let s=ia(r.children);t.push(new H(r.value,s))}return t.filter(r=>!e.has(r))}function Do(n){return n.data||{}}function Mo(n){return n.resolve||{}}function Iu(n,t,e,r,s,i){return q(o=>Au(n,t,e,r,o.extractedUrl,s,i).pipe(E(({state:a,tree:c})=>N(v({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function Pu(n,t){return q(e=>{let{targetSnapshot:r,guards:{canActivateChecks:s}}=e;if(!s.length)return _(e);let i=new Set(s.map(c=>c.route)),o=new Set;for(let c of i)if(!o.has(c))for(let l of oa(c))o.add(l);let a=0;return $(o).pipe(ge(c=>i.has(c)?Du(c,r,n,t):(c.data=Wr(c,c.parent,n).resolve,_(void 0))),j(()=>a++),In(1),q(c=>a===o.size?_(e):oe))})}function oa(n){let t=n.children.map(e=>oa(e)).flat();return[n,...t]}function Du(n,t,e,r){let s=n.routeConfig,i=n._resolve;return s?.title!==void 0&&!Qo(s)&&(i[Vt]=s.title),Mu(i,n,t,r).pipe(E(o=>(n._resolvedData=o,n.data=Wr(n,n.parent,e).resolve,null)))}function Mu(n,t,e,r){let s=os(n);if(s.length===0)return _({});let i={};return $(s).pipe(q(o=>ju(n[o],t,e,r).pipe(me(),j(a=>{if(a instanceof Ft)throw Kr(new et,a);i[o]=a}))),In(1),E(()=>i),Fe(o=>ra(o)?oe:vt(o)))}function ju(n,t,e,r){let s=Gt(t)??r,i=st(n,s),o=i.resolve?i.resolve(t,e):K(s,()=>i(t,e));return Se(o)}function ss(n){return V(t=>{let e=n(t);return e?$(e).pipe(E(()=>t)):_(t)})}var aa=(()=>{class n{buildTitle(e){let r,s=e.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(i=>i.outlet===b);return r}getResolvedTitleForRoute(e){return e.data[Vt]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:()=>y(Uu),providedIn:"root"})}return n})(),Uu=(()=>{class n extends aa{title;constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(R(Co))};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Kt=new P("",{providedIn:"root",factory:()=>({})}),Lu=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=$i({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,s){r&1&&zi(0,"router-outlet")},dependencies:[Hl],encapsulation:2})}return n})();function Ps(n){let t=n.children&&n.children.map(Ps),e=t?N(v({},n),{children:t}):v({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==b&&(e.component=Lu),e}var qt=new P(""),Ds=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=y(Sr);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return _(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let r=Se(e.loadComponent()).pipe(E(ca),j(i=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=i}),ze(()=>{this.componentLoaders.delete(e)})),s=new An(r,()=>new pe).pipe(Cn());return this.componentLoaders.set(e,s),s}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return _({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=Nu(r,this.compiler,e,this.onLoadEndListener).pipe(ze(()=>{this.childrenLoaders.delete(r)})),o=new An(i,()=>new pe).pipe(Cn());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Nu(n,t,e,r){return Se(n.loadChildren()).pipe(E(ca),q(s=>s instanceof Ni||Array.isArray(s)?_(s):$(t.compileModuleAsync(s))),E(s=>{r&&r(n);let i,o,a=!1;return Array.isArray(s)?(o=s,a=!0):(i=s.create(e).injector,o=i.get(qt,[],{optional:!0,self:!0}).flat()),{routes:o.map(Ps),injector:i}}))}function $u(n){return n&&typeof n=="object"&&"default"in n}function ca(n){return $u(n)?n.default:n}var Ms=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:()=>y(Fu),providedIn:"root"})}return n})(),Fu=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),la=new P(""),ua=new P("");function Bu(n,t,e){let r=n.get(ua),s=n.get(B);return n.get(ve).runOutsideAngular(()=>{if(!s.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let i,o=new Promise(l=>{i=l}),a=s.startViewTransition(()=>(i(),zu(n))),{onViewTransitionCreated:c}=r;return c&&K(n,()=>c({transition:a,from:t,to:e})),o})}function zu(n){return new Promise(t=>{Ei({read:()=>setTimeout(t)},{injector:n})})}var ha=new P(""),js=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new pe;transitionAbortSubject=new pe;configLoader=y(Ds);environmentInjector=y(Ce);destroyRef=y(wi);urlSerializer=y(Ht);rootContexts=y(Wt);location=y(Tt);inputBindingEnabled=y(Qr,{optional:!0})!==null;titleStrategy=y(aa);options=y(Kt,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=y(Ms);createViewTransition=y(la,{optional:!0});navigationErrorHandler=y(ha,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>_(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=s=>this.events.next(new ps(s)),r=s=>this.events.next(new gs(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;this.transitions?.next(N(v(v({},this.transitions.value),e),{id:r}))}setupNavigations(e,r,s){return this.transitions=new J({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Mt,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ae(i=>i.id!==0),E(i=>N(v({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),V(i=>{let o=!1,a=!1;return _(i).pipe(V(c=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",G.SupersededByNewNavigation),oe;this.currentTransition=i,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?N(v({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=c.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!l&&u!=="reload"){let h="";return this.events.next(new we(c.id,this.urlSerializer.serialize(c.rawUrl),h,zr.IgnoredSameUrlNavigation)),c.resolve(!1),oe}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return _(c).pipe(V(h=>{let p=this.transitions?.getValue();return this.events.next(new tt(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),p!==this.transitions?.getValue()?oe:Promise.resolve(h)}),Iu(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),j(h=>{i.targetSnapshot=h.targetSnapshot,i.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=N(v({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let p=new qr(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:p,source:f,restoredState:w,extras:m}=c,g=new tt(h,this.urlSerializer.serialize(p),f,w);this.events.next(g);let O=Xo(this.rootComponentType).snapshot;return this.currentTransition=i=N(v({},c),{targetSnapshot:O,urlAfterRedirects:p,extras:N(v({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,_(i)}else{let h="";return this.events.next(new we(c.id,this.urlSerializer.serialize(c.extractedUrl),h,zr.IgnoredByUrlHandlingStrategy)),c.resolve(!1),oe}}),j(c=>{let l=new us(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),E(c=>(this.currentTransition=i=N(v({},c),{guards:Yl(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),i)),cu(this.environmentInjector,c=>this.events.next(c)),j(c=>{if(i.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Kr(this.urlSerializer,c.guardsResult);let l=new hs(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),ae(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",G.GuardRejected),!1)),ss(c=>{if(c.guards.canActivateChecks.length)return _(c).pipe(j(l=>{let u=new ds(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),V(l=>{let u=!1;return _(l).pipe(Pu(this.paramsInheritanceStrategy,this.environmentInjector),j({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",G.NoDataFromResolver)}}))}),j(l=>{let u=new fs(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),ss(c=>{let l=u=>{let h=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(u.routeConfig).pipe(j(p=>{u.component=p}),E(()=>{})));for(let p of u.children)h.push(...l(p));return h};return mr(l(c.targetSnapshot.root)).pipe(xn(null),Be(1))}),ss(()=>this.afterPreactivation()),V(()=>{let{currentSnapshot:c,targetSnapshot:l}=i,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?$(u).pipe(E(()=>i)):_(i)}),E(c=>{let l=Gl(e.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=i=N(v({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,i}),j(()=>{this.events.next(new Nt)}),Xl(this.rootContexts,e.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Be(1),j({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new re(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),gi(this.transitionAbortSubject.pipe(j(c=>{throw c}))),ze(()=>{!o&&!a&&this.cancelNavigationTransition(i,"",G.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),Fe(c=>{if(this.destroyed)return i.resolve(!1),oe;if(a=!0,ta(c))this.events.next(new ce(i.id,this.urlSerializer.serialize(i.extractedUrl),c.message,c.cancellationCode)),Kl(c)?this.events.next(new rt(c.url,c.navigationBehaviorOptions)):i.resolve(!1);else{let l=new Lt(i.id,this.urlSerializer.serialize(i.extractedUrl),c,i.targetSnapshot??void 0);try{let u=K(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(u instanceof Ft){let{message:h,cancellationCode:p}=Kr(this.urlSerializer,u);this.events.next(new ce(i.id,this.urlSerializer.serialize(i.extractedUrl),h,p)),this.events.next(new rt(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(l),c}catch(u){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(u)}}return oe}))}))}cancelNavigationTransition(e,r,s){let i=new ce(e.id,this.urlSerializer.serialize(e.extractedUrl),r,s);this.events.next(i),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qu(n){return n!==Mt}var Vu=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:()=>y(Hu),providedIn:"root"})}return n})(),xs=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},Hu=(()=>{class n extends xs{static \u0275fac=(()=>{let e;return function(s){return(e||(e=Mn(n)))(s||n)}})();static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),da=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:()=>y(Gu),providedIn:"root"})}return n})(),Gu=(()=>{class n extends da{location=y(Tt);urlSerializer=y(Ht);options=y(Kt,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=y(Ms);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new le;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=Xo(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&e(r.url,r.state)})}handleRouterEvent(e,r){if(e instanceof tt)this.stateMemento=this.createStateMemento();else if(e instanceof we)this.rawUrlTree=r.initialUrl;else if(e instanceof qr){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??s,r)}}else e instanceof Nt?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):e instanceof ce&&(e.code===G.GuardRejected||e.code===G.NoDataFromResolver)?this.restoreHistory(r):e instanceof Lt?this.restoreHistory(r,!0):e instanceof re&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,r){let s=e instanceof le?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let i=this.browserPageId,o=v(v({},r.extras.state),this.generateNgRouterState(r.id,i));this.location.replaceState(s,"",o)}else{let i=v(v({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",i)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,i=this.currentPageId-s;i!==0?this.location.historyGo(i):this.currentUrlTree===e.finalUrl&&i===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(s){return(e||(e=Mn(n)))(s||n)}})();static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fa(n,t){n.events.pipe(ae(e=>e instanceof re||e instanceof ce||e instanceof Lt||e instanceof we),E(e=>e instanceof re||e instanceof we?0:(e instanceof ce?e.code===G.Redirect||e.code===G.SupersededByNewNavigation:!1)?2:1),ae(e=>e!==2),Be(1)).subscribe(()=>{t()})}var Wu={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ju={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},be=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=y(Fn);stateManager=y(da);options=y(Kt,{optional:!0})||{};pendingTasks=y(yr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=y(js);urlSerializer=y(Ht);location=y(Tt);urlHandlingStrategy=y(Ms);_events=new pe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=y(Vu);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=y(qt,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!y(Qr,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new oi;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,i=this.navigationTransitions.currentNavigation;if(s!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof ce&&r.code!==G.Redirect&&r.code!==G.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof re)this.navigated=!0;else if(r instanceof rt){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),c=v({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||qu(s.source)},o);this.scheduleNavigation(a,Mt,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}Xu(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Mt,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",r)},0)})}navigateToSyncWithBrowser(e,r,s){let i={replaceUrl:!0},o=s?.navigationId?s:null;if(s){let c=v({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(i.state=c)}let a=this.parseUrl(e);this.scheduleNavigation(a,r,o,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Ps),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:s,queryParams:i,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=v(v({},this.currentUrlTree.queryParams),i);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}u!==null&&(u=this.removeEmptyProps(u));let h;try{let p=s?s.snapshot:this.routerState.snapshot.root;h=Go(p)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),h=this.currentUrlTree.root}return Wo(h,e,u,l??null)}navigateByUrl(e,r={skipLocationChange:!1}){let s=Ie(e)?e:this.parseUrl(e),i=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(i,Mt,null,r)}navigate(e,r={skipLocationChange:!1}){return Ku(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,r){let s;if(r===!0?s=v({},Wu):r===!1?s=v({},Ju):s=r,Ie(e))return Ao(this.currentUrlTree,e,s);let i=this.parseUrl(e);return Ao(this.currentUrlTree,i,s)}removeEmptyProps(e){return Object.entries(e).reduce((r,[s,i])=>(i!=null&&(r[s]=i),r),{})}scheduleNavigation(e,r,s,i,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((h,p)=>{a=h,c=p});let u=this.pendingTasks.add();return fa(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:i,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ku(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new x(4008,!1)}function Xu(n){return!(n instanceof Nt)&&!(n instanceof rt)}var pf=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new pe;constructor(e,r,s,i,o,a){this.router=e,this.route=r,this.tabIndexAttribute=s,this.renderer=i,this.el=o,this.locationStrategy=a;let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=e.events.subscribe(l=>{l instanceof re&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ie(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,r,s,i,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||r||s||i||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let r=this.href===null?null:Di(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(e,r){let s=this.renderer,i=this.el.nativeElement;r!==null?s.setAttribute(i,e,r):s.removeAttribute(i,e)}get urlTree(){return this.routerLinkInput===null?null:Ie(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Ge(be),Ge(_e),yi("tabindex"),Ge(ji),Ge(bi),Ge(Rt))};static \u0275dir=$n({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){r&1&&qi("click",function(o){return s.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&Bi("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Rr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Rr],replaceUrl:[2,"replaceUrl","replaceUrl",Rr],routerLink:"routerLink"},features:[Dn]})}return n})();var Yr=class{};var Yu=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(e,r,s,i,o){this.router=e,this.injector=s,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ae(e=>e instanceof re),ge(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){let s=[];for(let i of r){i.providers&&!i._injector&&(i._injector=Nn(i.providers,e,`Route: ${i.path}`));let o=i._injector??e,a=i._loadedInjector??o;(i.loadChildren&&!i._loadedRoutes&&i.canLoad===void 0||i.loadComponent&&!i._loadedComponent)&&s.push(this.preloadConfig(o,i)),(i.children||i._loadedRoutes)&&s.push(this.processRoutes(a,i.children??i._loadedRoutes))}return $(s).pipe(On())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let s;r.loadChildren&&r.canLoad===void 0?s=this.loader.loadChildren(e,r):s=_(null);let i=s.pipe(q(o=>o===null?_(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return $([i,o]).pipe(On())}else return i})}static \u0275fac=function(r){return new(r||n)(R(be),R(Sr),R(Ce),R(Yr),R(Ds))};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pa=new P(""),Qu=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(e,r,s,i,o={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=s,this.zone=i,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof tt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof re?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof we&&e.code===zr.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Vr&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Vr(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){Ui()};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})();function gf(n,...t){return yt([{provide:qt,multi:!0,useValue:n},[],{provide:_e,useFactory:ga,deps:[be]},{provide:_r,multi:!0,useFactory:ma},t.map(e=>e.\u0275providers)])}function ga(n){return n.routerState.root}function Xt(n,t){return{\u0275kind:n,\u0275providers:t}}function ma(){let n=y(wt);return t=>{let e=n.get(br);if(t!==e.components[0])return;let r=n.get(be),s=n.get(va);n.get(Us)===1&&r.initialNavigation(),n.get(ya,null,Pn.Optional)?.setUpPreloading(),n.get(pa,null,Pn.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}var va=new P("",{factory:()=>new pe}),Us=new P("",{providedIn:"root",factory:()=>1});function Zu(){return Xt(2,[{provide:Us,useValue:0},{provide:Bn,multi:!0,deps:[wt],useFactory:t=>{let e=t.get(Ji,Promise.resolve());return()=>e.then(()=>new Promise(r=>{let s=t.get(be),i=t.get(va);fa(s,()=>{r(!0)}),t.get(js).afterPreactivation=()=>(r(!0),i.closed?_(void 0):i),s.initialNavigation()}))}}])}function eh(){return Xt(3,[{provide:Bn,multi:!0,useFactory:()=>{let t=y(be);return()=>{t.setUpLocationChangeListener()}}},{provide:Us,useValue:2}])}var ya=new P("");function th(n){return Xt(0,[{provide:ya,useExisting:Yu},{provide:Yr,useExisting:n}])}function rh(){return Xt(8,[Io,{provide:Qr,useExisting:Io}])}function nh(n){let t=[{provide:la,useValue:Bu},{provide:ua,useValue:v({skipNextTransition:!!n?.skipInitialTransition},n)}];return Xt(9,t)}var sh=[Tt,{provide:Ht,useClass:et},be,Wt,{provide:_e,useFactory:ga,deps:[be]},Ds,[]],mf=(()=>{class n{constructor(){}static forRoot(e,r){return{ngModule:n,providers:[sh,[],{provide:qt,multi:!0,useValue:e},[],r?.errorHandler?{provide:ha,useValue:r.errorHandler}:[],{provide:Kt,useValue:r||{}},r?.useHash?oh():ah(),ih(),r?.preloadingStrategy?th(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?ch(r):[],r?.bindToComponentInputs?rh().\u0275providers:[],r?.enableViewTransitions?nh().\u0275providers:[],lh()]}}static forChild(e){return{ngModule:n,providers:[{provide:qt,multi:!0,useValue:e}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=wr({type:n});static \u0275inj=vr({})}return n})();function ih(){return{provide:pa,useFactory:()=>{let n=y(Qi),t=y(ve),e=y(Kt),r=y(js),s=y(Ht);return e.scrollOffset&&n.setOffset(e.scrollOffset),new Qu(s,r,n,t,e)}}}function oh(){return{provide:Rt,useClass:Xi}}function ah(){return{provide:Rt,useClass:Ki}}function ch(n){return[n.initialNavigation==="disabled"?eh().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Zu().\u0275providers:[]]}var jo=new P("");function lh(){return[{provide:jo,useFactory:ma},{provide:_r,multi:!0,useExisting:jo}]}var wa=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-NPJLHOA5.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)};var Yt=class extends Error{constructor(t,e="FunctionsError",r){super(t),this.name=e,this.context=r}},en=class extends Yt{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},tn=class extends Yt{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},rn=class extends Yt{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},Ls=function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n}(Ls||{});var uh=function(n,t,e,r){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})},Qt=class{constructor(t,{headers:e={},customFetch:r,region:s=Ls.Any}={}){this.url=t,this.headers=e,this.region=s,this.fetch=wa(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,e={}){var r;return uh(this,void 0,void 0,function*(){try{let{headers:s,method:i,body:o}=e,a={},{region:c}=e;c||(c=this.region),c&&c!=="any"&&(a["x-region"]=c);let l;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));let u=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:l}).catch(w=>{throw new en(w)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new tn(u);if(!u.ok)throw new rn(u);let p=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return p==="application/json"?f=yield u.json():p==="application/octet-stream"?f=yield u.blob():p==="text/event-stream"?f=u:p==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(s){return{data:null,error:s}}})}};var Pa=mc(Ia(),1),{PostgrestClient:Da,PostgrestQueryBuilder:Uf,PostgrestFilterBuilder:Lf,PostgrestTransformBuilder:Nf,PostgrestBuilder:$f,PostgrestError:Sh}=Pa.default;var Ma="2.11.2";var ja={"X-Client-Info":`realtime-js/${Ma}`},Ua="1.0.0",an=1e4,La=1e3,ot=function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n}(ot||{}),W=function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n}(W||{}),Y=function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n}(Y||{}),Ks=function(n){return n.websocket="websocket",n}(Ks||{}),Pe=function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n}(Pe||{});var cn=class{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){let e=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,e,r)}_decodeBroadcast(t,e,r){let s=e.getUint8(1),i=e.getUint8(2),o=this.HEADER_LENGTH+2,a=r.decode(t.slice(o,o+s));o=o+s;let c=r.decode(t.slice(o,o+i));o=o+i;let l=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:c,payload:l}}};var at=class{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var I=function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n}(I||{}),Ys=(n,t,e={})=>{var r;let s=(r=e.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=Rh(o,n,t,s),i),{})},Rh=(n,t,e,r)=>{let s=t.find(a=>a.name===n),i=s?.type,o=e[n];return i&&!r.includes(i)?Na(i,o):Xs(o)},Na=(n,t)=>{if(n.charAt(0)==="_"){let e=n.slice(1,n.length);return Ah(t,e)}switch(n){case I.bool:return Th(t);case I.float4:case I.float8:case I.int2:case I.int4:case I.int8:case I.numeric:case I.oid:return Eh(t);case I.json:case I.jsonb:return Ch(t);case I.timestamp:return Oh(t);case I.abstime:case I.date:case I.daterange:case I.int4range:case I.int8range:case I.money:case I.reltime:case I.text:case I.time:case I.timestamptz:case I.timetz:case I.tsrange:case I.tstzrange:return Xs(t);default:return Xs(t)}},Xs=n=>n,Th=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Eh=n=>{if(typeof n=="string"){let t=parseFloat(n);if(!Number.isNaN(t))return t}return n},Ch=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},Ah=(n,t)=>{if(typeof n!="string")return n;let e=n.length-1,r=n[e];if(n[0]==="{"&&r==="}"){let i,o=n.slice(1,e);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Na(t,a))}return n},Oh=n=>typeof n=="string"?n.replace(" ","T"):n,ln=n=>{let t=n;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};var ct=class{constructor(t,e,r={},s=an){this.channel=t,this.event=e,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var r;return this._hasReceived(t)&&e((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var ir=class n{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{let{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=n.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{let{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=n.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,r,s){let i=this.cloneDeep(t),o=this.transformState(e),a={},c={};return this.map(i,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{let h=i[l];if(h){let p=u.map(g=>g.presence_ref),f=h.map(g=>g.presence_ref),w=u.filter(g=>f.indexOf(g.presence_ref)<0),m=h.filter(g=>p.indexOf(g.presence_ref)<0);w.length>0&&(a[l]=w),m.length>0&&(c[l]=m)}else a[l]=u}),this.syncDiff(i,{joins:a,leaves:c},r,s)}static syncDiff(t,e,r,s){let{joins:i,leaves:o}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,c)=>{var l;let u=(l=t[a])!==null&&l!==void 0?l:[];if(t[a]=this.cloneDeep(c),u.length>0){let h=t[a].map(f=>f.presence_ref),p=u.filter(f=>h.indexOf(f.presence_ref)<0);t[a].unshift(...p)}r(a,u,c)}),this.map(o,(a,c)=>{let l=t[a];if(!l)return;let u=c.map(h=>h.presence_ref);l=l.filter(h=>u.indexOf(h.presence_ref)<0),t[a]=l,s(a,l,c),l.length===0&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(r=>e(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,r)=>{let s=t[r];return"metas"in s?e[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):e[r]=s,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var ue=function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n}(ue||{});var or=class n{constructor(t,e={config:{}},r){this.topic=t,this.params=e,this.socket=r,this.bindings={},this.state=W.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new ct(this,Y.join,this.params,this.timeout),this.rejoinTimer=new at(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=W.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=W.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=W.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=W.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Y.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new ir(this),this.broadcastEndpointURL=ln(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,e=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>t?.(ue.CHANNEL_ERROR,u)),this._onClose(()=>t?.(ue.CLOSED));let c={},l={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},c)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",h=>d(this,[h],function*({postgres_changes:u}){var p;if(this.socket.setAuth(),u===void 0){t?.(ue.SUBSCRIBED);return}else{let f=this.bindings.postgres_changes,w=(p=f?.length)!==null&&p!==void 0?p:0,m=[];for(let g=0;g<w;g++){let O=f[g],{filter:{event:F,schema:k,table:L,filter:Q}}=O,fe=u&&u[g];if(fe&&fe.event===F&&fe.schema===k&&fe.table===L&&fe.filter===Q)m.push(Object.assign(Object.assign({},O),{id:fe.id}));else{this.unsubscribe(),t?.(ue.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,t&&t(ue.SUBSCRIBED);return}})).receive("error",u=>{t?.(ue.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t?.(ue.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(r){return d(this,arguments,function*(t,e={}){return yield this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)})}untrack(){return d(this,arguments,function*(t={}){return yield this.send({type:"presence",event:"untrack"},t)})}on(t,e,r){return this._on(t,e,r)}send(r){return d(this,arguments,function*(t,e={}){var s,i;if(!this._canPush()&&t.type==="broadcast"){let{event:o,payload:a}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{let u=yield this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=e.timeout)!==null&&s!==void 0?s:this.timeout);return yield(i=u.body)===null||i===void 0?void 0:i.cancel(),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,c,l;let u=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(c=(a=this.params)===null||a===void 0?void 0:a.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=W.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Y.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{let s=new ct(this,Y.leave,{},t);s.receive("ok",()=>{e(),r("ok")}).receive("timeout",()=>{e(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}_fetchWithTimeout(t,e,r){return d(this,null,function*(){let s=new AbortController,i=setTimeout(()=>s.abort(),r),o=yield this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:s.signal}));return clearTimeout(i),o})}_push(t,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ct(this,t,e,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,e,r){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,r){var s,i;let o=t.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=Y;if(r&&[a,c,l,u].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,e,r);if(e&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var w,m,g;return((w=f.filter)===null||w===void 0?void 0:w.event)==="*"||((g=(m=f.filter)===null||m===void 0?void 0:m.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(f=>f.callback(p,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var w,m,g,O,F,k;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){let L=f.id,Q=(w=f.filter)===null||w===void 0?void 0:w.event;return L&&((m=e.ids)===null||m===void 0?void 0:m.includes(L))&&(Q==="*"||Q?.toLocaleLowerCase()===((g=e.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{let L=(F=(O=f?.filter)===null||O===void 0?void 0:O.event)===null||F===void 0?void 0:F.toLocaleLowerCase();return L==="*"||L===((k=e?.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof p=="object"&&"ids"in p){let w=p.data,{schema:m,table:g,commit_timestamp:O,type:F,errors:k}=w;p=Object.assign(Object.assign({},{schema:m,table:g,commit_timestamp:O,eventType:F,new:{},old:{},errors:k}),this._getPayloadRecords(w))}f.callback(p,r)})}_isClosed(){return this.state===W.closed}_isJoined(){return this.state===W.joined}_isJoining(){return this.state===W.joining}_isLeaving(){return this.state===W.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,r){let s=t.toLocaleLowerCase(),i={type:s,filter:e,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,e){let r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&n.isEqual(s.filter,e))}),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let r in t)if(t[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Y.close,{},t)}_onError(t){this._on(Y.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=W.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=Ys(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=Ys(t.columns,t.old_record)),e}};var xh=()=>{},Ih=typeof WebSocket<"u",Ph=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,ar=class{constructor(t,e){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=ja,this.params={},this.timeout=an,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=xh,this.conn=null,this.sendBuffer=[],this.serializer=new cn,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>import("./chunk-NPJLHOA5.js").then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${t}/${Ks.websocket}`,this.httpEndpoint=ln(t),e?.transport?this.transport=e.transport:this.transport=null,e?.params&&(this.params=e.params),e?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),e.headers)),e?.timeout&&(this.timeout=e.timeout),e?.logger&&(this.logger=e.logger),e?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=e.heartbeatIntervalMs);let s=(r=e?.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=e?.reconnectAfterMs?e.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=e?.encode?e.encode:(i,o)=>o(JSON.stringify(i)),this.decode=e?.decode?e.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new at(()=>d(this,null,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(e?.fetch),e?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=e?.worker||!1,this.workerUrl=e?.workerUrl}this.accessToken=e?.accessToken||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Ih){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Qs(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),import("./chunk-GFTZZNGD.js").then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ua}))}disconnect(t,e){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,e??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(t){return d(this,null,function*(){let e=yield t.unsubscribe();return this.channels.length===0&&this.disconnect(),e})}removeAllChannels(){return d(this,null,function*(){let t=yield Promise.all(this.channels.map(e=>e.unsubscribe()));return this.disconnect(),t})}log(t,e,r){this.logger(t,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ot.connecting:return Pe.Connecting;case ot.open:return Pe.Open;case ot.closing:return Pe.Closing;default:return Pe.Closed}}isConnected(){return this.connectionState()===Pe.Open}channel(t,e={config:{}}){let r=new or(`realtime:${t}`,e,this);return this.channels.push(r),r}push(t){let{topic:e,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${e} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(t=null){return d(this,null,function*(){let e=t||this.accessToken&&(yield this.accessToken())||this.accessTokenValue;if(e){let r=null;try{r=JSON.parse(atob(e.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=e,this.channels.forEach(s=>{e&&s.updateJoinPayload({access_token:e}),s.joinedOnce&&s._isJoined()&&s._push(Y.access_token,{access_token:e})})}})}sendHeartbeat(){return d(this,null,function*(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(La,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}})}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,e=>{let{topic:r,event:s,payload:i,ref:o}=e;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(e))})}_onConnOpen(){return d(this,null,function*(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(e=>e(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(e=>e(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Y.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;let r=t.match(/\?/)?"&":"?",s=new URLSearchParams(e);return`${t}${r}${s}`}_workerObjectUrl(t){let e;if(t)e=t;else{let r=new Blob([Ph],{type:"application/javascript"});e=URL.createObjectURL(r)}return e}};var Qs=class{constructor(t,e,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ot.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}};var lt=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function D(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var un=class extends lt{constructor(t,e){super(t),this.name="StorageApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}},De=class extends lt{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};var Dh=function(n,t,e,r){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})},dn=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-NPJLHOA5.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},$a=()=>Dh(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-NPJLHOA5.js")).Response:Response}),hn=n=>{if(Array.isArray(n))return n.map(e=>hn(e));if(typeof n=="function"||n!==Object(n))return n;let t={};return Object.entries(n).forEach(([e,r])=>{let s=e.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=hn(r)}),t};var Me=function(n,t,e,r){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})},Zs=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Mh=(n,t,e)=>Me(void 0,void 0,void 0,function*(){let r=yield $a();n instanceof r&&!e?.noResolveJson?n.json().then(s=>{t(new un(Zs(s),n.status||500))}).catch(s=>{t(new De(Zs(s),s))}):t(new De(Zs(n),n))}),jh=(n,t,e,r)=>{let s={method:n,headers:t?.headers||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t?.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),e))};function cr(n,t,e,r,s,i){return Me(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(e,jh(t,r,s,i)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Mh(c,a,r))})})}function ut(n,t,e,r){return Me(this,void 0,void 0,function*(){return cr(n,"GET",t,e,r)})}function ne(n,t,e,r,s){return Me(this,void 0,void 0,function*(){return cr(n,"POST",t,r,s,e)})}function Fa(n,t,e,r,s){return Me(this,void 0,void 0,function*(){return cr(n,"PUT",t,r,s,e)})}function Ba(n,t,e,r){return Me(this,void 0,void 0,function*(){return cr(n,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),r)})}function fn(n,t,e,r,s){return Me(this,void 0,void 0,function*(){return cr(n,"DELETE",t,r,s,e)})}var z=function(n,t,e,r){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})},Uh={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},za={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},pn=class{constructor(t,e={},r,s){this.url=t,this.headers=e,this.bucketId=r,this.fetch=dn(s)}uploadOrUpdate(t,e,r,s){return z(this,void 0,void 0,function*(){try{let i,o=Object.assign(Object.assign({},za),s),a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)}),c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s?.headers&&(a=Object.assign(Object.assign({},a),s.headers));let l=this._removeEmptyFolders(e),u=this._getFinalPath(l),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:i,headers:a},o?.duplex?{duplex:o.duplex}:{})),p=yield h.json();return h.ok?{data:{path:l,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(i){if(D(i))return{data:null,error:i};throw i}})}upload(t,e,r){return z(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,r)})}uploadToSignedUrl(t,e,r,s){return z(this,void 0,void 0,function*(){let i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let c,l=Object.assign({upsert:za.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",l.cacheControl)):(c=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);let h=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:u}),p=yield h.json();return h.ok?{data:{path:i,fullPath:p.Key},error:null}:{data:null,error:p}}catch(c){if(D(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,e){return z(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),s=Object.assign({},this.headers);e?.upsert&&(s["x-upsert"]="true");let i=yield ne(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new lt("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(D(r))return{data:null,error:r};throw r}})}update(t,e,r){return z(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,r)})}move(t,e,r){return z(this,void 0,void 0,function*(){try{return{data:yield ne(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(D(s))return{data:null,error:s};throw s}})}copy(t,e,r){return z(this,void 0,void 0,function*(){try{return{data:{path:(yield ne(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(D(s))return{data:null,error:s};throw s}})}createSignedUrl(t,e,r){return z(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield ne(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(D(s))return{data:null,error:s};throw s}})}createSignedUrls(t,e,r){return z(this,void 0,void 0,function*(){try{let s=yield ne(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),i=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(D(s))return{data:null,error:s};throw s}})}download(t,e){return z(this,void 0,void 0,function*(){let s=typeof e?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(e?.transform||{}),o=i?`?${i}`:"";try{let a=this._getFinalPath(t);return{data:yield(yield ut(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(D(a))return{data:null,error:a};throw a}})}info(t){return z(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{let r=yield ut(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:hn(r),error:null}}catch(r){if(D(r))return{data:null,error:r};throw r}})}exists(t){return z(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{return yield Ba(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(D(r)&&r instanceof De){let s=r.originalError;if([400,404].includes(s?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,e){let r=this._getFinalPath(t),s=[],i=e?.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&s.push(i);let a=typeof e?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(e?.transform||{});c!==""&&s.push(c);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(t){return z(this,void 0,void 0,function*(){try{return{data:yield fn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(D(e))return{data:null,error:e};throw e}})}list(t,e,r){return z(this,void 0,void 0,function*(){try{let s=Object.assign(Object.assign(Object.assign({},Uh),e),{prefix:t||""});return{data:yield ne(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(D(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};var qa="2.7.1";var Va={"X-Client-Info":`storage-js/${qa}`};var ht=function(n,t,e,r){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})},gn=class{constructor(t,e={},r){this.url=t,this.headers=Object.assign(Object.assign({},Va),e),this.fetch=dn(r)}listBuckets(){return ht(this,void 0,void 0,function*(){try{return{data:yield ut(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(D(t))return{data:null,error:t};throw t}})}getBucket(t){return ht(this,void 0,void 0,function*(){try{return{data:yield ut(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(D(e))return{data:null,error:e};throw e}})}createBucket(t,e={public:!1}){return ht(this,void 0,void 0,function*(){try{return{data:yield ne(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(D(r))return{data:null,error:r};throw r}})}updateBucket(t,e){return ht(this,void 0,void 0,function*(){try{return{data:yield Fa(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(D(r))return{data:null,error:r};throw r}})}emptyBucket(t){return ht(this,void 0,void 0,function*(){try{return{data:yield ne(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(D(e))return{data:null,error:e};throw e}})}deleteBucket(t){return ht(this,void 0,void 0,function*(){try{return{data:yield fn(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(D(e))return{data:null,error:e};throw e}})}};var lr=class extends gn{constructor(t,e={},r){super(t,e,r)}from(t){return new pn(this.url,this.headers,t,this.fetch)}};var Ha="2.48.0";var ur="";typeof Deno<"u"?ur="deno":typeof document<"u"?ur="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ur="react-native":ur="node";var Lh={"X-Client-Info":`supabase-js-${ur}/${Ha}`},Ga={headers:Lh},Wa={schema:"public"},Ja={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ka={};to();var Nh=function(n,t,e,r){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})},$h=n=>{let t;return n?t=n:typeof fetch>"u"?t=Zi:t=fetch,(...e)=>t(...e)},Fh=()=>typeof Headers>"u"?eo:Headers,Xa=(n,t,e)=>{let r=$h(e),s=Fh();return(i,o)=>Nh(void 0,void 0,void 0,function*(){var a;let c=(a=yield t())!==null&&a!==void 0?a:n,l=new s(o?.headers);return l.has("apikey")||l.set("apikey",n),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:l}))})};var Bh=function(n,t,e,r){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})};function Ya(n){return n.replace(/\/$/,"")}function Qa(n,t){let{db:e,auth:r,realtime:s,global:i}=n,{db:o,auth:a,realtime:c,global:l}=t,u={db:Object.assign(Object.assign({},o),e),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},c),s),global:Object.assign(Object.assign({},l),i),accessToken:()=>Bh(this,void 0,void 0,function*(){return""})};return n.accessToken?u.accessToken=n.accessToken:delete u.accessToken,u}function Za(n){return Math.round(Date.now()/1e3)+n}function ec(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let t=Math.random()*16|0;return(n=="x"?t:t&3|8).toString(16)})}var ee=()=>typeof document<"u",je={tested:!1,writable:!1},Re=()=>{if(!ee())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(je.tested)return je.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),je.tested=!0,je.writable=!0}catch{je.tested=!0,je.writable=!1}return je.writable};function mn(n){let t={},e=new URL(n);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return e.searchParams.forEach((r,s)=>{t[s]=r}),t}var vn=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-NPJLHOA5.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},tc=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Te=(n,t,e)=>d(void 0,null,function*(){yield n.setItem(t,JSON.stringify(e))}),dr=(n,t)=>d(void 0,null,function*(){let e=yield n.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}}),yn=(n,t)=>d(void 0,null,function*(){yield n.removeItem(t)});function zh(n){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="",r,s,i,o,a,c,l,u=0;for(n=n.replace("-","+").replace("_","/");u<n.length;)o=t.indexOf(n.charAt(u++)),a=t.indexOf(n.charAt(u++)),c=t.indexOf(n.charAt(u++)),l=t.indexOf(n.charAt(u++)),r=o<<2|a>>4,s=(a&15)<<4|c>>2,i=(c&3)<<6|l,e=e+String.fromCharCode(r),c!=64&&s!=0&&(e=e+String.fromCharCode(s)),l!=64&&i!=0&&(e=e+String.fromCharCode(i));return e}var hr=class n{constructor(){this.promise=new n.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}};hr.promiseConstructor=Promise;function ei(n){let t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,e=n.split(".");if(e.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(e[1]))throw new Error("JWT is not valid: payload is not in base64url format");let r=e[1];return JSON.parse(zh(r))}function rc(n){return d(this,null,function*(){return yield new Promise(t=>{setTimeout(()=>t(null),n)})})}function nc(n,t){return new Promise((r,s)=>{d(this,null,function*(){for(let i=0;i<1/0;i++)try{let o=yield n(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})})}function qh(n){return("0"+n.toString(16)).substr(-2)}function Ue(){let t=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length,s="";for(let i=0;i<56;i++)s+=e.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,qh).join("")}function Vh(n){return d(this,null,function*(){let e=new TextEncoder().encode(n),r=yield crypto.subtle.digest("SHA-256",e),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")})}function Hh(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function Le(n){return d(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let e=yield Vh(n);return Hh(e)})}var fr=class extends Error{constructor(t,e){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e}};function S(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var wn=class extends fr{constructor(t,e){super(t,e),this.name="AuthApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}};function sc(n){return S(n)&&n.name==="AuthApiError"}var dt=class extends fr{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}},he=class extends fr{constructor(t,e,r){super(t),this.name=e,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}},de=class extends he{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}},ft=class extends he{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}},Ne=class extends he{constructor(t){super(t,"AuthInvalidCredentialsError",400)}},$e=class extends he{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},pr=class extends he{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},pt=class extends he{constructor(t,e){super(t,"AuthRetryableFetchError",e)}};function bn(n){return S(n)&&n.name==="AuthRetryableFetchError"}var _n=class extends he{constructor(t,e,r){super(t,"AuthWeakPasswordError",e),this.reasons=r}};var Gh=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(e[r[s]]=n[r[s]]);return e},gt=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Wh=[502,503,504];function ic(n){return d(this,null,function*(){if(!tc(n))throw new pt(gt(n),0);if(Wh.includes(n.status))throw new pt(gt(n),n.status);let t;try{t=yield n.json()}catch(e){throw new dt(gt(e),e)}throw typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((e,r)=>e&&typeof r=="string",!0)?new _n(gt(t),n.status,t.weak_password.reasons):new wn(gt(t),n.status||500)})}var Jh=(n,t,e,r)=>{let s={method:n,headers:t?.headers||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),e))};function T(n,t,e,r){return d(this,null,function*(){var s;let i=Object.assign({},r?.headers);r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);let o=(s=r?.query)!==null&&s!==void 0?s:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);let a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=yield Kh(n,t,e+a,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}})}function Kh(n,t,e,r,s,i){return d(this,null,function*(){let o=Jh(t,r,s,i),a;try{a=yield n(e,o)}catch(c){throw console.error(c),new pt(gt(c),0)}if(a.ok||(yield ic(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(c){yield ic(c)}})}function Ee(n){var t;let e=null;Xh(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=Za(n.expires_in)));let r=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:e,user:r},error:null}}function ti(n){let t=Ee(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((e,r)=>e&&typeof r=="string",!0)&&(t.data.weak_password=n.weak_password),t}function se(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function oc(n){return{data:n,error:null}}function ac(n){let{action_link:t,email_otp:e,hashed_token:r,redirect_to:s,verification_type:i}=n,o=Gh(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:e,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function cc(n){return n}function Xh(n){return n.access_token&&n.refresh_token&&n.expires_in}var Yh=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(e[r[s]]=n[r[s]]);return e},mt=class{constructor({url:t="",headers:e={},fetch:r}){this.url=t,this.headers=e,this.fetch=vn(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(t,e="global"){return d(this,null,function*(){try{return yield T(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(S(r))return{data:null,error:r};throw r}})}inviteUserByEmail(r){return d(this,arguments,function*(t,e={}){try{return yield T(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:se})}catch(s){if(S(s))return{data:{user:null},error:s};throw s}})}generateLink(t){return d(this,null,function*(){try{let{options:e}=t,r=Yh(t,["options"]),s=Object.assign(Object.assign({},r),e);return"newEmail"in r&&(s.new_email=r?.newEmail,delete s.newEmail),yield T(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:ac,redirectTo:e?.redirectTo})}catch(e){if(S(e))return{data:{properties:null,user:null},error:e};throw e}})}createUser(t){return d(this,null,function*(){try{return yield T(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:se})}catch(e){if(S(e))return{data:{user:null},error:e};throw e}})}listUsers(t){return d(this,null,function*(){var e,r,s,i,o,a,c;try{let l={nextPage:null,lastPage:0,total:0},u=yield T(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:cc});if(u.error)throw u.error;let h=yield u.json(),p=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(w=>{let m=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(w.split(";")[1].split("=")[1]);l[`${g}Page`]=m}),l.total=parseInt(p)),{data:Object.assign(Object.assign({},h),l),error:null}}catch(l){if(S(l))return{data:{users:[]},error:l};throw l}})}getUserById(t){return d(this,null,function*(){try{return yield T(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:se})}catch(e){if(S(e))return{data:{user:null},error:e};throw e}})}updateUserById(t,e){return d(this,null,function*(){try{return yield T(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:se})}catch(r){if(S(r))return{data:{user:null},error:r};throw r}})}deleteUser(t,e=!1){return d(this,null,function*(){try{return yield T(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:se})}catch(r){if(S(r))return{data:{user:null},error:r};throw r}})}_listFactors(t){return d(this,null,function*(){try{let{data:e,error:r}=yield T(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:e,error:r}}catch(e){if(S(e))return{data:null,error:e};throw e}})}_deleteFactor(t){return d(this,null,function*(){try{return{data:yield T(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(S(e))return{data:null,error:e};throw e}})}};var Sn="2.61.0";var lc="http://localhost:9999",uc="supabase.auth.token";var hc={"X-Client-Info":`gotrue-js/${Sn}`},ri=10;var dc={getItem:n=>Re()?globalThis.localStorage.getItem(n):null,setItem:(n,t)=>{Re()&&globalThis.localStorage.setItem(n,t)},removeItem:n=>{Re()&&globalThis.localStorage.removeItem(n)}};function ni(n={}){return{getItem:t=>n[t]||null,setItem:(t,e)=>{n[t]=e},removeItem:t=>{delete n[t]}}}function fc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var Qh={debug:!!(globalThis&&Re()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Rn=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}};fc();var Zh={url:lc,storageKey:uc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:hc,flowType:"implicit",debug:!1},gr=30*1e3,pc=3;function ed(n,t,e){return d(this,null,function*(){return yield e()})}var si=(()=>{class n{constructor(e){var r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&ee()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let s=Object.assign(Object.assign({},Zh),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new mt({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=vn(s.fetch),this.lock=s.lock||ed,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Re()?this.storage=dc:(this.memoryStorage={},this.storage=ni(this.memoryStorage)):(this.memoryStorage={},this.storage=ni(this.memoryStorage)),ee()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",i=>d(this,null,function*(){this._debug("received broadcast notification from other tab or client",i),yield this._notifyAllSubscribers(i.data.event,i.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Sn}) ${new Date().toISOString()}`,...e),this}initialize(){return d(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=d(this,null,function*(){return yield this._acquireLock(-1,()=>d(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return d(this,null,function*(){try{let e=ee()?yield this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){let{data:r,error:s}=yield this._getSessionFromURL(e);if(s)return this._debug("#_initialize()","error detecting session from URL",s),s?.message==="Identity is already linked"||s?.message==="Identity is already linked to another user"?{error:s}:(yield this._removeSession(),{error:s});let{session:i,redirectType:o}=r;return this._debug("#_initialize()","detected session in URL",i,"redirect type",o),yield this._saveSession(i),setTimeout(()=>d(this,null,function*(){o==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",i):yield this._notifyAllSubscribers("SIGNED_IN",i)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(e){return S(e)?{error:e}:{error:new dt("Unexpected error during initialization",e)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signUp(e){return d(this,null,function*(){var r,s,i;try{yield this._removeSession();let o;if("email"in e){let{email:h,password:p,options:f}=e,w=null,m=null;if(this.flowType==="pkce"){let g=Ue();yield Te(this.storage,`${this.storageKey}-code-verifier`,g),w=yield Le(g),m=g===w?"plain":"s256"}o=yield T(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:h,password:p,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:w,code_challenge_method:m},xform:Ee})}else if("phone"in e){let{phone:h,password:p,options:f}=e;o=yield T(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(s=f?.data)!==null&&s!==void 0?s:{},channel:(i=f?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Ee})}else throw new Ne("You must provide either an email or phone number and a password");let{data:a,error:c}=o;if(c||!a)return{data:{user:null,session:null},error:c};let l=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(o){if(S(o))return{data:{user:null,session:null},error:o};throw o}})}signInWithPassword(e){return d(this,null,function*(){try{yield this._removeSession();let r;if("email"in e){let{email:o,password:a,options:c}=e;r=yield T(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:ti})}else if("phone"in e){let{phone:o,password:a,options:c}=e;r=yield T(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:ti})}else throw new Ne("You must provide either an email or phone number and a password");let{data:s,error:i}=r;return i?{data:{user:null,session:null},error:i}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new ft}:(s.session&&(yield this._saveSession(s.session),yield this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:i})}catch(r){if(S(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOAuth(e){return d(this,null,function*(){var r,s,i,o;return yield this._removeSession(),yield this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})})}exchangeCodeForSession(e){return d(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>d(this,null,function*(){return this._exchangeCodeForSession(e)}))})}_exchangeCodeForSession(e){return d(this,null,function*(){let r=yield dr(this.storage,`${this.storageKey}-code-verifier`),[s,i]=(r??"").split("/"),{data:o,error:a}=yield T(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Ee});return yield yn(this.storage,`${this.storageKey}-code-verifier`),a?{data:{user:null,session:null,redirectType:null},error:a}:!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new ft}:(o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})})}signInWithIdToken(e){return d(this,null,function*(){yield this._removeSession();try{let{options:r,provider:s,token:i,access_token:o,nonce:a}=e,c=yield T(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Ee}),{data:l,error:u}=c;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new ft}:(l.session&&(yield this._saveSession(l.session),yield this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(r){if(S(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOtp(e){return d(this,null,function*(){var r,s,i,o,a;try{if(yield this._removeSession(),"email"in e){let{email:c,options:l}=e,u=null,h=null;if(this.flowType==="pkce"){let f=Ue();yield Te(this.storage,`${this.storageKey}-code-verifier`,f),u=yield Le(f),h=f===u?"plain":"s256"}let{error:p}=yield T(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(s=l?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){let{phone:c,options:l}=e,{data:u,error:h}=yield T(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=l?.data)!==null&&i!==void 0?i:{},create_user:(o=l?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(a=l?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u?.message_id},error:h}}throw new Ne("You must provide either an email or phone number.")}catch(c){if(S(c))return{data:{user:null,session:null},error:c};throw c}})}verifyOtp(e){return d(this,null,function*(){var r,s;try{e.type!=="email_change"&&e.type!=="phone_change"&&(yield this._removeSession());let i,o;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(s=e.options)===null||s===void 0?void 0:s.captchaToken);let{data:a,error:c}=yield T(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:Ee});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");let l=a.session,u=a.user;return l?.access_token&&(yield this._saveSession(l),yield this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(S(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithSSO(e){return d(this,null,function*(){var r,s,i;try{yield this._removeSession();let o=null,a=null;if(this.flowType==="pkce"){let c=Ue();yield Te(this.storage,`${this.storageKey}-code-verifier`,c),o=yield Le(c),a=c===o?"plain":"s256"}return yield T(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:oc})}catch(o){if(S(o))return{data:null,error:o};throw o}})}reauthenticate(){return d(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>d(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return d(this,null,function*(){try{return yield this._useSession(e=>d(this,null,function*(){let{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new de;let{error:i}=yield T(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}}))}catch(e){if(S(e))return{data:{user:null,session:null},error:e};throw e}})}resend(e){return d(this,null,function*(){try{e.type!="email_change"&&e.type!="phone_change"&&(yield this._removeSession());let r=`${this.url}/resend`;if("email"in e){let{email:s,type:i,options:o}=e,{error:a}=yield T(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){let{phone:s,type:i,options:o}=e,{data:a,error:c}=yield T(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:c}}throw new Ne("You must provide either an email or phone number and a type")}catch(r){if(S(r))return{data:{user:null,session:null},error:r};throw r}})}getSession(){return d(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>d(this,null,function*(){return this._useSession(e=>d(this,null,function*(){return e}))}))})}_acquireLock(e,r){return d(this,null,function*(){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=d(this,null,function*(){return yield s,yield r()});return this.pendingInLock.push(d(this,null,function*(){try{yield i}catch{}})),i}return yield this.lock(`lock:${this.storageKey}`,e,()=>d(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let s=r();for(this.pendingInLock.push(d(this,null,function*(){try{yield s}catch{}})),yield s;this.pendingInLock.length;){let i=[...this.pendingInLock];yield Promise.all(i),this.pendingInLock.splice(0,i.length)}return yield s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(e){return d(this,null,function*(){this._debug("#_useSession","begin");try{let r=yield this.__loadSession();return yield e(r)}finally{this._debug("#_useSession","end")}})}__loadSession(){return d(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,r=yield dr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!e)return{data:{session:null},error:null};let s=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s)return{data:{session:e},error:null};let{session:i,error:o}=yield this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(e){return d(this,null,function*(){return e?yield this._getUser(e):(yield this.initializePromise,this._acquireLock(-1,()=>d(this,null,function*(){return yield this._getUser()})))})}_getUser(e){return d(this,null,function*(){try{return e?yield T(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:se}):yield this._useSession(r=>d(this,null,function*(){var s,i;let{data:o,error:a}=r;if(a)throw a;return yield T(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:se})}))}catch(r){if(S(r))return{data:{user:null},error:r};throw r}})}updateUser(s){return d(this,arguments,function*(e,r={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>d(this,null,function*(){return yield this._updateUser(e,r)}))})}_updateUser(s){return d(this,arguments,function*(e,r={}){try{return yield this._useSession(i=>d(this,null,function*(){let{data:o,error:a}=i;if(a)throw a;if(!o.session)throw new de;let c=o.session,l=null,u=null;if(this.flowType==="pkce"&&e.email!=null){let f=Ue();yield Te(this.storage,`${this.storageKey}-code-verifier`,f),l=yield Le(f),u=f===l?"plain":"s256"}let{data:h,error:p}=yield T(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:u}),jwt:c.access_token,xform:se});if(p)throw p;return c.user=h.user,yield this._saveSession(c),yield this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}}))}catch(i){if(S(i))return{data:{user:null},error:i};throw i}})}_decodeJWT(e){return ei(e)}setSession(e){return d(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>d(this,null,function*(){return yield this._setSession(e)}))})}_setSession(e){return d(this,null,function*(){try{if(!e.access_token||!e.refresh_token)throw new de;let r=Date.now()/1e3,s=r,i=!0,o=null,a=ei(e.access_token);if(a.exp&&(s=a.exp,i=s<=r),i){let{session:c,error:l}=yield this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!c)return{data:{user:null,session:null},error:null};o=c}else{let{data:c,error:l}=yield this._getUser(e.access_token);if(l)throw l;o={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:s-r,expires_at:s},yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(S(r))return{data:{session:null,user:null},error:r};throw r}})}refreshSession(e){return d(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>d(this,null,function*(){return yield this._refreshSession(e)}))})}_refreshSession(e){return d(this,null,function*(){try{return yield this._useSession(r=>d(this,null,function*(){var s;if(!e){let{data:a,error:c}=r;if(c)throw c;e=(s=a.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new de;let{session:i,error:o}=yield this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}}))}catch(r){if(S(r))return{data:{user:null,session:null},error:r};throw r}})}_getSessionFromURL(e){return d(this,null,function*(){try{if(!ee())throw new $e("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new $e("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new pr("Not a valid PKCE flow url.");let r=mn(window.location.href);if(e){if(!r.code)throw new pr("No code detected.");let{data:k,error:L}=yield this._exchangeCodeForSession(r.code);if(L)throw L;let Q=new URL(window.location.href);return Q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Q.toString()),{data:{session:k.session,redirectType:null},error:null}}if(r.error||r.error_description||r.error_code)throw new $e(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});let{provider_token:s,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:c,expires_at:l,token_type:u}=r;if(!o||!c||!a||!u)throw new $e("No session defined in URL");let h=Math.round(Date.now()/1e3),p=parseInt(c),f=h+p;l&&(f=parseInt(l));let w=f-h;w*1e3<=gr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${p}s`);let m=f-p;h-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,h):h-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",m,f,h);let{data:g,error:O}=yield this._getUser(o);if(O)throw O;let F={provider_token:s,provider_refresh_token:i,access_token:o,expires_in:p,expires_at:f,refresh_token:a,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:F,redirectType:r.type},error:null}}catch(r){if(S(r))return{data:{session:null,redirectType:null},error:r};throw r}})}_isImplicitGrantFlow(){let e=mn(window.location.href);return!!(ee()&&(e.access_token||e.error_description))}_isPKCEFlow(){return d(this,null,function*(){let e=mn(window.location.href),r=yield dr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)})}signOut(){return d(this,arguments,function*(e={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>d(this,null,function*(){return yield this._signOut(e)}))})}_signOut(){return d(this,arguments,function*({scope:e}={scope:"global"}){return yield this._useSession(r=>d(this,null,function*(){var s;let{data:i,error:o}=r;if(o)return{error:o};let a=(s=i.session)===null||s===void 0?void 0:s.access_token;if(a){let{error:c}=yield this.admin.signOut(a,e);if(c&&!(sc(c)&&(c.status===404||c.status===401)))return{error:c}}return e!=="others"&&(yield this._removeSession(),yield yn(this.storage,`${this.storageKey}-code-verifier`),yield this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}}))})}onAuthStateChange(e){let r=ec(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),d(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>d(this,null,function*(){this._emitInitialSession(r)}))}),{data:{subscription:s}}}_emitInitialSession(e){return d(this,null,function*(){return yield this._useSession(r=>d(this,null,function*(){var s,i;try{let{data:{session:o},error:a}=r;if(a)throw a;yield(s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){yield(i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}}))})}resetPasswordForEmail(s){return d(this,arguments,function*(e,r={}){let i=null,o=null;if(this.flowType==="pkce"){let a=Ue();yield Te(this.storage,`${this.storageKey}-code-verifier`,`${a}/PASSWORD_RECOVERY`),i=yield Le(a),o=a===i?"plain":"s256"}try{return yield T(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(S(a))return{data:null,error:a};throw a}})}getUserIdentities(){return d(this,null,function*(){var e;try{let{data:r,error:s}=yield this.getUser();if(s)throw s;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(S(r))return{data:null,error:r};throw r}})}linkIdentity(e){return d(this,null,function*(){var r;try{let{data:s,error:i}=yield this._useSession(o=>d(this,null,function*(){var a,c,l,u,h;let{data:p,error:f}=o;if(f)throw f;let w=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return yield T(this.fetch,"GET",w,{headers:this.headers,jwt:(h=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})}));if(i)throw i;return ee()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:e.provider,url:s?.url},error:null}}catch(s){if(S(s))return{data:{provider:e.provider,url:null},error:s};throw s}})}unlinkIdentity(e){return d(this,null,function*(){try{return yield this._useSession(r=>d(this,null,function*(){var s,i;let{data:o,error:a}=r;if(a)throw a;return yield T(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0})}))}catch(r){if(S(r))return{data:null,error:r};throw r}})}_refreshAccessToken(e){return d(this,null,function*(){let r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{let s=Date.now();return yield nc(i=>d(this,null,function*(){return yield rc(i*200),this._debug(r,"refreshing attempt",i),yield T(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ee})}),(i,o,a)=>a&&a.error&&bn(a.error)&&Date.now()+(i+1)*200-s<gr)}catch(s){if(this._debug(r,"error",s),S(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,r){return d(this,null,function*(){let s=yield this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),ee()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}})}_recoverAndRefresh(){return d(this,null,function*(){var e;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let s=yield dr(this.storage,this.storageKey);if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&(yield this._removeSession());return}let i=Math.round(Date.now()/1e3),o=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<i+ri;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${ri}s`),o){if(this.autoRefreshToken&&s.refresh_token){let{error:a}=yield this._callRefreshToken(s.refresh_token);a&&(console.error(a),bn(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),yield this._removeSession()))}}else yield this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}})}_callRefreshToken(e){return d(this,null,function*(){var r,s;if(!e)throw new de;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new hr;let{data:o,error:a}=yield this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new de;yield this._saveSession(o.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);let c={session:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(i,"error",o),S(o)){let a={session:null,error:o};return bn(o)||(yield this._removeSession(),yield this._notifyAllSubscribers("SIGNED_OUT",null)),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}})}_notifyAllSubscribers(e,r,s=!0){return d(this,null,function*(){let i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});let o=[],a=Array.from(this.stateChangeEmitters.values()).map(c=>d(this,null,function*(){try{yield c.callback(e,r)}catch(l){o.push(l)}}));if(yield Promise.all(a),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(i,"end")}})}_saveSession(e){return d(this,null,function*(){this._debug("#_saveSession()",e),yield Te(this.storage,this.storageKey,e)})}_removeSession(){return d(this,null,function*(){this._debug("#_removeSession()"),yield yn(this.storage,this.storageKey)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ee()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){return d(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),gr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(()=>d(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return d(this,null,function*(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return d(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return d(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return d(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>d(this,null,function*(){try{let e=Date.now();try{return yield this._useSession(r=>d(this,null,function*(){let{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let i=Math.floor((s.expires_at*1e3-e)/gr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${gr}ms, refresh threshold is ${pc} ticks`),i<=pc&&(yield this._callRefreshToken(s.refresh_token))}))}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(e.isAcquireTimeout||e instanceof Rn)this._debug("auto refresh token tick lock not available");else throw e}})}_handleVisibilityChange(){return d(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!ee()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>d(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return d(this,null,function*(){let r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(yield this.initializePromise,yield this._acquireLock(-1,()=>d(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,r,s){return d(this,null,function*(){let i=[`provider=${encodeURIComponent(r)}`];if(s?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&i.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){let o=Ue();yield Te(this.storage,`${this.storageKey}-code-verifier`,o);let a=yield Le(o),c=o===a?"plain":"s256";this._debug("PKCE","code verifier",`${o.substring(0,5)}...`,"code challenge",a,"method",c);let l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(c)}`});i.push(l.toString())}if(s?.queryParams){let o=new URLSearchParams(s.queryParams);i.push(o.toString())}return s?.skipBrowserRedirect&&i.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${i.join("&")}`})}_unenroll(e){return d(this,null,function*(){try{return yield this._useSession(r=>d(this,null,function*(){var s;let{data:i,error:o}=r;return o?{data:null,error:o}:yield T(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token})}))}catch(r){if(S(r))return{data:null,error:r};throw r}})}_enroll(e){return d(this,null,function*(){try{return yield this._useSession(r=>d(this,null,function*(){var s,i;let{data:o,error:a}=r;if(a)return{data:null,error:a};let{data:c,error:l}=yield T(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(!((i=c?.totp)===null||i===void 0)&&i.qr_code&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})}))}catch(r){if(S(r))return{data:null,error:r};throw r}})}_verify(e){return d(this,null,function*(){return this._acquireLock(-1,()=>d(this,null,function*(){try{return yield this._useSession(r=>d(this,null,function*(){var s;let{data:i,error:o}=r;if(o)return{data:null,error:o};let{data:a,error:c}=yield T(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:c})}))}catch(r){if(S(r))return{data:null,error:r};throw r}}))})}_challenge(e){return d(this,null,function*(){return this._acquireLock(-1,()=>d(this,null,function*(){try{return yield this._useSession(r=>d(this,null,function*(){var s;let{data:i,error:o}=r;return o?{data:null,error:o}:yield T(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token})}))}catch(r){if(S(r))return{data:null,error:r};throw r}}))})}_challengeAndVerify(e){return d(this,null,function*(){let{data:r,error:s}=yield this._challenge({factorId:e.factorId});return s?{data:null,error:s}:yield this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})})}_listFactors(){return d(this,null,function*(){let{data:{user:e},error:r}=yield this.getUser();if(r)return{data:null,error:r};let s=e?.factors||[],i=s.filter(o=>o.factor_type==="totp"&&o.status==="verified");return{data:{all:s,totp:i},error:null}})}_getAuthenticatorAssuranceLevel(){return d(this,null,function*(){return this._acquireLock(-1,()=>d(this,null,function*(){return yield this._useSession(e=>d(this,null,function*(){var r,s;let{data:{session:i},error:o}=e;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let a=this._decodeJWT(i.access_token),c=null;a.aal&&(c=a.aal);let l=c;((s=(r=i.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(l="aal2");let h=a.amr||[];return{data:{currentLevel:c,nextLevel:l,currentAuthenticationMethods:h},error:null}}))}))})}}return n.nextInstanceID=0,n})();var td=si,ii=td;var Tn=class extends ii{constructor(t){super(t)}};var rd=function(n,t,e,r){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})},En=class{constructor(t,e,r){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=e,!t)throw new Error("supabaseUrl is required.");if(!e)throw new Error("supabaseKey is required.");let a=Ya(t);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;let c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,l={db:Wa,realtime:Ka,auth:Object.assign(Object.assign({},Ja),{storageKey:c}),global:Ga},u=Qa(r??{},l);this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=Xa(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Da(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new Qt(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new lr(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,e;return rd(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:c},l,u){let h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Tn({url:this.authUrl,headers:Object.assign(Object.assign({},h),l),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new ar(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var Qg=(n,t,e)=>new En(n,t,e);function gc(n){"@babel/helpers - typeof";return gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gc(n)}export{Or as a,xr as b,kc as c,vd as d,wo as e,zd as f,dl as g,b as h,re as i,_e as j,Hl as k,be as l,pf as m,gf as n,mf as o,gc as p,Qg as q};
